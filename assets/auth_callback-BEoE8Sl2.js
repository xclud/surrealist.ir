import{C as E,S as b,P as R,M as k,c as w}from"./__vite-browser-external-B3eMZhj8.js";import{j as e,M as C,S as x,T as o,P as _,L as c,a as v}from"./mantime-DzxuLKfp.js";import{r as a}from"./react-DmHxDqaV.js";const I="_root_1dgz0_1",P="_launch_1dgz0_7",y={root:I,launch:P},d=`https://${location.host}`;function T(){const[r,i]=a.useState("redirect"),[j,S]=a.useState(void 0),h=a.useRef(""),f=a.useRef(""),l=a.useCallback(()=>{const t=h.current,s=f.current;t&&s?location.href=`surrealist://?intent=cloud-auth:code=${t},state=${s}`:location.href="surrealist://?intent=cloud-signout"},[]);return a.useLayoutEffect(()=>{const t=new URLSearchParams(window.location.search),s=t.get("code"),n=t.get("state"),m=t.get("error"),p=t.get("target"),u=t.get("error_description");if(m||u){u?.includes("verify your email")?i("verify"):(i("error"),S(`Encountered an error: ${u} (${m})`));return}const g=p==="desktop"||n?.startsWith("desktop")?"desktop":p==="browser"||n?.startsWith("browser")?"browser":"unknown";if(g==="desktop"){s&&n&&(h.current=s,f.current=n),i("launch"),l();return}if(g==="browser"){if(s&&n){sessionStorage.setItem(E,s),sessionStorage.setItem(b,n),location.href=d;return}location.href=`${d}?intent=cloud-signout`;return}i("close")},[l]),e.jsx(C,{withCssVariables:!0,theme:k,forceColorScheme:"dark",children:e.jsx(x,{className:y.root,justify:"center",align:"center",gap:"xl",children:r==="redirect"?e.jsx(o,{fz:"lg",children:"Redirecting..."}):r==="close"?e.jsx(o,{fz:"lg",children:"You can now safely close this page and return to Surrealist"}):r==="verify"?e.jsx(_,{p:"xl",children:e.jsxs(x,{maw:300,children:[e.jsx(R,{children:"Verify your email"}),e.jsx(o,{children:"Please verify your email before continuing to Surreal Cloud. If you have not received an email, please check your spam folder."}),e.jsxs(c,{children:[e.jsx(c.Item,{children:"Open your email inbox and find the email"}),e.jsx(c.Item,{children:"Press the button to verify your email"}),e.jsx(c.Item,{children:"Return to Surrealist to enter Surreal Cloud"})]}),e.jsx(o,{mt:"md",c:"bright",children:"Already verified your email?"}),e.jsx(v,{variant:"gradient",radius:"xs",style:{backgroundOrigin:"border-box",border:"1px solid rgba(255, 255, 255, 0.3)"},onClick:()=>{location.href=`${d}?intent=cloud-signin`},children:"Continue to Surreal Cloud"})]})}):r==="error"?e.jsx(o,{fz:"lg",c:"red",children:j}):r==="launch"?e.jsxs(e.Fragment,{children:[e.jsx(o,{fz:"lg",children:"Opening Surrealist..."}),e.jsx(o,{className:y.launch,onClick:l,children:"If the app does not open automatically, please click here to open it"}),e.jsx(o,{c:"slate",children:"You can close this page once the app has opened"})]}):e.jsx(e.Fragment,{})})})}(async()=>{const r=document.querySelector("#root");if(!r)throw new Error("Root element not found");w(r).render(e.jsx(T,{}))})();
