const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CjdLtKP4.js","assets/mantime-DzxuLKfp.js","assets/react-DmHxDqaV.js","assets/index-BKfNB2Nq.js","assets/codemirror-C1Jmd34s.js","assets/surreal-DG7xeRSZ.js","assets/__vite-browser-external-B3eMZhj8.js","assets/__vite-browser-external--FIdMbH8.css","assets/posthog-BV-AQckr.js","assets/index-7CHOXPUm.css","assets/index-a6kZMJSm.css"])))=>i.map(i=>d[i]);
var _i=e=>{throw TypeError(e)};var us=(e,t,n)=>t.has(e)||_i("Cannot "+n);var j=(e,t,n)=>(us(e,t,"read from private field"),n?n.call(e):t.get(e)),ie=(e,t,n)=>t.has(e)?_i("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ee=(e,t,n,r)=>(us(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ye=(e,t,n)=>(us(e,t,"access private method"),n);var br=(e,t,n,r)=>({set _(s){ee(e,t,s,n)},get _(){return j(e,t,r)}});import{r as d,d as ia,g as oa,a as Nt,b as Vs,R as Re}from"./react-DmHxDqaV.js";import{j as o,B as ae,G as ne,a as pe,r as ds,e as Gs,k as al,l as be,m as aa,N as cl,n as Tr,T as K,o as ll,p as ul,P as Ft,c as Ht,q as ct,s as Vr,g as Ee,A as fe,t as Jt,v as Ks,b as Hn,w as dl,S as je,D as sr,x as fl,y as hl,z as pl,E as ml,F as qi,U as ca,H as gl,J as ht,K as vl,Q as bl,R as lt,V as yl,f as ir,h as xl,W as _e,X as wl,Y as Sl,Z as Ct,_ as Vn,$ as Cl,a0 as El,i as jl,I as Fi,a1 as Ll,a2 as Dl,a3 as Ml,a4 as yr,M as Rl,a5 as Pl}from"./mantime-DzxuLKfp.js";import{a as Ys,b as Nl,E as sn,C as Ns,h as Il,c as on,l as Tl,f as Hi,s as Lt,d as kl,e as Ol,P as la,k as ua}from"./codemirror-C1Jmd34s.js";import{G as Xs}from"./posthog-BV-AQckr.js";import{k as Al,l as zl,m as Et,c as A,n as fs,q as Js,r as $l,I as O,t as or,S as Ve,e as wn,v as ar,w as ut,j as Zs,x as _l,y as Le,z as _t,A as ql,B as Fl,E as Gr,G as ei,H as cr,J as da,u as st,K as Hl,L as Qn,M as Sn,N as Ql,P as Dn,Q as Is,i as rt,C as fa,R as Wl,U as ha,V as Ul,W as Bl,a as le,X as Qi,Y as pa,Z as Vl,_ as ma,$ as Gl,D as Wi,a0 as Kl,a1 as ga,a2 as Yl,a3 as Xl,a4 as Jl,a5 as va,a6 as kr,a7 as ba,a8 as Zl,a9 as eu,aa as ya,ab as xa,ac as tu,ad as nu,ae as ru,af as wa,ag as Cn,ah as lr,ai as su,aj as En,ak as jn,g as Sa,al as Or,am as Ar,an as Ui,ao as Bi,ap as iu,aq as Ca,ar as ou,as as zr,at as Ts,au as Ea,av as Mr,aw as ti,ax as au,ay as cn,az as ni,aA as ri,aB as cu,aC as ja,aD as lu,aE as La,aF as Da,aG as ks,aH as Vi,aI as uu,aJ as Ma,aK as $r,aL as Ra,aM as Pa,aN as du,aO as fu,aP as Na,aQ as Ia,aR as hu,aS as pu,b as mu,aT as hs,aU as gu,aV as vu,aW as Os,aX as Ze,T as bu,aY as yu,aZ as xu,a_ as Gi,O as wu,a$ as Su,b0 as Cu,b1 as Eu,b2 as ju,b3 as Lu,b4 as Rt,b5 as Du,b6 as Mu,b7 as Ki,b8 as Ru,o as Pu,b9 as Nu,ba as xr,bb as Iu,bc as Yi,bd as Tu,be as ku,bf as Ou,bg as Au,bh as zu,bi as $u,bj as _u,bk as qu,bl as ps,bm as Fu,bn as Xi,bo as Hu,bp as Qu,bq as Wu,br as Uu,bs as Bu,bt as Vu,bu as Gu,bv as Ku,bw as Yu,bx as Xu,by as Ju,bz as Zu,bA as wr,bB as ed,bC as td,bD as nd,bE as rd,bF as sd,bG as id,bH as od,bI as ad,bJ as cd,bK as ld,F as ud}from"./index-BKfNB2Nq.js";import{P as Qt,M as dd}from"./__vite-browser-external-B3eMZhj8.js";import{R as _r,_ as fd,D as hd,U as pd,G as md,a as gd,b as vd,c as bd,d as yd,e as xd,f as wd,g as Sd,V as Cd}from"./surreal-DG7xeRSZ.js";const Ed=e=>new Promise(t=>setTimeout(t,e)),jd=e=>(...t)=>{try{const n=e(...t);return Al(n)?n.then(r=>[void 0,r]).catch(r=>[r,void 0]):[void 0,n]}catch(n){return[n,void 0]}},si=e=>{if(!e||e.length===0)return"";const t=e.toLowerCase();return t.substring(0,1).toUpperCase()+t.substring(1,t.length)},Ld=e=>{const t=e?.replace(/([A-Z])+/g,si)?.split(/(?=[A-Z])|[\.\-\s_]/).map(n=>n.toLowerCase())??[];return t.length===0?"":t.length===1?t[0]:t.reduce((n,r)=>`${n}-${r.toLowerCase()}`)},nb=e=>{const t=e?.split(/[\.\-\s_]/).map(n=>n.toLowerCase())??[];return t.length===0?"":t.map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join("")},Dd=(e,t=" ")=>{if(!e)return"";const n=t.replace(/[\W]{1}/g,"\\$&"),r=new RegExp(`^[${n}]+|[${n}]+$`,"g");return e.replace(r,"")},ii=d.createContext(null);ii.displayName="@mantine/modals/ModalsContext";function Md(){const e=d.useContext(ii);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function Rd({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:s=!0,closeOnCancel:i=!0,groupProps:c,onCancel:a,onConfirm:l,children:u}){const{cancel:h,confirm:f}=r,p=Md(),g=b=>{typeof t?.onClick=="function"&&t?.onClick(b),typeof a=="function"&&a(),i&&p.closeModal(e)},v=b=>{typeof n?.onClick=="function"&&n?.onClick(b),typeof l=="function"&&l(),s&&p.closeModal(e)};return o.jsxs(o.Fragment,{children:[u&&o.jsx(ae,{mb:"md",children:u}),o.jsxs(ne,{mt:u?0:"md",justify:"flex-end",...c,children:[o.jsx(pe,{variant:"default",...t,onClick:g,children:t?.children||h}),o.jsx(pe,{...n,onClick:v,children:n?.children||f})]})]})}function Ji(e,t){t&&e.type==="confirm"&&e.props.onCancel?.(),e.props.onClose?.()}function Pd(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(s=>s.id===t.modalId);if(!n)return e;Ji(n,t.canceled);const r=e.modals.filter(s=>s.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Ji(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function Nd(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:s,closeOnConfirm:i,closeOnCancel:c,cancelProps:a,confirmProps:l,groupProps:u,labels:h,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:s,closeOnConfirm:i,closeOnCancel:c,cancelProps:a,confirmProps:l,groupProps:u,labels:h},modalProps:{id:t,...f}}}function Id({children:e,modalProps:t,labels:n,modals:r}){const[s,i]=d.useReducer(Pd,{modals:[],current:null}),c=d.useRef(s);c.current=s;const a=d.useCallback(m=>{i({type:"CLOSE_ALL",canceled:m})},[c,i]),l=d.useCallback(({modalId:m,...y})=>{const S=m||ds();return i({type:"OPEN",modal:{id:S,type:"content",props:y}}),S},[i]),u=d.useCallback(({modalId:m,...y})=>{const S=m||ds();return i({type:"OPEN",modal:{id:S,type:"confirm",props:y}}),S},[i]),h=d.useCallback((m,{modalId:y,...S})=>{const C=y||ds();return i({type:"OPEN",modal:{id:C,type:"context",props:S,ctx:m}}),C},[i]),f=d.useCallback((m,y)=>{i({type:"CLOSE",modalId:m,canceled:y})},[c,i]);zl({openModal:l,openConfirmModal:u,openContextModal:({modal:m,...y})=>h(m,y),closeModal:f,closeContextModal:f,closeAllModals:a});const p={modals:s.modals,openModal:l,openConfirmModal:u,openContextModal:h,closeModal:f,closeContextModal:f,closeAll:a},g=()=>{const m=c.current.current;switch(m?.type){case"context":{const{innerProps:y,...S}=m.props,C=r[m.ctx];return{modalProps:S,content:o.jsx(C,{innerProps:y,context:p,id:m.id})}}case"confirm":{const{modalProps:y,confirmProps:S}=Nd(m.props);return{modalProps:y,content:o.jsx(Rd,{...S,id:m.id,labels:m.props.labels||n})}}case"content":{const{children:y,...S}=m.props;return{modalProps:S,content:y}}default:return{modalProps:{},content:null}}},{modalProps:v,content:b}=g();return o.jsxs(ii.Provider,{value:p,children:[o.jsx(Gs,{zIndex:al("modal")+1,...t,...v,opened:s.modals.length>0,onClose:()=>f(s.current?.id),children:b}),e]})}const Td=e=>{const t=e.matchBefore(/fn::\w*/i),r=Et.getState().connectionSchema.database.functions.map(s=>`fn::${s.name}`);return!e.explicit&&!t?null:{from:t?t.from:e.pos,validFor:/[\w:]+$/,options:r.map(s=>Nl(`${s}(#{1})`,{label:s,type:"function"}))}},kd=()=>Ys.data.of({autocomplete:Td}),Od=e=>sn.updateListener.of(t=>{t.selectionSet&&e(t.state.selection.main)}),Ad=e=>{const t=e.matchBefore(/(from|update|create|delete|into) \w*/i),r=Et.getState().connectionSchema.database.tables.map(s=>s.schema.name);return!e.explicit&&!t?null:{from:t?t.from+t.text.indexOf(" ")+1:e.pos,validFor:/\w+$/,options:r.map(s=>({label:s,type:"class"}))}},zd=()=>Ys.data.of({autocomplete:Ad}),$d=e=>{const t=n=>{const r=n.matchBefore(/\$\w*/i);return!n.explicit&&!r?null:{from:r?r.from:n.pos,validFor:/\$\w+$/,options:e().map(s=>({label:`$${s}`,type:"variable"}))}};return Ys.data.of({autocomplete:t})};var Ta={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ia,function(){var n=1e3,r=6e4,s=36e5,i="millisecond",c="second",a="minute",l="hour",u="day",h="week",f="month",p="quarter",g="year",v="date",b="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(P){var M=["th","st","nd","rd"],L=P%100;return"["+P+(M[(L-20)%10]||M[L]||M[0])+"]"}},C=function(P,M,L){var T=String(P);return!T||T.length>=M?P:""+Array(M+1-T.length).join(L)+P},D={s:C,z:function(P){var M=-P.utcOffset(),L=Math.abs(M),T=Math.floor(L/60),I=L%60;return(M<=0?"+":"-")+C(T,2,"0")+":"+C(I,2,"0")},m:function P(M,L){if(M.date()<L.date())return-P(L,M);var T=12*(L.year()-M.year())+(L.month()-M.month()),I=M.clone().add(T,f),U=L-I<0,Q=M.clone().add(T+(U?-1:1),f);return+(-(T+(L-I)/(U?I-Q:Q-I))||0)},a:function(P){return P<0?Math.ceil(P)||0:Math.floor(P)},p:function(P){return{M:f,y:g,w:h,d:u,D:v,h:l,m:a,s:c,ms:i,Q:p}[P]||String(P||"").toLowerCase().replace(/s$/,"")},u:function(P){return P===void 0}},x="en",E={};E[x]=S;var w="$isDayjsObject",N=function(P){return P instanceof G||!(!P||!P[w])},z=function P(M,L,T){var I;if(!M)return x;if(typeof M=="string"){var U=M.toLowerCase();E[U]&&(I=U),L&&(E[U]=L,I=U);var Q=M.split("-");if(!I&&Q.length>1)return P(Q[0])}else{var J=M.name;E[J]=M,I=J}return!T&&I&&(x=I),I||!T&&x},_=function(P,M){if(N(P))return P.clone();var L=typeof M=="object"?M:{};return L.date=P,L.args=arguments,new G(L)},k=D;k.l=z,k.i=N,k.w=function(P,M){return _(P,{locale:M.$L,utc:M.$u,x:M.$x,$offset:M.$offset})};var G=function(){function P(L){this.$L=z(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[w]=!0}var M=P.prototype;return M.parse=function(L){this.$d=function(T){var I=T.date,U=T.utc;if(I===null)return new Date(NaN);if(k.u(I))return new Date;if(I instanceof Date)return new Date(I);if(typeof I=="string"&&!/Z$/i.test(I)){var Q=I.match(m);if(Q){var J=Q[2]-1||0,Y=(Q[7]||"0").substring(0,3);return U?new Date(Date.UTC(Q[1],J,Q[3]||1,Q[4]||0,Q[5]||0,Q[6]||0,Y)):new Date(Q[1],J,Q[3]||1,Q[4]||0,Q[5]||0,Q[6]||0,Y)}}return new Date(I)}(L),this.init()},M.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},M.$utils=function(){return k},M.isValid=function(){return this.$d.toString()!==b},M.isSame=function(L,T){var I=_(L);return this.startOf(T)<=I&&I<=this.endOf(T)},M.isAfter=function(L,T){return _(L)<this.startOf(T)},M.isBefore=function(L,T){return this.endOf(T)<_(L)},M.$g=function(L,T,I){return k.u(L)?this[T]:this.set(I,L)},M.unix=function(){return Math.floor(this.valueOf()/1e3)},M.valueOf=function(){return this.$d.getTime()},M.startOf=function(L,T){var I=this,U=!!k.u(T)||T,Q=k.p(L),J=function(Z,F){var ce=k.w(I.$u?Date.UTC(I.$y,F,Z):new Date(I.$y,F,Z),I);return U?ce:ce.endOf(u)},Y=function(Z,F){return k.w(I.toDate()[Z].apply(I.toDate("s"),(U?[0,0,0,0]:[23,59,59,999]).slice(F)),I)},R=this.$W,$=this.$M,W=this.$D,H="set"+(this.$u?"UTC":"");switch(Q){case g:return U?J(1,0):J(31,11);case f:return U?J(1,$):J(0,$+1);case h:var q=this.$locale().weekStart||0,X=(R<q?R+7:R)-q;return J(U?W-X:W+(6-X),$);case u:case v:return Y(H+"Hours",0);case l:return Y(H+"Minutes",1);case a:return Y(H+"Seconds",2);case c:return Y(H+"Milliseconds",3);default:return this.clone()}},M.endOf=function(L){return this.startOf(L,!1)},M.$set=function(L,T){var I,U=k.p(L),Q="set"+(this.$u?"UTC":""),J=(I={},I[u]=Q+"Date",I[v]=Q+"Date",I[f]=Q+"Month",I[g]=Q+"FullYear",I[l]=Q+"Hours",I[a]=Q+"Minutes",I[c]=Q+"Seconds",I[i]=Q+"Milliseconds",I)[U],Y=U===u?this.$D+(T-this.$W):T;if(U===f||U===g){var R=this.clone().set(v,1);R.$d[J](Y),R.init(),this.$d=R.set(v,Math.min(this.$D,R.daysInMonth())).$d}else J&&this.$d[J](Y);return this.init(),this},M.set=function(L,T){return this.clone().$set(L,T)},M.get=function(L){return this[k.p(L)]()},M.add=function(L,T){var I,U=this;L=Number(L);var Q=k.p(T),J=function($){var W=_(U);return k.w(W.date(W.date()+Math.round($*L)),U)};if(Q===f)return this.set(f,this.$M+L);if(Q===g)return this.set(g,this.$y+L);if(Q===u)return J(1);if(Q===h)return J(7);var Y=(I={},I[a]=r,I[l]=s,I[c]=n,I)[Q]||1,R=this.$d.getTime()+L*Y;return k.w(R,this)},M.subtract=function(L,T){return this.add(-1*L,T)},M.format=function(L){var T=this,I=this.$locale();if(!this.isValid())return I.invalidDate||b;var U=L||"YYYY-MM-DDTHH:mm:ssZ",Q=k.z(this),J=this.$H,Y=this.$m,R=this.$M,$=I.weekdays,W=I.months,H=I.meridiem,q=function(F,ce,oe,re){return F&&(F[ce]||F(T,U))||oe[ce].slice(0,re)},X=function(F){return k.s(J%12||12,F,"0")},Z=H||function(F,ce,oe){var re=F<12?"AM":"PM";return oe?re.toLowerCase():re};return U.replace(y,function(F,ce){return ce||function(oe){switch(oe){case"YY":return String(T.$y).slice(-2);case"YYYY":return k.s(T.$y,4,"0");case"M":return R+1;case"MM":return k.s(R+1,2,"0");case"MMM":return q(I.monthsShort,R,W,3);case"MMMM":return q(W,R);case"D":return T.$D;case"DD":return k.s(T.$D,2,"0");case"d":return String(T.$W);case"dd":return q(I.weekdaysMin,T.$W,$,2);case"ddd":return q(I.weekdaysShort,T.$W,$,3);case"dddd":return $[T.$W];case"H":return String(J);case"HH":return k.s(J,2,"0");case"h":return X(1);case"hh":return X(2);case"a":return Z(J,Y,!0);case"A":return Z(J,Y,!1);case"m":return String(Y);case"mm":return k.s(Y,2,"0");case"s":return String(T.$s);case"ss":return k.s(T.$s,2,"0");case"SSS":return k.s(T.$ms,3,"0");case"Z":return Q}return null}(F)||Q.replace(":","")})},M.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},M.diff=function(L,T,I){var U,Q=this,J=k.p(T),Y=_(L),R=(Y.utcOffset()-this.utcOffset())*r,$=this-Y,W=function(){return k.m(Q,Y)};switch(J){case g:U=W()/12;break;case f:U=W();break;case p:U=W()/3;break;case h:U=($-R)/6048e5;break;case u:U=($-R)/864e5;break;case l:U=$/s;break;case a:U=$/r;break;case c:U=$/n;break;default:U=$}return I?U:k.a(U)},M.daysInMonth=function(){return this.endOf(f).$D},M.$locale=function(){return E[this.$L]},M.locale=function(L,T){if(!L)return this.$L;var I=this.clone(),U=z(L,T,!0);return U&&(I.$L=U),I},M.clone=function(){return k.w(this.$d,this)},M.toDate=function(){return new Date(this.valueOf())},M.toJSON=function(){return this.isValid()?this.toISOString():null},M.toISOString=function(){return this.$d.toISOString()},M.toString=function(){return this.$d.toUTCString()},P}(),B=G.prototype;return _.prototype=B,[["$ms",i],["$s",c],["$m",a],["$H",l],["$W",u],["$M",f],["$y",g],["$D",v]].forEach(function(P){B[P[1]]=function(M){return this.$g(M,P[0],P[1])}}),_.extend=function(P,M){return P.$i||(P(M,G,_),P.$i=!0),_},_.locale=z,_.isDayjs=N,_.unix=function(P){return _(1e3*P)},_.en=E[x],_.Ls=E,_.p={},_})})(Ta);var _d=Ta.exports;const Kr=oa(_d);var ka={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ia,function(){return function(n,r,s){n=n||{};var i=r.prototype,c={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(u,h,f,p){return i.fromToBase(u,h,f,p)}s.en.relativeTime=c,i.fromToBase=function(u,h,f,p,g){for(var v,b,m,y=f.$locale().relativeTime||c,S=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],C=S.length,D=0;D<C;D+=1){var x=S[D];x.d&&(v=p?s(u).diff(f,x.d,!0):f.diff(u,x.d,!0));var E=(n.rounding||Math.round)(Math.abs(v));if(m=v>0,E<=x.r||!x.r){E<=1&&D>0&&(x=S[D-1]);var w=y[x.l];g&&(E=g(""+E)),b=typeof w=="string"?w.replace("%d",E):w(E,h,x.l,m);break}}if(h)return b;var N=m?y.future:y.past;return typeof N=="function"?N(b):N.replace("%s",b)},i.to=function(u,h){return a(u,h,this,!0)},i.from=function(u,h){return a(u,h,this)};var l=function(u){return u.$u?s.utc():s()};i.toNow=function(u){return this.to(l(this),u)},i.fromNow=function(u){return this.from(l(this),u)}}})})(ka);var qd=ka.exports;const rb=oa(qd);function Fd(e){const[t,n]=d.useState(!1),r=d.useRef(),s=A(e);return d.useEffect(()=>{t&&r.current&&(s(...r.current),n(!1))},[t]),d.useCallback((...i)=>{n(!0),r.current=i},[])}function Hd(e){const[t,n]=d.useState(!1),[r,s]=d.useState(!1),[i,c]=d.useState(fs(e.track)),l=!d.useMemo(()=>Js(i,e.track),[i,e.track])&&!r,u=l&&e.valid!==!1,h=Fd(v=>{c(fs(v??e.track)),s(!1)}),f=A(async()=>{n(!0);const v=await e.onSave(i);n(!1),v!==!1&&setTimeout(h)}),p=A(()=>{e.onRevert(fs(i))}),g=A(()=>{s(!0),setTimeout(h)});return{isSaveable:u,isChanged:l,isSaving:t,track:g,save:f,revert:p}}const Qd="_resizer_d2j89_1",Wd="_root_d2j89_5",Ud="_active_d2j89_8",ms={resizer:Qd,root:Wd,active:Ud};function Oa({minSize:e,maxSize:t,onResize:n}){const[r,s]=d.useState(!1),i=d.useRef(null);return d.useEffect(()=>{const c=l=>{i.current&&(l.preventDefault(),n($l(window.innerWidth-l.clientX,e,t)))},a=()=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",a),s(!1),document.body.style.cursor=""};return i.current?.addEventListener("mousedown",l=>{l.preventDefault(),window.addEventListener("mousemove",c),window.addEventListener("mouseup",a),s(!0),document.body.style.cursor="ew-resize"}),()=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",a)}},[e,t,n]),o.jsx(ae,{ref:i,pos:"absolute",left:0,top:0,bottom:0,pr:7,className:be(ms.root,r&&ms.active),children:o.jsx(ae,{w:3,h:"100%",className:ms.resizer})})}const Bd="_savebox_le9fl_1",Vd="_savebox-left_le9fl_10",Gd="_savebox-right_le9fl_13",Kd="_savebox-center_le9fl_16",Yd="_savebox-hidden_le9fl_21",gs={savebox:Bd,saveboxLeft:Vd,saveboxRight:Gd,saveboxCenter:Kd,saveboxHidden:Yd};function Xd({handle:e,inline:t,inlineProps:n,position:r,saveText:s,revertText:i}){const c=o.jsx(pe,{rightSection:o.jsx(O,{path:or}),variant:"gradient",loading:e.isSaving,disabled:!e.isSaveable,onClick:e.save,children:s??"Save changes"}),a=o.jsx(pe,{disabled:!e.isChanged,onClick:e.revert,color:"slate",variant:"light",children:i??"Revert"});return t?o.jsxs(ne,{gap:10,align:"center",justify:"apart",...n,children:[a,c]}):o.jsx(aa,{children:o.jsx(cl,{withCloseButton:!1,className:be(gs.savebox,gs[`savebox${si(r??"center")}`],!e.isChanged&&gs.saveboxHidden),icon:o.jsx(O,{path:wn,size:"lg",mr:-8}),styles:{icon:{backgroundColor:"transparent !important",color:"var(--mantine-color-surreal-5) !important"},body:{margin:0}},children:o.jsxs(ne,{gap:10,align:"center",children:["There are unsaved changes",o.jsx(Ve,{}),a,c]})})})}function Jd(...e){const[t,n]=d.useState([]);return Tr("keydown",r=>{e.includes(r.key)&&!t.includes(r.key)&&n(s=>[...s,r.key])}),Tr("keyup",r=>{e.includes(r.key)&&t.includes(r.key)&&n(s=>s.filter(i=>i!==r.key))}),t.length>0}function sb(e,t,n){const[r,s]=d.useState(n??""),i=A(c=>{if(!r)return;if(c.key==="Enter"){const f=e.find(p=>p.id===r);t?.(f);return}const a=c.key==="ArrowDown"||c.key==="Tab"&&!c.shiftKey,l=c.key==="ArrowUp"||c.key==="Tab"&&c.shiftKey;if(!a&&!l)return;c.preventDefault(),c.stopPropagation();let u="";if(a){const f=e.findIndex(g=>g.id===r);u=(e[f+1]||e[0]).id}else if(l){const f=e.findIndex(g=>g.id===r);u=(e[f-1]||e[e.length-1]).id}s(u),document.querySelector(`[data-navigation-item-id="${u}"]`)?.scrollIntoView({block:"nearest"})});return d.useLayoutEffect(()=>{!e.find(a=>a.id===r)&&e.length>0&&s(e[0].id)}),[i,r]}const Aa=d.createContext(null);function Sr(e,t){return typeof e=="function"?e(t):e}function Zd(e){const t=d.useContext(Aa);if(!t)throw new Error("useConfirmation must be used within an ConfirmationProvider");return A(n=>{t.setConfirmation(n,e)})}const ef="Are you sure?",tf="Close",nf="Continue";function rf({children:e}){const[t,n]=d.useState(!1),[r,s]=d.useState(),[i,c]=d.useState(),a=Jd("Shift"),l=(f,p)=>{if(t)throw new Error("Confirmation already in progress");c(f),s(p),p.skippable&&a?p?.onConfirm?.(f):n(!0)},u=A(()=>{n(!1),r?.onDismiss?.()}),h=A(()=>{n(!1),r?.onConfirm?.(i)});return o.jsxs(Aa.Provider,{value:{setConfirmation:l},children:[e,o.jsxs(Gs,{opened:t,onClose:u,title:o.jsx(Qt,{children:Sr(r?.title??ef,i)}),zIndex:210,children:[o.jsx(K,{fz:"lg",children:Sr(r?.message,i)}),o.jsxs(ne,{mt:"xl",children:[o.jsx(pe,{onClick:u,variant:"light",color:"slate",...r?.dismissProps||{},children:Sr(r?.dismissText??tf,i)}),o.jsx(Ve,{}),o.jsx(pe,{color:"red",onClick:h,...r?.confirmProps,children:Sr(r?.confirmText??nf,i)})]})]})]})}function sf({onSubmit:e,children:t,...n}){const r=A(s=>{s.preventDefault(),e()});return o.jsx(ae,{component:"form",onSubmit:r,...n,children:t})}function of(e){const{history:t,setHistory:n}=e,r=t.at(-1),s=t.length>1,i=A(()=>{s&&n(t.slice(0,-1))}),c=A(l=>{if(t.length>0&&Js(r,l))return;const u=[...t,l];u.length>30&&u.shift(),n(u)}),a=A(()=>{n([])});return{current:r,canPop:s,pop:i,push:c,clear:a}}const af="_save-box_1rdnf_1",cf="_tabs_1rdnf_5",lf="_record-input_1rdnf_16",As={saveBox:af,tabs:cf,recordInput:lf};function oi(){const t=ar()?.resultFormat||"sql";return[A(r=>ut(r,t==="json",!0)),t]}function uf(e,t){const[n]=ll(e,250);return d.useMemo(()=>{try{const r=Zs(n);return t&&typeof r!="object"&&Array.isArray(r),[!0,r]}catch{return[!1,{}]}},[n,t])}const df="_root_92at4_1",ff={root:df};function Wt(e){const{value:t,state:n,onChange:r,extensions:s,className:i,readOnly:c,autoFocus:a,lineNumbers:l,serialize:u,onMount:h,...f}=e,p=_l(),g=Le(w=>w.settings.appearance.syntaxTheme),v=d.useRef(null),b=d.useRef(),m=d.useRef(!1),[y]=_t("appearance","editorScale"),S=Math.floor(15*(y/100)),C=d.useRef(new Ns),D=d.useRef(new Ns),x=A(w=>{r?.(w.state.doc.toString(),w.state.toJSON(u))}),E=d.useMemo(()=>[ql(),Il({newGroupDelay:250}),on.readOnly.of(!!c),Fl(p,g),l?Tl():[],sn.updateListener.of(w=>{(w.docChanged||w.selectionSet)&&x(w)})],[c,p,g,l]);return d.useEffect(()=>{if(!v.current)return;const w=new sn({parent:v.current,scrollTo:sn.scrollIntoView(0),state:on.create()});return b.current=w,()=>{w.destroy()}},[]),d.useEffect(()=>{if(!b.current)return;const w=b.current,N=w.state.toJSON(u);if(m.current&&Js(N,n))return;const z=[C.current.of(E),D.current.of(s??[])],_=n?on.fromJSON(n,{extensions:z},u):on.create({extensions:z});w.setState(_),Hi(w)},[n]),d.useEffect(()=>{if(!b.current)return;const w=b.current;if(t===w.state.doc.toString())return;const N=w.state.update({changes:{from:0,to:w.state.doc.length,insert:t},effects:[sn.scrollIntoView(0)]});w.dispatch(N),Hi(w)},[t]),d.useEffect(()=>{b.current?.dispatch({effects:C.current?.reconfigure(E)})},[E]),d.useEffect(()=>{b.current?.dispatch({effects:D.current?.reconfigure(s??[])})},[s]),d.useEffect(()=>{if(!b.current)return;const w=b.current;if(a){const N=setInterval(()=>{w.focus(),w.hasFocus&&clearInterval(N)},50)}},[a]),d.useEffect(()=>{if(!b.current||m.current)return;const w=b.current;h?.(w),m.current=!0},[h]),o.jsx(ae,{ref:v,className:be(ff.root,i),fz:S,...f})}function hf({value:e,error:t,onChange:n,saveHandle:r}){const{inspect:s}=Ut(),[i]=_t("appearance","inspectorLineNumbers");return o.jsxs(o.Fragment,{children:[t&&o.jsx(ul,{icon:o.jsx(O,{path:Gr}),color:"red.5",style:{whiteSpace:"pre-wrap"},children:t}),o.jsx(Ft,{flex:"1 0 0",mih:0,p:"xs",children:o.jsx(Wt,{h:"100%",value:e,onChange:n,lineNumbers:i,extensions:[Lt(),ei(),cr(s)]})}),r.isChanged&&o.jsx(Xd,{handle:r,inline:!0,inlineProps:{className:As.saveBox}})]})}function za({value:e,withOpen:t,...n}){const{inspect:r}=Ut(),s=ut(e),i=A(c=>{c.stopPropagation(),t!==!1&&r(e)});return o.jsxs(ne,{...n,wrap:"nowrap",c:"surreal.5",gap:0,onClick:i,style:{cursor:t!==!1?"pointer":void 0},children:[o.jsx(K,{ff:"JetBrains Mono",fw:600,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:300},children:s}),t!==!1&&o.jsx(O,{path:da,right:!0})]})}function Zi({name:e,relations:t}){const n=st();return o.jsxs(Ft,{p:"xs",bg:n?"slate.0":"slate.9",mt:6,children:[t.length===0&&o.jsxs(K,{pl:6,c:"dimmed",children:["No ",e," relations found"]}),t.map((r,s)=>o.jsxs(ne,{gap:"xs",wrap:"nowrap",children:[o.jsx(O,{path:Hl,size:"lg"}),o.jsx(za,{value:r})]},r.toString()))]})}function pf({inputs:e,outputs:t}){return o.jsxs(Ht,{flex:"1 0 0",children:[o.jsx(K,{c:"bright",size:"lg",fw:600,mt:4,children:"Incoming relations"}),o.jsx(Zi,{name:"incoming",relations:e}),o.jsx(K,{c:"bright",size:"lg",fw:600,mt:"xl",children:"Outgoing relations"}),o.jsx(Zi,{name:"outgoing",relations:t})]})}const mf={isEdge:!1,exists:!1,initial:"",inputs:[],outputs:[]};function gf({opened:e,history:t,onClose:n,onRefresh:r}){const[s,i]=d.useState(mf),[c,a]=ct(""),[l,u]=d.useState(""),[h,f]=d.useState(""),[p,g]=uf(l),v=st(),b=s.exists?void 0:"var(--mantine-color-red-6)",m=Hd({valid:p,track:{recordBody:l},onRevert(w){u(w.recordBody),f("")},onSave:async()=>{const w=t.current,[{success:N,result:z}]=await Qn("UPDATE $id CONTENT $body",{id:w,body:g});if(!N)return f(z.replace("There was a problem with the database: ","")),!1;r(),n()}}),y=A(async w=>{const N="SELECT * FROM ONLY $id",z="SELECT VALUE <-? FROM ONLY $id",_="SELECT VALUE ->? FROM ONLY $id",[{result:k},{result:G},{result:B}]=await Qn(`${N};${z};${_}`,{id:w}),P=ut(k,!1,!0);f(""),a(ut(w)),i({isEdge:!!k?.in&&!!k?.out,exists:!!k,initial:P,inputs:G,outputs:B}),k&&u(P),m.track()}),S=A(()=>{t.current&&y(t.current)}),C=A(()=>{const w=Zs(c);w instanceof _r&&t.push(w)}),D=Zd({message:"You are about to delete this record. This action cannot be undone.",confirmText:"Delete",onConfirm:async()=>{await Qn(`DELETE ${ut(t.current)}`),t.clear(),r(),n()}});d.useEffect(()=>{t.current&&y(t.current)},[t.current]);const[x,E]=d.useState(650);return o.jsxs(Vr,{opened:e,onClose:n,position:"right",trapFocus:!1,size:x,styles:{body:{height:"100%",display:"flex",flexDirection:"column"}},children:[o.jsx(Oa,{minSize:500,maxSize:1500,onResize:E}),o.jsxs(ne,{mb:"md",gap:"sm",children:[o.jsxs(Qt,{children:[o.jsx(O,{left:!0,path:Sn,size:"sm"}),"Record inspector"]}),o.jsx(Ve,{}),o.jsxs(ne,{align:"center",children:[t.canPop&&o.jsx(Ee,{label:"Go back",children:o.jsx(fe,{onClick:t.pop,"aria-label":"Go back in history",children:o.jsx(O,{path:Ql})})}),o.jsx(Ee,{label:"Delete record",children:o.jsx(fe,{disabled:!s.exists,onClick:D,color:"pink.7","aria-label":"Delete record",children:o.jsx(O,{path:Dn})})}),o.jsx(Ee,{label:"Refetch from database",children:o.jsx(fe,{onClick:S,"aria-label":"Refetch record",children:o.jsx(O,{path:Is})})}),o.jsx(fe,{onClick:n,"aria-label":"Close inspector drawer",children:o.jsx(O,{path:rt})})]})]}),o.jsx(fa,{mb:"xs",value:c,onBlur:C,onSubmit:C,onChange:a,variant:"filled",rightSectionWidth:76,classNames:{input:As.recordInput},styles:{input:{color:b,borderColor:b}},rightSection:s.isEdge&&o.jsx(Ft,{title:"This record is an edge",bg:"slate",c:"bright",px:"xs",children:"Edge"})}),s.exists?o.jsxs(Jt,{mt:"sm",defaultValue:"content",className:As.tabs,variant:"pills",radius:"sm",children:[o.jsxs(Jt.List,{grow:!0,children:[o.jsxs(Jt.Tab,{value:"content",children:["Content",o.jsx(O,{path:Wl,size:.85,right:!0})]}),o.jsxs(Jt.Tab,{value:"relations",children:["Relations",o.jsx(O,{path:ha,size:.85,right:!0})]})]}),o.jsx(Jt.Panel,{value:"content",children:o.jsx(hf,{value:l,error:h,saveHandle:m,onChange:u})}),o.jsx(Jt.Panel,{value:"relations",children:o.jsx(pf,{isLight:v,inputs:s.inputs,outputs:s.outputs})})]}):o.jsx(Ks,{my:"xl",children:o.jsx(K,{children:"Record not found in database"})})]})}const $a=d.createContext(null);function Ut(){return d.useContext($a)??{history:[],inspect:()=>{},stopInspect:()=>{}}}function ib({children:e}){const[t,n]=d.useState([]),[r,s]=Hn(),i=of({history:t,setHistory:n}),c=A(u=>{const h=typeof u=="string"?Zs(u):new _r(u.tb,u.id);if(!(h instanceof _r))throw new TypeError("Invalid record id");s.open(),r?i.push(h):n([h]),Xs.capture("open_record_inspector")}),a=A(()=>{s.close()}),l=A(()=>{Ul.dispatch(null)});return o.jsxs($a.Provider,{value:{history:i,inspect:c,stopInspect:a},children:[e,o.jsx(gf,{opened:r,history:i,onClose:s.close,onRefresh:l})]})}var _a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ai="html",ci="svg",vf="http://www.w3.org/2000/svg",bf=function(e,t){var n,r,s,i=(n=e.ownerDocument)!==null&&n!==void 0?n:document,c=(s=(r=i.defaultView)!==null&&r!==void 0?r:i.parentWindow)!==null&&s!==void 0?s:window;if(t===ai)return e instanceof c.HTMLElement;if(t===ci)return e instanceof c.SVGElement;throw new Error('Unrecognized element type "'.concat(t,'" for validateElementType.'))},qa=function(e,t){var n={},r,s,i;if(e===ai)i=document.createElement("div");else if(e===ci)i=document.createElementNS(vf,"g");else throw new Error('Invalid element type "'.concat(e,'" for createPortalNode: must be "html" or "svg".'));if(t&&typeof t=="object")for(var c=0,a=Object.entries(t.attributes);c<a.length;c++){var l=a[c],u=l[0],h=l[1];i.setAttribute(u,h)}var f={element:i,elementType:e,setPortalProps:function(p){n=p},getInitialPortalProps:function(){return n},mount:function(p,g){if(g!==s){if(f.unmount(),p!==r&&!bf(p,e))throw new Error('Invalid element type for portal: "'.concat(e,'" portalNodes must be used with ').concat(e," elements, but OutPortal is within <").concat(p.tagName,">."));p.replaceChild(f.element,g),r=p,s=g}},unmount:function(p){p&&p!==s||r&&s&&(r.replaceChild(s,f.element),r=void 0,s=void 0)}};return f},yf=function(e){_a(t,e);function t(n){var r=e.call(this,n)||this;return r.addPropsChannel=function(){Object.assign(r.props.node,{setPortalProps:function(s){r.setState({nodeProps:s})}})},r.state={nodeProps:r.props.node.getInitialPortalProps()},r}return t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var n=this,r=this.props,s=r.children,i=r.node;return Nt.createPortal(d.Children.map(s,function(c){return d.isValidElement(c)?d.cloneElement(c,n.state.nodeProps):c}),i.element)},t}(d.PureComponent),Fa=function(e){_a(t,e);function t(n){var r=e.call(this,n)||this;return r.placeholderNode=d.createRef(),r.passPropsThroughPortal(),r}return t.prototype.passPropsThroughPortal=function(){var n=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(n)},t.prototype.componentDidMount=function(){var n=this.props.node;this.currentPortalNode=n;var r=this.placeholderNode.current,s=r.parentNode;n.mount(s,r),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var n=this.props.node;this.currentPortalNode&&n!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode.setPortalProps({}),this.currentPortalNode=n);var r=this.placeholderNode.current,s=r.parentNode;n.mount(s,r),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){var n=this.props.node;n.unmount(this.placeholderNode.current),n.setPortalProps({})},t.prototype.render=function(){return d.createElement("div",{ref:this.placeholderNode})},t}(d.PureComponent),xf=qa.bind(null,ai);qa.bind(null,ci);function wf(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,s,i,c=[],a="",l=e.split("/");for(l[0]||l.shift();s=l.shift();)n=s[0],n==="*"?(c.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),c.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:c,pattern:new RegExp("^"+a+(t?"(?=$|/)":"/?$"),"i")}}const Sf=Vs.useInsertionEffect,Cf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ha=Cf?d.useLayoutEffect:d.useEffect,Ef=Sf||Ha,li=e=>{const t=d.useRef([e,(...n)=>t[0](...n)]).current;return Ef(()=>{t[0]=e}),t[1]},jf="popstate",ui="pushState",di="replaceState",Lf="hashchange",eo=[jf,ui,di,Lf],Df=e=>{for(const t of eo)addEventListener(t,e);return()=>{for(const t of eo)removeEventListener(t,e)}},Qa=(e,t)=>Bl.useSyncExternalStore(Df,e,t),Mf=()=>location.search,Rf=({ssrSearch:e=""}={})=>Qa(Mf,()=>e),to=()=>location.pathname,Pf=({ssrPath:e}={})=>Qa(to,e?()=>e:to),Nf=(e,{replace:t=!1,state:n=null}={})=>history[t?di:ui](n,"",e),If=(e={})=>[Pf(e),Nf],no=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[no]>"u"){for(const e of[ui,di]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,no,{value:!0})}const Tf=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",Wa=(e="")=>e==="/"?"":e,kf=(e,t)=>e[0]==="~"?e.slice(1):Wa(t)+e,Of=(e="",t)=>Tf(zs(Wa(e)),zs(t)),Af=e=>e[0]==="?"?e.slice(1):e,zs=e=>{try{return decodeURI(e)}catch{return e}},zf=e=>zs(Af(e)),Ua={hook:If,searchHook:Rf,parser:wf,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},Ba=d.createContext(Ua),Bt=()=>d.useContext(Ba),Va={},Ga=d.createContext(Va),$f=()=>d.useContext(Ga),Yr=e=>{const[t,n]=e.hook(e);return[Of(e.base,t),li((r,s)=>n(kf(r,e.base),s))]},ur=()=>Yr(Bt()),_f=()=>{const e=Bt();return zf(e.searchHook(e))},fi=(e,t,n,r)=>{const{pattern:s,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),c=s.exec(n)||[],[a,...l]=c;return a!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,p)=>[f,l[p]])):c.groups;let h={...l};return u&&Object.assign(h,u),h})(),...r?[a]:[]]:[!1,null]},ob=e=>fi(Bt().parser,e,ur()[0]),qf=({children:e,...t})=>{const n=Bt(),r=t.hook?Ua:n;let s=r;const[i,c]=t.ssrPath?.split("?")??[];c&&(t.ssrSearch=c,t.ssrPath=i),t.hrefs=t.hrefs??t.hook?.hrefs;let a=d.useRef({}),l=a.current,u=l;for(let h in r){const f=h==="base"?r[h]+(t[h]||""):t[h]||r[h];l===u&&f!==u[h]&&(a.current=u={...u}),u[h]=f,f!==r[h]&&(s=u)}return d.createElement(Ba.Provider,{value:s,children:e})},ro=({children:e,component:t},n)=>t?d.createElement(t,{params:n}):typeof e=="function"?e(n):e,Ff=e=>{let t=d.useRef(Va),n=t.current;for(const r in e)e[r]!==n[r]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},ab=({path:e,nest:t,match:n,...r})=>{const s=Bt(),[i]=Yr(s),[c,a,l]=n??fi(s.parser,e,i,t),u=Ff({...$f(),...a});if(!c)return null;const h=l?d.createElement(qf,{base:l},ro(r,u)):ro(r,u);return d.createElement(Ga.Provider,{value:u,children:h})};d.forwardRef((e,t)=>{const n=Bt(),[r,s]=Yr(n),{to:i="",href:c=i,onClick:a,asChild:l,children:u,className:h,replace:f,state:p,...g}=e,v=li(m=>{m.ctrlKey||m.metaKey||m.altKey||m.shiftKey||m.button!==0||(a?.(m),m.defaultPrevented||(m.preventDefault(),s(c,e)))}),b=n.hrefs(c[0]==="~"?c.slice(1):n.base+c,n);return l&&d.isValidElement(u)?d.cloneElement(u,{onClick:v,href:b}):d.createElement("a",{...g,onClick:v,href:b,className:h?.call?h(r===c):h,children:u,ref:t})});const Ka=e=>Array.isArray(e)?e.flatMap(t=>Ka(t&&t.type===d.Fragment?t.props.children:t)):[e],cb=({children:e,location:t})=>{const n=Bt(),[r]=Yr(n);for(const s of Ka(e)){let i=0;if(d.isValidElement(s)&&(i=fi(n.parser,s.props.path,t||r,s.props.nest))[0])return d.cloneElement(s,{match:i})}return null},lb=e=>{const{to:t,href:n=t}=e,[,r]=ur(),s=li(()=>r(t||n,e));return Ha(()=>{s()},[]),null},Hf="_root_37t9c_1",Qf="_underline_37t9c_6",so={root:Hf,underline:Qf},Wf=d.forwardRef(({href:e,underline:t,children:n,span:r,className:s,...i},c)=>o.jsx(K,{onClick:()=>le.openUrl(e),className:be(so.root,t!==!1&&so.underline,s),span:r??!0,role:"link",ref:c,...i,children:n})),Uf=d.createContext(null),vs={didCatch:!1,error:null};class Bf extends d.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=vs}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var n,r,s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:i,reason:"imperative-api"}),this.setState(vs)}}componentDidCatch(t,n){var r,s;(r=(s=this.props).onError)===null||r===void 0||r.call(s,t,n)}componentDidUpdate(t,n){const{didCatch:r}=this.state,{resetKeys:s}=this.props;if(r&&n.error!==null&&Vf(t.resetKeys,s)){var i,c;(i=(c=this.props).onReset)===null||i===void 0||i.call(c,{next:s,prev:t.resetKeys,reason:"keys"}),this.setState(vs)}}render(){const{children:t,fallbackRender:n,FallbackComponent:r,fallback:s}=this.props,{didCatch:i,error:c}=this.state;let a=t;if(i){const l={error:c,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")a=n(l);else if(r)a=d.createElement(r,l);else if(s!==void 0)a=s;else throw c}return d.createElement(Uf.Provider,{value:{didCatch:i,error:c,resetErrorBoundary:this.resetErrorBoundary}},a)}}function Vf(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((n,r)=>!Object.is(n,t[r]))}function Ya(){const[e,t]=ur(),n=Object.values(ma).find(s=>e.startsWith(`/${s.id}`)),r=A(s=>{t(`/${s}`)});return[n,r]}function Gf(){const[e,t]=ur(),n=Object.values(Gl).find(s=>e.startsWith(`/cloud/${s.id}`)),r=A(s=>{t(`/cloud/${s}`)});return[n,r]}function ot(e,t){const n=A(()=>{for(let r=Qi(e);r;r=Qi(e))t(r.payload||{})});d.useEffect(()=>n(),[]),pa(Vl,n)}function ub(){const e=_f();return d.useMemo(()=>Object.fromEntries(new URLSearchParams(e)),[e])}function db(e,t,n=[]){const[r]=Ya(),s=A(t);d.useEffect(()=>{r?.id===e&&s()},[r,e,...n])}function fb(e,t,n=[]){const[r]=Gf(),s=A(t);d.useLayoutEffect(()=>{r?.id===e&&s()},[r,e,...n])}var Xr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jr=typeof window>"u"||"Deno"in globalThis;function We(){}function Kf(e,t){return typeof e=="function"?e(t):e}function Yf(e){return typeof e=="number"&&e>=0&&e!==1/0}function Xf(e,t){return Math.max(e+(t||0)-Date.now(),0)}function io(e,t){return typeof e=="function"?e(t):e}function Jf(e,t){return typeof e=="function"?e(t):e}function oo(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:c,stale:a}=e;if(c){if(r){if(t.queryHash!==hi(c,t.options))return!1}else if(!Kn(t.queryKey,c))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||s&&s!==t.state.fetchStatus||i&&!i(t))}function ao(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Gn(t.options.mutationKey)!==Gn(i))return!1}else if(!Kn(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function hi(e,t){return(t?.queryKeyHashFn||Gn)(e)}function Gn(e){return JSON.stringify(e,(t,n)=>$s(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Kn(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Kn(e[n],t[n])):!1}function Xa(e,t){if(e===t)return e;const n=co(e)&&co(t);if(n||$s(e)&&$s(t)){const r=n?e:Object.keys(e),s=r.length,i=n?t:Object.keys(t),c=i.length,a=n?[]:{};let l=0;for(let u=0;u<c;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&e[h]===void 0&&t[h]===void 0?(a[h]=void 0,l++):(a[h]=Xa(e[h],t[h]),a[h]===e[h]&&e[h]!==void 0&&l++)}return s===c&&l===s?e:a}return t}function hb(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function co(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function $s(e){if(!lo(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!lo(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function lo(e){return Object.prototype.toString.call(e)==="[object Object]"}function Zf(e){return new Promise(t=>{setTimeout(t,e)})}function eh(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Xa(e,t):t}function pb(e){return e}function th(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function nh(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var pi=Symbol();function Ja(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===pi?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Tt,bt,fn,Xo,rh=(Xo=class extends Xr{constructor(){super();ie(this,Tt);ie(this,bt);ie(this,fn);ee(this,fn,t=>{if(!Jr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){j(this,bt)||this.setEventListener(j(this,fn))}onUnsubscribe(){var t;this.hasListeners()||((t=j(this,bt))==null||t.call(this),ee(this,bt,void 0))}setEventListener(t){var n;ee(this,fn,t),(n=j(this,bt))==null||n.call(this),ee(this,bt,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){j(this,Tt)!==t&&(ee(this,Tt,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){return typeof j(this,Tt)=="boolean"?j(this,Tt):globalThis.document?.visibilityState!=="hidden"}},Tt=new WeakMap,bt=new WeakMap,fn=new WeakMap,Xo),Za=new rh,hn,yt,pn,Jo,sh=(Jo=class extends Xr{constructor(){super();ie(this,hn,!0);ie(this,yt);ie(this,pn);ee(this,pn,t=>{if(!Jr&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){j(this,yt)||this.setEventListener(j(this,pn))}onUnsubscribe(){var t;this.hasListeners()||((t=j(this,yt))==null||t.call(this),ee(this,yt,void 0))}setEventListener(t){var n;ee(this,pn,t),(n=j(this,yt))==null||n.call(this),ee(this,yt,t(this.setOnline.bind(this)))}setOnline(t){j(this,hn)!==t&&(ee(this,hn,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return j(this,hn)}},hn=new WeakMap,yt=new WeakMap,pn=new WeakMap,Jo),qr=new sh;function ih(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function oh(e){return Math.min(1e3*2**e,3e4)}function ec(e){return(e??"online")==="online"?qr.isOnline():!0}var tc=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function bs(e){return e instanceof tc}function nc(e){let t=!1,n=0,r=!1,s;const i=ih(),c=b=>{r||(p(new tc(b)),e.abort?.())},a=()=>{t=!0},l=()=>{t=!1},u=()=>Za.isFocused()&&(e.networkMode==="always"||qr.isOnline())&&e.canRun(),h=()=>ec(e.networkMode)&&e.canRun(),f=b=>{r||(r=!0,e.onSuccess?.(b),s?.(),i.resolve(b))},p=b=>{r||(r=!0,e.onError?.(b),s?.(),i.reject(b))},g=()=>new Promise(b=>{s=m=>{(r||u())&&b(m)},e.onPause?.()}).then(()=>{s=void 0,r||e.onContinue?.()}),v=()=>{if(r)return;let b;const m=n===0?e.initialPromise:void 0;try{b=m??e.fn()}catch(y){b=Promise.reject(y)}Promise.resolve(b).then(f).catch(y=>{if(r)return;const S=e.retry??(Jr?0:3),C=e.retryDelay??oh,D=typeof C=="function"?C(n,y):C,x=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,y);if(t||!x){p(y);return}n++,e.onFail?.(n,y),Zf(D).then(()=>u()?void 0:g()).then(()=>{t?p(y):v()})})};return{promise:i,cancel:c,continue:()=>(s?.(),i),cancelRetry:a,continueRetry:l,canStart:h,start:()=>(h()?v():g().then(v),i)}}function ah(){let e=[],t=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{t?e.push(a):s(()=>{n(a)})},c=()=>{const a=e;e=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||c()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Ce=ah(),kt,Zo,rc=(Zo=class{constructor(){ie(this,kt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Yf(this.gcTime)&&ee(this,kt,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Jr?1/0:5*60*1e3))}clearGcTimeout(){j(this,kt)&&(clearTimeout(j(this,kt)),ee(this,kt,void 0))}},kt=new WeakMap,Zo),mn,gn,$e,xe,nr,Ot,Ue,it,ea,ch=(ea=class extends rc{constructor(n){super();ie(this,Ue);ie(this,mn);ie(this,gn);ie(this,$e);ie(this,xe);ie(this,nr);ie(this,Ot);ee(this,Ot,!1),ee(this,nr,n.defaultOptions),this.setOptions(n.options),this.observers=[],ee(this,$e,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,ee(this,mn,uh(this.options)),this.state=n.state??j(this,mn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){return j(this,xe)?.promise}setOptions(n){this.options={...j(this,nr),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&j(this,$e).remove(this)}setData(n,r){const s=eh(this.state.data,n,this.options);return ye(this,Ue,it).call(this,{data:s,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),s}setState(n,r){ye(this,Ue,it).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){const r=j(this,xe)?.promise;return j(this,xe)?.cancel(n),r?r.then(We).catch(We):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(j(this,mn))}isActive(){return this.observers.some(n=>Jf(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===pi||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!Xf(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),j(this,xe)?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),j(this,xe)?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),j(this,$e).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(j(this,xe)&&(j(this,Ot)?j(this,xe).cancel({revert:!0}):j(this,xe).cancelRetry()),this.scheduleGc()),j(this,$e).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ye(this,Ue,it).call(this,{type:"invalidate"})}fetch(n,r){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(j(this,xe))return j(this,xe).continueRetry(),j(this,xe).promise}if(n&&this.setOptions(n),!this.options.queryFn){const u=this.observers.find(h=>h.options.queryFn);u&&this.setOptions(u.options)}const s=new AbortController,i=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(ee(this,Ot,!0),s.signal)})},c=()=>{const u=Ja(this.options,r),h={queryKey:this.queryKey,meta:this.meta};return i(h),ee(this,Ot,!1),this.options.persister?this.options.persister(u,h,this):u(h)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:c};i(a),this.options.behavior?.onFetch(a,this),ee(this,gn,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&ye(this,Ue,it).call(this,{type:"fetch",meta:a.fetchOptions?.meta});const l=u=>{bs(u)&&u.silent||ye(this,Ue,it).call(this,{type:"error",error:u}),bs(u)||(j(this,$e).config.onError?.(u,this),j(this,$e).config.onSettled?.(this.state.data,u,this)),this.scheduleGc()};return ee(this,xe,nc({initialPromise:r?.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:u=>{if(u===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(h){l(h);return}j(this,$e).config.onSuccess?.(u,this),j(this,$e).config.onSettled?.(u,this.state.error,this),this.scheduleGc()},onError:l,onFail:(u,h)=>{ye(this,Ue,it).call(this,{type:"failed",failureCount:u,error:h})},onPause:()=>{ye(this,Ue,it).call(this,{type:"pause"})},onContinue:()=>{ye(this,Ue,it).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),j(this,xe).start()}},mn=new WeakMap,gn=new WeakMap,$e=new WeakMap,xe=new WeakMap,nr=new WeakMap,Ot=new WeakMap,Ue=new WeakSet,it=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...lh(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return bs(i)&&i.revert&&j(this,gn)?{...j(this,gn),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Ce.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),j(this,$e).notify({query:this,type:"updated",action:n})})},ea);function lh(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ec(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function uh(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var et,ta,dh=(ta=class extends Xr{constructor(t={}){super();ie(this,et);this.config=t,ee(this,et,new Map)}build(t,n,r){const s=n.queryKey,i=n.queryHash??hi(s,n);let c=this.get(i);return c||(c=new ch({cache:this,queryKey:s,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(c)),c}add(t){j(this,et).has(t.queryHash)||(j(this,et).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=j(this,et).get(t.queryHash);n&&(t.destroy(),n===t&&j(this,et).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ce.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return j(this,et).get(t)}getAll(){return[...j(this,et).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>oo(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>oo(t,r)):n}notify(t){Ce.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ce.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ce.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},et=new WeakMap,ta),tt,Se,At,nt,mt,na,fh=(na=class extends rc{constructor(t){super();ie(this,nt);ie(this,tt);ie(this,Se);ie(this,At);this.mutationId=t.mutationId,ee(this,Se,t.mutationCache),ee(this,tt,[]),this.state=t.state||hh(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){j(this,tt).includes(t)||(j(this,tt).push(t),this.clearGcTimeout(),j(this,Se).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ee(this,tt,j(this,tt).filter(n=>n!==t)),this.scheduleGc(),j(this,Se).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){j(this,tt).length||(this.state.status==="pending"?this.scheduleGc():j(this,Se).remove(this))}continue(){return j(this,At)?.continue()??this.execute(this.state.variables)}async execute(t){ee(this,At,nc({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(s,i)=>{ye(this,nt,mt).call(this,{type:"failed",failureCount:s,error:i})},onPause:()=>{ye(this,nt,mt).call(this,{type:"pause"})},onContinue:()=>{ye(this,nt,mt).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>j(this,Se).canRun(this)}));const n=this.state.status==="pending",r=!j(this,At).canStart();try{if(!n){ye(this,nt,mt).call(this,{type:"pending",variables:t,isPaused:r}),await j(this,Se).config.onMutate?.(t,this);const i=await this.options.onMutate?.(t);i!==this.state.context&&ye(this,nt,mt).call(this,{type:"pending",context:i,variables:t,isPaused:r})}const s=await j(this,At).start();return await j(this,Se).config.onSuccess?.(s,t,this.state.context,this),await this.options.onSuccess?.(s,t,this.state.context),await j(this,Se).config.onSettled?.(s,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(s,null,t,this.state.context),ye(this,nt,mt).call(this,{type:"success",data:s}),s}catch(s){try{throw await j(this,Se).config.onError?.(s,t,this.state.context,this),await this.options.onError?.(s,t,this.state.context),await j(this,Se).config.onSettled?.(void 0,s,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,s,t,this.state.context),s}finally{ye(this,nt,mt).call(this,{type:"error",error:s})}}finally{j(this,Se).runNext(this)}}},tt=new WeakMap,Se=new WeakMap,At=new WeakMap,nt=new WeakSet,mt=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ce.batch(()=>{j(this,tt).forEach(r=>{r.onMutationUpdate(t)}),j(this,Se).notify({mutation:this,type:"updated",action:t})})},na);function hh(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Te,rr,ra,ph=(ra=class extends Xr{constructor(t={}){super();ie(this,Te);ie(this,rr);this.config=t,ee(this,Te,new Map),ee(this,rr,Date.now())}build(t,n,r){const s=new fh({mutationCache:this,mutationId:++br(this,rr)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){const n=Cr(t),r=j(this,Te).get(n)??[];r.push(t),j(this,Te).set(n,r),this.notify({type:"added",mutation:t})}remove(t){const n=Cr(t);if(j(this,Te).has(n)){const r=j(this,Te).get(n)?.filter(s=>s!==t);r&&(r.length===0?j(this,Te).delete(n):j(this,Te).set(n,r))}this.notify({type:"removed",mutation:t})}canRun(t){const n=j(this,Te).get(Cr(t))?.find(r=>r.state.status==="pending");return!n||n===t}runNext(t){return j(this,Te).get(Cr(t))?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve()}clear(){Ce.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...j(this,Te).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>ao(n,r))}findAll(t={}){return this.getAll().filter(n=>ao(t,n))}notify(t){Ce.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ce.batch(()=>Promise.all(t.map(n=>n.continue().catch(We))))}},Te=new WeakMap,rr=new WeakMap,ra);function Cr(e){return e.options.scope?.id??String(e.mutationId)}function uo(e){return{onFetch:(t,n)=>{const r=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],c=t.state.data?.pageParams||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let h=!1;const f=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(t.signal.aborted?h=!0:t.signal.addEventListener("abort",()=>{h=!0}),t.signal)})},p=Ja(t.options,t.fetchOptions),g=async(v,b,m)=>{if(h)return Promise.reject();if(b==null&&v.pages.length)return Promise.resolve(v);const y={queryKey:t.queryKey,pageParam:b,direction:m?"backward":"forward",meta:t.options.meta};f(y);const S=await p(y),{maxPages:C}=t.options,D=m?nh:th;return{pages:D(v.pages,S,C),pageParams:D(v.pageParams,b,C)}};if(s&&i.length){const v=s==="backward",b=v?mh:fo,m={pages:i,pageParams:c},y=b(r,m);a=await g(m,y,v)}else{const v=e??i.length;do{const b=l===0?c[0]??r.initialPageParam:fo(r,a);if(l>0&&b==null)break;a=await g(a,b),l++}while(l<v)}return a};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=u}}}function fo(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function mh(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var ue,xt,wt,vn,bn,St,yn,xn,sa,gh=(sa=class{constructor(e={}){ie(this,ue);ie(this,xt);ie(this,wt);ie(this,vn);ie(this,bn);ie(this,St);ie(this,yn);ie(this,xn);ee(this,ue,e.queryCache||new dh),ee(this,xt,e.mutationCache||new ph),ee(this,wt,e.defaultOptions||{}),ee(this,vn,new Map),ee(this,bn,new Map),ee(this,St,0)}mount(){br(this,St)._++,j(this,St)===1&&(ee(this,yn,Za.subscribe(async e=>{e&&(await this.resumePausedMutations(),j(this,ue).onFocus())})),ee(this,xn,qr.subscribe(async e=>{e&&(await this.resumePausedMutations(),j(this,ue).onOnline())})))}unmount(){var e,t;br(this,St)._--,j(this,St)===0&&((e=j(this,yn))==null||e.call(this),ee(this,yn,void 0),(t=j(this,xn))==null||t.call(this),ee(this,xn,void 0))}isFetching(e){return j(this,ue).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return j(this,xt).findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return j(this,ue).get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=j(this,ue).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(io(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return j(this,ue).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=j(this,ue).get(r.queryHash)?.state.data,c=Kf(t,i);if(c!==void 0)return j(this,ue).build(this,r).setData(c,{...n,manual:!0})}setQueriesData(e,t,n){return Ce.batch(()=>j(this,ue).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return j(this,ue).get(t.queryHash)?.state}removeQueries(e){const t=j(this,ue);Ce.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=j(this,ue),r={type:"active",...e};return Ce.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Ce.batch(()=>j(this,ue).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(We).catch(We)}invalidateQueries(e={},t={}){return Ce.batch(()=>{if(j(this,ue).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:t?.cancelRefetch??!0},r=Ce.batch(()=>j(this,ue).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(We)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(We)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=j(this,ue).build(this,t);return n.isStaleByTime(io(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(We).catch(We)}fetchInfiniteQuery(e){return e.behavior=uo(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(We).catch(We)}ensureInfiniteQueryData(e){return e.behavior=uo(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return qr.isOnline()?j(this,xt).resumePausedMutations():Promise.resolve()}getQueryCache(){return j(this,ue)}getMutationCache(){return j(this,xt)}getDefaultOptions(){return j(this,wt)}setDefaultOptions(e){ee(this,wt,e)}setQueryDefaults(e,t){j(this,vn).set(Gn(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...j(this,vn).values()];let n={};return t.forEach(r=>{Kn(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){j(this,bn).set(Gn(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...j(this,bn).values()];let n={};return t.forEach(r=>{Kn(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...j(this,wt).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=hi(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===pi&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...j(this,wt).mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){j(this,ue).clear(),j(this,xt).clear()}},ue=new WeakMap,xt=new WeakMap,wt=new WeakMap,vn=new WeakMap,bn=new WeakMap,St=new WeakMap,yn=new WeakMap,xn=new WeakMap,sa),sc=d.createContext(void 0),gb=e=>{const t=d.useContext(sc);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},vh=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(sc.Provider,{value:e,children:t}));function bh({className:e,children:t,...n}){return o.jsx(K,{className:be("mantine-InputWrapper-label",e),...n,children:t})}function _s({label:e,tooltipProps:t,...n}){return o.jsx(Ee,{label:e,...t,children:o.jsx(fe,{...n,"aria-label":e,children:n.children})})}const yh="_root_ri7gu_1",xh="_active_ri7gu_26",ho={root:yh,active:xh},qs=dl(d.forwardRef((e,t)=>{const n=st(),{isActive:r,children:s,className:i,...c}=e;return o.jsx(pe,{ref:t,fullWidth:!0,miw:0,h:40,px:8,color:n?"slate.0":"slate.7",...c,variant:r?"gradient":c.variant||"subtle",className:be(ho.root,r&&ho.active,i),children:s})})),wh="/assets/icon-BCaSNKWz.webp";function Sh(){const[e,t]=d.useState(!1),n=d.useMemo(()=>Object.entries(Wi).map(([s,i])=>({value:s,label:i.name})),[]),r=A(async s=>{const i=Wi[s];if(!i)throw new Error("Dataset not found");t(!0);try{const c=Kl(s),a=await fetch(c).then(l=>l.text());await Ed(50),await Qn(a),await ga(),Yl({title:"Dataset loaded",subtitle:`${i.name} has been applied`})}finally{t(!1)}});return[n,r,e]}async function Ch(){try{const{nodes:e}=await Xl("INFO FOR ROOT STRUCTURE"),t=e.length===1;Jl({title:o.jsx(Qt,{children:"Node status"}),withCloseButton:!0,styles:{header:{paddingBottom:0}},size:"lg",children:o.jsxs(je,{children:[o.jsxs(K,{children:["There ",t?"is":"are"," ",e.length," node",t?"":"s"," ","registered in the current cluster"]}),o.jsx(je,{mt:"md",children:e.map(n=>o.jsx(Ft,{bg:"slate.7",p:"md",children:o.jsxs(ne,{children:[o.jsx(O,{color:n.active?"green":"red",path:va,size:"xl"}),o.jsxs(ae,{children:[o.jsxs(K,{c:"bright",ff:"monospace",children:["Node ID:"," ",o.jsx(K,{span:!0,style:{userSelect:"text",WebkitUserSelect:"text"},children:n.id.toString()})]}),o.jsxs(K,{children:[n.active?"Online":"Offline"," - Last seen"," ",Kr(n.seen).fromNow()]})]})]})},n.id.toString()))})]})})}catch(e){console.warn("Failed to retrieve node status",e),kr({title:"Failed to retrieve node status",subtitle:e.message})}}const{createElement:Ln,createContext:Eh,forwardRef:ic,useCallback:De,useContext:oc,useEffect:zt,useImperativeHandle:ac,useLayoutEffect:jh,useMemo:Lh,useRef:Me,useState:ln}=Vs,po=Vs[`useId${Math.random()}`.slice(0,5)],Dh=jh,Zr=Eh(null);Zr.displayName="PanelGroupContext";const $t=Dh,Mh=typeof po=="function"?po:()=>null;let Rh=0;function mi(e=null){const t=Mh(),n=Me(e||t||null);return n.current===null&&(n.current=""+Rh++),e??n.current}function cc({children:e,className:t="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:i,id:c,maxSize:a,minSize:l,onCollapse:u,onExpand:h,onResize:f,order:p,style:g,tagName:v="div",...b}){const m=oc(Zr);if(m===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:S,getPanelSize:C,getPanelStyle:D,groupId:x,isPanelCollapsed:E,reevaluatePanelConstraints:w,registerPanel:N,resizePanel:z,unregisterPanel:_}=m,k=mi(c),G=Me({callbacks:{onCollapse:u,onExpand:h,onResize:f},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:a,minSize:l},id:k,idIsFromProps:c!==void 0,order:p});Me({didLogMissingDefaultSizeWarning:!1}),$t(()=>{const{callbacks:P,constraints:M}=G.current,L={...M};G.current.id=k,G.current.idIsFromProps=c!==void 0,G.current.order=p,P.onCollapse=u,P.onExpand=h,P.onResize=f,M.collapsedSize=n,M.collapsible=r,M.defaultSize=s,M.maxSize=a,M.minSize=l,(L.collapsedSize!==M.collapsedSize||L.collapsible!==M.collapsible||L.maxSize!==M.maxSize||L.minSize!==M.minSize)&&w(G.current,L)}),$t(()=>{const P=G.current;return N(P),()=>{_(P)}},[p,k,N,_]),ac(i,()=>({collapse:()=>{y(G.current)},expand:P=>{S(G.current,P)},getId(){return k},getSize(){return C(G.current)},isCollapsed(){return E(G.current)},isExpanded(){return!E(G.current)},resize:P=>{z(G.current,P)}}),[y,S,C,E,k,z]);const B=D(G.current,s);return Ln(v,{...b,children:e,className:t,id:c,style:{...B,...g},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":x,"data-panel-id":k,"data-panel-size":parseFloat(""+B.flexGrow).toFixed(1)})}const Pt=ic((e,t)=>Ln(cc,{...e,forwardedRef:t}));cc.displayName="Panel";Pt.displayName="forwardRef(Panel)";let Fs=null,It=null;function Ph(e,t){if(t){const n=(t&hc)!==0,r=(t&pc)!==0,s=(t&mc)!==0,i=(t&gc)!==0;if(n)return s?"se-resize":i?"ne-resize":"e-resize";if(r)return s?"sw-resize":i?"nw-resize":"w-resize";if(s)return"s-resize";if(i)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Nh(){It!==null&&(document.head.removeChild(It),Fs=null,It=null)}function ys(e,t){const n=Ph(e,t);Fs!==n&&(Fs=n,It===null&&(It=document.createElement("style"),document.head.appendChild(It)),It.innerHTML=`*{cursor: ${n}!important;}`)}function lc(e){return e.type==="keydown"}function uc(e){return e.type.startsWith("pointer")}function dc(e){return e.type.startsWith("mouse")}function es(e){if(uc(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(dc(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Ih(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Th(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function kh(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:vo(e),b:vo(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;te(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:go(mo(n.a)),b:go(mo(n.b))};if(s.a===s.b){const i=r.childNodes,c={a:n.a.at(-1),b:n.b.at(-1)};let a=i.length;for(;a--;){const l=i[a];if(l===c.a)return 1;if(l===c.b)return-1}}return Math.sign(s.a-s.b)}const Oh=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Ah(e){var t;const n=getComputedStyle((t=fc(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function zh(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||Ah(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||Oh.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function mo(e){let t=e.length;for(;t--;){const n=e[t];if(te(n,"Missing node"),zh(n))return n}return null}function go(e){return e&&Number(getComputedStyle(e).zIndex)||0}function vo(e){const t=[];for(;e;)t.push(e),e=fc(e);return t}function fc(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const hc=1,pc=2,mc=4,gc=8,$h=Ih()==="coarse";let Be=[],un=!1,vt=new Map,ts=new Map;const Yn=new Set;function _h(e,t,n,r,s){var i;const{ownerDocument:c}=t,a={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:s},l=(i=vt.get(c))!==null&&i!==void 0?i:0;return vt.set(c,l+1),Yn.add(a),Fr(),function(){var h;ts.delete(e),Yn.delete(a);const f=(h=vt.get(c))!==null&&h!==void 0?h:1;if(vt.set(c,f-1),Fr(),f===1&&vt.delete(c),Be.includes(a)){const p=Be.indexOf(a);p>=0&&Be.splice(p,1),vi(),s("up",!0,null)}}}function bo(e){const{target:t}=e,{x:n,y:r}=es(e);un=!0,gi({target:t,x:n,y:r}),Fr(),Be.length>0&&(Hr("down",e),e.preventDefault(),e.stopPropagation())}function An(e){const{x:t,y:n}=es(e);if(un&&e.buttons===0&&(un=!1,Hr("up",e)),!un){const{target:r}=e;gi({target:r,x:t,y:n})}Hr("move",e),vi(),Be.length>0&&e.preventDefault()}function Zt(e){const{target:t}=e,{x:n,y:r}=es(e);ts.clear(),un=!1,Be.length>0&&e.preventDefault(),Hr("up",e),gi({target:t,x:n,y:r}),vi(),Fr()}function gi({target:e,x:t,y:n}){Be.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),Yn.forEach(s=>{const{element:i,hitAreaMargins:c}=s,a=i.getBoundingClientRect(),{bottom:l,left:u,right:h,top:f}=a,p=$h?c.coarse:c.fine;if(t>=u-p&&t<=h+p&&n>=f-p&&n<=l+p){if(r!==null&&document.contains(r)&&i!==r&&!i.contains(r)&&!r.contains(i)&&kh(r,i)>0){let v=r,b=!1;for(;v&&!v.contains(i);){if(Th(v.getBoundingClientRect(),a)){b=!0;break}v=v.parentElement}if(b)return}Be.push(s)}})}function xs(e,t){ts.set(e,t)}function vi(){let e=!1,t=!1;Be.forEach(r=>{const{direction:s}=r;s==="horizontal"?e=!0:t=!0});let n=0;ts.forEach(r=>{n|=r}),e&&t?ys("intersection",n):e?ys("horizontal",n):t?ys("vertical",n):Nh()}function Fr(){vt.forEach((e,t)=>{const{body:n}=t;n.removeEventListener("contextmenu",Zt),n.removeEventListener("pointerdown",bo),n.removeEventListener("pointerleave",An),n.removeEventListener("pointermove",An)}),window.removeEventListener("pointerup",Zt),window.removeEventListener("pointercancel",Zt),Yn.size>0&&(un?(Be.length>0&&vt.forEach((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("contextmenu",Zt),n.addEventListener("pointerleave",An),n.addEventListener("pointermove",An))}),window.addEventListener("pointerup",Zt),window.addEventListener("pointercancel",Zt)):vt.forEach((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("pointerdown",bo,{capture:!0}),n.addEventListener("pointermove",An))}))}function Hr(e,t){Yn.forEach(n=>{const{setResizeHandlerState:r}=n,s=Be.includes(n);r(e,s,t)})}function qh(){const[e,t]=ln(0);return De(()=>t(n=>n+1),[])}function te(e,t){if(!e)throw console.error(t),Error(t)}const bi=10;function qt(e,t,n=bi){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function at(e,t,n=bi){return qt(e,t,n)===0}function ke(e,t,n){return qt(e,t,n)===0}function Fh(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const s=e[r],i=t[r];if(!ke(s,i,n))return!1}return!0}function an({panelConstraints:e,panelIndex:t,size:n}){const r=e[t];te(r!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:i,maxSize:c=100,minSize:a=0}=r;if(qt(n,a)<0)if(i){const l=(s+a)/2;qt(n,l)<0?n=s:n=a}else n=a;return n=Math.min(c,n),n=parseFloat(n.toFixed(bi)),n}function _n({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:i}){if(ke(e,0))return t;const c=[...t],[a,l]=r;te(a!=null,"Invalid first pivot index"),te(l!=null,"Invalid second pivot index");let u=0;if(i==="keyboard"){{const f=e<0?l:a,p=n[f];te(p,`Panel constraints not found for index ${f}`);const{collapsedSize:g=0,collapsible:v,minSize:b=0}=p;if(v){const m=t[f];if(te(m!=null,`Previous layout not found for panel index ${f}`),ke(m,g)){const y=b-m;qt(y,Math.abs(e))>0&&(e=e<0?0-y:y)}}}{const f=e<0?a:l,p=n[f];te(p,`No panel constraints found for index ${f}`);const{collapsedSize:g=0,collapsible:v,minSize:b=0}=p;if(v){const m=t[f];if(te(m!=null,`Previous layout not found for panel index ${f}`),ke(m,b)){const y=m-g;qt(y,Math.abs(e))>0&&(e=e<0?0-y:y)}}}}{const f=e<0?1:-1;let p=e<0?l:a,g=0;for(;;){const b=t[p];te(b!=null,`Previous layout not found for panel index ${p}`);const y=an({panelConstraints:n,panelIndex:p,size:100})-b;if(g+=y,p+=f,p<0||p>=n.length)break}const v=Math.min(Math.abs(e),Math.abs(g));e=e<0?0-v:v}{let p=e<0?a:l;for(;p>=0&&p<n.length;){const g=Math.abs(e)-Math.abs(u),v=t[p];te(v!=null,`Previous layout not found for panel index ${p}`);const b=v-g,m=an({panelConstraints:n,panelIndex:p,size:b});if(!ke(v,m)&&(u+=v-m,c[p]=m,u.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?p--:p++}}if(Fh(s,c))return s;{const f=e<0?l:a,p=t[f];te(p!=null,`Previous layout not found for panel index ${f}`);const g=p+u,v=an({panelConstraints:n,panelIndex:f,size:g});if(c[f]=v,!ke(v,g)){let b=g-v,y=e<0?l:a;for(;y>=0&&y<n.length;){const S=c[y];te(S!=null,`Previous layout not found for panel index ${y}`);const C=S+b,D=an({panelConstraints:n,panelIndex:y,size:C});if(ke(S,D)||(b-=D-S,c[y]=D),ke(b,0))break;e>0?y--:y++}}}const h=c.reduce((f,p)=>p+f,0);return ke(h,100)?c:s}function Hh({layout:e,panelsArray:t,pivotIndices:n}){let r=0,s=100,i=0,c=0;const a=n[0];te(a!=null,"No pivot index found"),t.forEach((f,p)=>{const{constraints:g}=f,{maxSize:v=100,minSize:b=0}=g;p===a?(r=b,s=v):(i+=b,c+=v)});const l=Math.min(s,100-i),u=Math.max(r,100-c),h=e[a];return{valueMax:l,valueMin:u,valueNow:h}}function Xn(e,t=document){return Array.from(t.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function vc(e,t,n=document){const s=Xn(e,n).findIndex(i=>i.getAttribute("data-panel-resize-handle-id")===t);return s??null}function bc(e,t,n){const r=vc(e,t,n);return r!=null?[r,r+1]:[-1,-1]}function yc(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const r=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return r||null}function ns(e,t=document){const n=t.querySelector(`[data-panel-resize-handle-id="${e}"]`);return n||null}function Qh(e,t,n,r=document){var s,i,c,a;const l=ns(t,r),u=Xn(e,r),h=l?u.indexOf(l):-1,f=(s=(i=n[h])===null||i===void 0?void 0:i.id)!==null&&s!==void 0?s:null,p=(c=(a=n[h+1])===null||a===void 0?void 0:a.id)!==null&&c!==void 0?c:null;return[f,p]}function Wh({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:s,panelGroupElement:i,setLayout:c}){Me({didWarnAboutMissingResizeHandle:!1}),$t(()=>{if(!i)return;const a=Xn(n,i);for(let l=0;l<s.length-1;l++){const{valueMax:u,valueMin:h,valueNow:f}=Hh({layout:r,panelsArray:s,pivotIndices:[l,l+1]}),p=a[l];if(p!=null){const g=s[l];te(g,`No panel data found for index "${l}"`),p.setAttribute("aria-controls",g.id),p.setAttribute("aria-valuemax",""+Math.round(u)),p.setAttribute("aria-valuemin",""+Math.round(h)),p.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{a.forEach((l,u)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,r,s,i]),zt(()=>{if(!i)return;const a=t.current;te(a,"Eager values not found");const{panelDataArray:l}=a,u=yc(n,i);te(u!=null,`No group found for id "${n}"`);const h=Xn(n,i);te(h,`No resize handles found for group id "${n}"`);const f=h.map(p=>{const g=p.getAttribute("data-panel-resize-handle-id");te(g,"Resize handle element has no handle id attribute");const[v,b]=Qh(n,g,l,i);if(v==null||b==null)return()=>{};const m=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const S=l.findIndex(C=>C.id===v);if(S>=0){const C=l[S];te(C,`No panel data found for index ${S}`);const D=r[S],{collapsedSize:x=0,collapsible:E,minSize:w=0}=C.constraints;if(D!=null&&E){const N=_n({delta:ke(D,x)?w-x:x-D,initialLayout:r,panelConstraints:l.map(z=>z.constraints),pivotIndices:bc(n,g,i),prevLayout:r,trigger:"keyboard"});r!==N&&c(N)}}break}}};return p.addEventListener("keydown",m),()=>{p.removeEventListener("keydown",m)}});return()=>{f.forEach(p=>p())}},[i,e,t,n,r,s,c])}function yo(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function xc(e,t){const n=e==="horizontal",{x:r,y:s}=es(t);return n?r:s}function Uh(e,t,n,r,s){const i=n==="horizontal",c=ns(t,s);te(c,`No resize handle element found for id "${t}"`);const a=c.getAttribute("data-panel-group-id");te(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=r;const u=xc(n,e),h=yc(a,s);te(h,`No group element found for id "${a}"`);const f=h.getBoundingClientRect(),p=i?f.width:f.height;return(u-l)/p*100}function Bh(e,t,n,r,s,i){if(lc(e)){const c=n==="horizontal";let a=0;e.shiftKey?a=100:s!=null?a=s:a=10;let l=0;switch(e.key){case"ArrowDown":l=c?0:a;break;case"ArrowLeft":l=c?-a:0;break;case"ArrowRight":l=c?a:0;break;case"ArrowUp":l=c?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:Uh(e,t,n,r,i)}function Vh({panelDataArray:e}){const t=Array(e.length),n=e.map(i=>i.constraints);let r=0,s=100;for(let i=0;i<e.length;i++){const c=n[i];te(c,`Panel constraints not found for index ${i}`);const{defaultSize:a}=c;a!=null&&(r++,t[i]=a,s-=a)}for(let i=0;i<e.length;i++){const c=n[i];te(c,`Panel constraints not found for index ${i}`);const{defaultSize:a}=c;if(a!=null)continue;const l=e.length-r,u=s/l;r++,t[i]=u,s-=u}return t}function en(e,t,n){t.forEach((r,s)=>{const i=e[s];te(i,`Panel data not found for index ${s}`);const{callbacks:c,constraints:a,id:l}=i,{collapsedSize:u=0,collapsible:h}=a,f=n[l];if(f==null||r!==f){n[l]=r;const{onCollapse:p,onExpand:g,onResize:v}=c;v&&v(r,f),h&&(p||g)&&(g&&(f==null||at(f,u))&&!at(r,u)&&g(),p&&(f==null||!at(f,u))&&at(r,u)&&p())}})}function Er(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Gh({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:s,precision:i=3}){const c=n[s];let a;return c==null?a=e!=null?e.toPrecision(i):"1":r.length===1?a="1":a=c.toPrecision(i),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function Kh(e,t=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}}function xo(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function wc(e){return`react-resizable-panels:${e}`}function Sc(e){return e.map(t=>{const{constraints:n,id:r,idIsFromProps:s,order:i}=t;return s?r:i?`${i}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function Cc(e,t){try{const n=wc(e),r=t.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function Yh(e,t,n){var r,s;const i=(r=Cc(e,n))!==null&&r!==void 0?r:{},c=Sc(t);return(s=i[c])!==null&&s!==void 0?s:null}function Xh(e,t,n,r,s){var i;const c=wc(e),a=Sc(t),l=(i=Cc(e,s))!==null&&i!==void 0?i:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(c,JSON.stringify(l))}catch(u){console.error(u)}}function wo({layout:e,panelConstraints:t}){const n=[...e],r=n.reduce((i,c)=>i+c,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(i=>`${i}%`).join(", ")}`);if(!ke(r,100)&&n.length>0)for(let i=0;i<t.length;i++){const c=n[i];te(c!=null,`No layout data found for index ${i}`);const a=100/r*c;n[i]=a}let s=0;for(let i=0;i<t.length;i++){const c=n[i];te(c!=null,`No layout data found for index ${i}`);const a=an({panelConstraints:t,panelIndex:i,size:c});c!=a&&(s+=c-a,n[i]=a)}if(!ke(s,0))for(let i=0;i<t.length;i++){const c=n[i];te(c!=null,`No layout data found for index ${i}`);const a=c+s,l=an({panelConstraints:t,panelIndex:i,size:a});if(c!==l&&(s-=l-c,n[i]=l,ke(s,0)))break}return n}const Jh=100,qn={getItem:e=>(xo(qn),qn.getItem(e)),setItem:(e,t)=>{xo(qn),qn.setItem(e,t)}},So={};function Ec({autoSaveId:e=null,children:t,className:n="",direction:r,forwardedRef:s,id:i=null,onLayout:c=null,keyboardResizeBy:a=null,storage:l=qn,style:u,tagName:h="div",...f}){const p=mi(i),g=Me(null),[v,b]=ln(null),[m,y]=ln([]),S=qh(),C=Me({}),D=Me(new Map),x=Me(0),E=Me({autoSaveId:e,direction:r,dragState:v,id:p,keyboardResizeBy:a,onLayout:c,storage:l}),w=Me({layout:m,panelDataArray:[],panelDataArrayChanged:!1});Me({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),ac(s,()=>({getId:()=>E.current.id,getLayout:()=>{const{layout:R}=w.current;return R},setLayout:R=>{const{onLayout:$}=E.current,{layout:W,panelDataArray:H}=w.current,q=wo({layout:R,panelConstraints:H.map(X=>X.constraints)});yo(W,q)||(y(q),w.current.layout=q,$&&$(q),en(H,q,C.current))}}),[]),$t(()=>{E.current.autoSaveId=e,E.current.direction=r,E.current.dragState=v,E.current.id=p,E.current.onLayout=c,E.current.storage=l}),Wh({committedValuesRef:E,eagerValuesRef:w,groupId:p,layout:m,panelDataArray:w.current.panelDataArray,setLayout:y,panelGroupElement:g.current}),zt(()=>{const{panelDataArray:R}=w.current;if(e){if(m.length===0||m.length!==R.length)return;let $=So[e];$==null&&($=Kh(Xh,Jh),So[e]=$);const W=[...R],H=new Map(D.current);$(e,W,H,m,l)}},[e,m,l]),zt(()=>{});const N=De(R=>{const{onLayout:$}=E.current,{layout:W,panelDataArray:H}=w.current;if(R.constraints.collapsible){const q=H.map(ce=>ce.constraints),{collapsedSize:X=0,panelSize:Z,pivotIndices:F}=Mt(H,R,W);if(te(Z!=null,`Panel size not found for panel "${R.id}"`),!at(Z,X)){D.current.set(R.id,Z);const oe=nn(H,R)===H.length-1?Z-X:X-Z,re=_n({delta:oe,initialLayout:W,panelConstraints:q,pivotIndices:F,prevLayout:W,trigger:"imperative-api"});Er(W,re)||(y(re),w.current.layout=re,$&&$(re),en(H,re,C.current))}}},[]),z=De((R,$)=>{const{onLayout:W}=E.current,{layout:H,panelDataArray:q}=w.current;if(R.constraints.collapsible){const X=q.map(de=>de.constraints),{collapsedSize:Z=0,panelSize:F=0,minSize:ce=0,pivotIndices:oe}=Mt(q,R,H),re=$??ce;if(at(F,Z)){const de=D.current.get(R.id),Oe=de!=null&&de>=re?de:re,Vt=nn(q,R)===q.length-1?F-Oe:Oe-F,ge=_n({delta:Vt,initialLayout:H,panelConstraints:X,pivotIndices:oe,prevLayout:H,trigger:"imperative-api"});Er(H,ge)||(y(ge),w.current.layout=ge,W&&W(ge),en(q,ge,C.current))}}},[]),_=De(R=>{const{layout:$,panelDataArray:W}=w.current,{panelSize:H}=Mt(W,R,$);return te(H!=null,`Panel size not found for panel "${R.id}"`),H},[]),k=De((R,$)=>{const{panelDataArray:W}=w.current,H=nn(W,R);return Gh({defaultSize:$,dragState:v,layout:m,panelData:W,panelIndex:H})},[v,m]),G=De(R=>{const{layout:$,panelDataArray:W}=w.current,{collapsedSize:H=0,collapsible:q,panelSize:X}=Mt(W,R,$);return te(X!=null,`Panel size not found for panel "${R.id}"`),q===!0&&at(X,H)},[]),B=De(R=>{const{layout:$,panelDataArray:W}=w.current,{collapsedSize:H=0,collapsible:q,panelSize:X}=Mt(W,R,$);return te(X!=null,`Panel size not found for panel "${R.id}"`),!q||qt(X,H)>0},[]),P=De(R=>{const{panelDataArray:$}=w.current;$.push(R),$.sort((W,H)=>{const q=W.order,X=H.order;return q==null&&X==null?0:q==null?-1:X==null?1:q-X}),w.current.panelDataArrayChanged=!0,S()},[S]);$t(()=>{if(w.current.panelDataArrayChanged){w.current.panelDataArrayChanged=!1;const{autoSaveId:R,onLayout:$,storage:W}=E.current,{layout:H,panelDataArray:q}=w.current;let X=null;if(R){const F=Yh(R,q,W);F&&(D.current=new Map(Object.entries(F.expandToSizes)),X=F.layout)}X==null&&(X=Vh({panelDataArray:q}));const Z=wo({layout:X,panelConstraints:q.map(F=>F.constraints)});yo(H,Z)||(y(Z),w.current.layout=Z,$&&$(Z),en(q,Z,C.current))}}),$t(()=>{const R=w.current;return()=>{R.layout=[]}},[]);const M=De(R=>{let $=!1;const W=g.current;return W&&window.getComputedStyle(W,null).getPropertyValue("direction")==="rtl"&&($=!0),function(q){q.preventDefault();const X=g.current;if(!X)return()=>null;const{direction:Z,dragState:F,id:ce,keyboardResizeBy:oe,onLayout:re}=E.current,{layout:de,panelDataArray:Oe}=w.current,{initialLayout:Fe}=F??{},Vt=bc(ce,R,X);let ge=Bh(q,R,Z,F,oe,X);const Gt=Z==="horizontal";Gt&&$&&(ge=-ge);const Ye=Oe.map(mr=>mr.constraints),Xe=_n({delta:ge,initialLayout:Fe??de,panelConstraints:Ye,pivotIndices:Vt,prevLayout:de,trigger:lc(q)?"keyboard":"mouse-or-touch"}),Dt=!Er(de,Xe);(uc(q)||dc(q))&&x.current!=ge&&(x.current=ge,!Dt&&ge!==0?Gt?xs(R,ge<0?hc:pc):xs(R,ge<0?mc:gc):xs(R,0)),Dt&&(y(Xe),w.current.layout=Xe,re&&re(Xe),en(Oe,Xe,C.current))}},[]),L=De((R,$)=>{const{onLayout:W}=E.current,{layout:H,panelDataArray:q}=w.current,X=q.map(de=>de.constraints),{panelSize:Z,pivotIndices:F}=Mt(q,R,H);te(Z!=null,`Panel size not found for panel "${R.id}"`);const oe=nn(q,R)===q.length-1?Z-$:$-Z,re=_n({delta:oe,initialLayout:H,panelConstraints:X,pivotIndices:F,prevLayout:H,trigger:"imperative-api"});Er(H,re)||(y(re),w.current.layout=re,W&&W(re),en(q,re,C.current))},[]),T=De((R,$)=>{const{layout:W,panelDataArray:H}=w.current,{collapsedSize:q=0,collapsible:X}=$,{collapsedSize:Z=0,collapsible:F,maxSize:ce=100,minSize:oe=0}=R.constraints,{panelSize:re}=Mt(H,R,W);re!=null&&(X&&F&&at(re,q)?at(q,Z)||L(R,Z):re<oe?L(R,oe):re>ce&&L(R,ce))},[L]),I=De((R,$)=>{const{direction:W}=E.current,{layout:H}=w.current;if(!g.current)return;const q=ns(R,g.current);te(q,`Drag handle element not found for id "${R}"`);const X=xc(W,$);b({dragHandleId:R,dragHandleRect:q.getBoundingClientRect(),initialCursorPosition:X,initialLayout:H})},[]),U=De(()=>{b(null)},[]),Q=De(R=>{const{panelDataArray:$}=w.current,W=nn($,R);W>=0&&($.splice(W,1),delete C.current[R.id],w.current.panelDataArrayChanged=!0,S())},[S]),J=Lh(()=>({collapsePanel:N,direction:r,dragState:v,expandPanel:z,getPanelSize:_,getPanelStyle:k,groupId:p,isPanelCollapsed:G,isPanelExpanded:B,reevaluatePanelConstraints:T,registerPanel:P,registerResizeHandle:M,resizePanel:L,startDragging:I,stopDragging:U,unregisterPanel:Q,panelGroupElement:g.current}),[N,v,r,z,_,k,p,G,B,T,P,M,L,I,U,Q]),Y={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Ln(Zr.Provider,{value:J},Ln(h,{...f,children:t,className:n,id:i,ref:g,style:{...Y,...u},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":p}))}const Rr=ic((e,t)=>Ln(Ec,{...e,forwardedRef:t}));Ec.displayName="PanelGroup";Rr.displayName="forwardRef(PanelGroup)";function nn(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function Mt(e,t,n){const r=nn(e,t),i=r===e.length-1?[r-1,r]:[r,r+1],c=n[r];return{...t.constraints,panelSize:c,pivotIndices:i}}function Zh({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){zt(()=>{if(e||n==null||r==null)return;const s=ns(t,r);if(s==null)return;const i=c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{c.preventDefault(),n(c);break}case"F6":{c.preventDefault();const a=s.getAttribute("data-panel-group-id");te(a,`No group element found for id "${a}"`);const l=Xn(a,r),u=vc(a,t,r);te(u!==null,`No resize element found for id "${t}"`);const h=c.shiftKey?u>0?u-1:l.length-1:u+1<l.length?u+1:0;l[h].focus();break}}};return s.addEventListener("keydown",i),()=>{s.removeEventListener("keydown",i)}},[r,e,t,n])}function jc({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:i,onDragging:c,onFocus:a,style:l={},tabIndex:u=0,tagName:h="div",...f}){var p,g;const v=Me(null),b=Me({onDragging:c});zt(()=>{b.current.onDragging=c});const m=oc(Zr);if(m===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:y,groupId:S,registerResizeHandle:C,startDragging:D,stopDragging:x,panelGroupElement:E}=m,w=mi(s),[N,z]=ln("inactive"),[_,k]=ln(!1),[G,B]=ln(null),P=Me({state:N});$t(()=>{P.current.state=N}),zt(()=>{if(n)B(null);else{const I=C(w);B(()=>I)}},[n,w,C]);const M=(p=r?.coarse)!==null&&p!==void 0?p:15,L=(g=r?.fine)!==null&&g!==void 0?g:5;return zt(()=>{if(n||G==null)return;const I=v.current;return te(I,"Element ref not attached"),_h(w,I,y,{coarse:M,fine:L},(Q,J,Y)=>{if(J)switch(Q){case"down":{z("drag"),te(Y,'Expected event to be defined for "down" action'),D(w,Y);const{onDragging:R}=b.current;R&&R(!0);break}case"move":{const{state:R}=P.current;R!=="drag"&&z("hover"),te(Y,'Expected event to be defined for "move" action'),G(Y);break}case"up":{z("hover"),x();const{onDragging:R}=b.current;R&&R(!1);break}}else z("inactive")})},[M,y,n,L,C,w,G,D,x]),Zh({disabled:n,handleId:w,resizeHandler:G,panelGroupElement:E}),Ln(h,{...f,children:e,className:t,id:s,onBlur:()=>{k(!1),i?.()},onFocus:()=>{k(!0),a?.()},ref:v,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...l},tabIndex:u,"data-panel-group-direction":y,"data-panel-group-id":S,"data-resize-handle":"","data-resize-handle-active":N==="drag"?"pointer":_?"keyboard":void 0,"data-resize-handle-state":N,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w})}jc.displayName="PanelResizeHandle";const ep="_root_1siko_1",tp="_header_1siko_9",np="_divider_1siko_9",rp="_content_1siko_13",sp="_dragger_1siko_21",rn={root:ep,header:tp,divider:np,content:rp,dragger:sp};function ws(e){return o.jsx(jc,{className:rn.dragger,...e})}function rs({children:e,title:t,icon:n,className:r,leftSection:s,infoSection:i,rightSection:c,withTopPadding:a,disabled:l,...u}){const h=st();return o.jsxs(Ft,{radius:"lg",className:be(rn.root,r),pos:"relative",opacity:l?.5:1,style:{pointerEvents:l?"none":void 0},...u,children:[(t||n||s||c||i)&&o.jsxs(o.Fragment,{children:[o.jsxs(ne,{px:"sm",py:"xs",gap:"xs",h:48,wrap:"nowrap",className:rn.header,children:[s,n&&o.jsx(O,{path:n,c:h?"slate.4":"slate.3"}),o.jsx(K,{fw:600,c:"bright",className:rn.title,style:{flexShrink:0},children:t}),i,o.jsx(Ve,{}),c]}),o.jsx(sr,{mx:"sm",mt:2,className:rn.divider})]}),o.jsx(ae,{p:"sm",pt:0,mt:a===!1?void 0:"sm",pos:"relative",className:rn.content,children:e})]})}function Co(e,t){const n=d.useRef(null),[r,s]=d.useState(0);return d.useLayoutEffect(()=>{const i=n.current;if(!i)return;const c=[...i.querySelectorAll("[data-panel-resize-handle-id]")].filter(l=>l.parentNode?.parentNode===i),a=new ResizeObserver(()=>{let l=t==="height"?i.offsetHeight:i.offsetWidth;for(const u of c)l-=t==="height"?u.offsetHeight:u.offsetWidth;l>0&&s(e/l*100)});a.observe(i);for(const l of c)a.observe(l);return()=>{a.disconnect()}},[e,t]),[r,n]}function ip({className:e,style:t}){return o.jsx(ae,{className:be("mantine-contextmenu-divider",e),style:t})}function op({zIndex:e,children:t,onHide:n}){let r=s=>{s.preventDefault(),n()};return o.jsx("div",{className:"mantine-contextmenu-overlay",style:{zIndex:e},onClick:r,onContextMenu:r,children:t})}function ap({onHide:e,zIndex:t,...n}){return Tr("resize",e),Tr("scroll",e),fl([["Escape",e]]),o.jsx(aa,{children:o.jsx(op,{zIndex:t,onHide:e,children:o.jsx(Dc,{...n,onHide:e})})})}var Pr={shadow:"sm",borderRadius:"xs",submenuDelay:500},yi=d.createContext(Pr),Lc=d.createContext({showContextMenu:()=>()=>{},hideContextMenu:()=>{},isContextMenuVisible:!1});function cp({zIndex:e=9999,shadow:t=Pr.shadow,borderRadius:n=Pr.borderRadius,submenuDelay:r=Pr.submenuDelay,children:s}){let[i,c]=d.useState(null),a=()=>{c(null)},l=(u,h)=>f=>{f.preventDefault(),f.stopPropagation();let{x:p,y:g}="touches"in f?{x:f.touches.item(0).clientX,y:f.touches.item(0).clientY}:{x:f.clientX,y:f.clientY};c({x:p,y:g,content:u,zIndex:h?.zIndex||e,className:h?.className,style:h?.style,classNames:h?.classNames,styles:h?.styles})};return o.jsx(yi.Provider,{value:{shadow:t,borderRadius:n,submenuDelay:r},children:o.jsxs(Lc.Provider,{value:{showContextMenu:l,hideContextMenu:a,isContextMenuVisible:!!i},children:[s,i&&o.jsx(ap,{onHide:a,...i})]})})}function xi(){return d.useContext(Lc)}function lp(e){let t=e.replace(/([a-z\d])([A-Z]+)/g,"$1 $2").replace(/\W|_/g," ").trim().toLowerCase();return`${t.charAt(0).toUpperCase()}${t.slice(1)}`}function Dc({x:e,y:t,content:n,zIndex:r,onHide:s,className:i,style:c,classNames:a,styles:l}){let{shadow:u,borderRadius:h}=d.useContext(yi),[f]=hl(),{width:p,height:g}=f.current?.getBoundingClientRect()||{width:0,height:0},v=0,b=0;typeof window<"u"&&({innerWidth:v,innerHeight:b}=window);let{dir:m}=pl();return o.jsx(Ft,{ref:f,shadow:u,radius:h,className:be("mantine-contextmenu",i,a?.root),style:[({spacing:{md:y}})=>{let S=vl(y);return{zIndex:r,top:t+g+S>b?b-g-S:t,left:m==="ltr"?e+p+S>v?v-p-S:e:v-S-(e-p-S<0?p+S:e)}},c,l?.root],children:Array.isArray(n)?n.map(({key:y,hidden:S,className:C,style:D,onClick:x,items:E,title:w,...N})=>S?null:x||E?o.jsx(up,{className:be(a?.item,C),style:[l?.item,D],title:w??lp(y),onClick:x,onHide:s,items:E,...N},y):o.jsx(ip,{className:be(a?.divider,C),style:[l?.divider,D]},y)):n(s)})}function up({className:e,style:t,icon:n,iconRight:r,title:s,color:i,disabled:c,onClick:a,onHide:l,items:u}){let h=d.useRef(null),{submenuDelay:f}=d.useContext(yi),p=ml("(hover: hover)"),[g,v]=d.useState(null),{start:b,clear:m}=qi(()=>{let{top:N,right:z}=h.current.getBoundingClientRect();v({x:z,y:N})},f),{start:y,clear:S}=qi(()=>{v(null)},f),C=()=>{S(),b()},D=()=>{m(),y()},x=u&&!c,E=x&&p,w=x?N=>{N.stopPropagation(),C()}:a?N=>{l(),a(N)}:void 0;return o.jsxs("div",{onMouseEnter:E?C:void 0,onMouseLeave:E?D:void 0,children:[o.jsxs(ca,{ref:h,style:[N=>{let{colors:z}=N,_=i?gl({color:i,theme:N}).value:void 0;return{"--mantine-contextmenu-item-button-color":_||"var(--mantine-color-text)","--mantine-contextmenu-item-button-hover-bg-color-light":_?ht(_,.08):ht(z.gray[4],.25),"--mantine-contextmenu-item-button-hover-bg-color-dark":_?ht(_,.15):ht(z.dark[3],.25),"--mantine-contextmenu-item-button-pressed-bg-color-light":_?ht(_,.2):ht(z.gray[4],.5),"--mantine-contextmenu-item-button-pressed-bg-color-dark":_?ht(_,.3):ht(z.dark[3],.5)}},t],className:be("mantine-contextmenu-item-button",e),disabled:c,onClick:w,children:[n&&o.jsx(ae,{fz:0,mr:"xs",mt:-2,children:n}),o.jsx("div",{className:"mantine-contextmenu-item-button-title",children:s}),r?o.jsx(ae,{fz:0,ml:"xs",mt:-2,children:r}):u&&o.jsx(ae,{fz:10,mt:-2,ml:"xs",children:""})]}),g&&o.jsx(Dc,{content:u,onHide:l,...g})]})}const dp=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*(EAST|WEST|[EW])?$/i,Eo=/^([+-]?[0-8]?[0-9])\s+([0-5]?[0-9]\.\d{3,})[\s,]{1,}([+-]?[0-1]?[0-9]?[0-9])\s+([0-5]?[0-9]\.\d{3,})$/,jo=/^(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([]?)[\s]*(EAST|WEST|[EW])?$/i,Lo=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?$/i,Do=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?$/i,Mo=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''||||["\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''||||["\.])?\s*(EAST|WEST|[EW])?$/i;function fp(e){if(!["DMS","DM","DD"].includes(e))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){const t=this.decimalCoordinates.split(",").map(g=>Number(g.trim())),n=Number(t[0]),r=Number(t[1]),s=Math.abs(n),i=Math.abs(r),c=n>0?"N":"S",a=r>0?"E":"W";let l;e=="DD"&&(l=`${s} ${c}, ${i} ${a}`);const u=Math.floor(s),h=Math.floor(i),f=(s-u)*60,p=(i-h)*60;if(e=="DM"){let g=Ro(f,3).toFixed(3).padStart(6,"0"),v=Ro(p,3).toFixed(3).padStart(6,"0");g.endsWith(".000")&&v.endsWith(".000")&&(g=g.replace(/\.000$/,""),v=v.replace(/\.000$/,"")),l=`${u} ${g}' ${c}, ${h} ${v}' ${a}`}if(e=="DMS"){const g=Math.floor(f),v=Math.floor(p);let b=((f-g)*60).toFixed(1).padStart(4,"0"),m=((p-v)*60).toFixed(1).padStart(4,"0");const y=g.toString().padStart(2,"0"),S=v.toString().padStart(2,"0");b.endsWith(".0")&&m.endsWith(".0")&&(b=b.replace(/\.0$/,""),m=m.replace(/\.0$/,"")),l=`${u} ${y}' ${b}" ${c}, ${h} ${S}' ${m}" ${a}`}return l}else throw new Error("no decimal coordinates to convert")}function Ro(e,t){const n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n}function wi(e,t){t||(t=5),e=e.replace(/\s+/g," ").trim();let n=null,r=null,s="",i="",c=null,a=[],l=!1;if(dp.test(e))throw new Error("invalid coordinate value");if(Eo.test(e))if(a=Eo.exec(e),l=zn(a),l)n=Math.abs(a[1])+a[2]/60,Number(a[1])<0&&(n*=-1),r=Math.abs(a[3])+a[4]/60,Number(a[3])<0&&(r*=-1),c="DM";else throw new Error("invalid coordinate format");else if(jo.test(e))if(a=jo.exec(e),l=zn(a),l){if(n=a[2],r=a[6],n.includes(",")&&(n=n.replace(",",".")),r.includes(",")&&(r=r.replace(",",".")),c="DD",Number(Math.round(n))==Number(n))throw new Error("integer only coordinate provided");if(Number(Math.round(r))==Number(r))throw new Error("integer only coordinate provided");a[1]?(s=a[1],i=a[5]):a[4]&&(s=a[4],i=a[8])}else throw new Error("invalid decimal coordinate format");else if(Lo.test(e))if(a=Lo.exec(e),l=zn(a),l)n=Math.abs(parseInt(a[2])),a[4]&&(n+=a[4]/60,c="DM"),a[6]&&(n+=a[6].replace(",",".")/3600,c="DMS"),parseInt(a[2])<0&&(n=-1*n),r=Math.abs(parseInt(a[9])),a[11]&&(r+=a[11]/60),a[13]&&(r+=a[13].replace(",",".")/3600),parseInt(a[9])<0&&(r=-1*r),a[1]?(s=a[1],i=a[8]):a[7]&&(s=a[7],i=a[14]);else throw new Error("invalid DMS coordinates format");else if(Do.test(e))if(a=Do.exec(e),l=zn(a),l)n=Math.abs(parseInt(a[2])),a[4]&&(n+=a[4]/60,c="DM"),a[6]&&(n+=a[6]/3600,c="DMS"),parseInt(a[2])<0&&(n=-1*n),r=Math.abs(parseInt(a[10])),a[12]&&(r+=a[12]/60),a[14]&&(r+=a[14]/3600),parseInt(a[10])<0&&(r=-1*r),a[1]?(s=a[1],i=a[9]):a[8]&&(s=a[8],i=a[16]);else throw new Error("invalid DMS coordinates format");else if(Mo.test(e)){if(a=Mo.exec(e),l=zn(a),a.filter(u=>u).length<=5)throw new Error("invalid coordinates format");if(l)n=Math.abs(parseInt(a[2])),a[4]&&(n+=a[4].replace(",",".")/60,c="DM"),a[6]&&(n+=a[6].replace(",",".")/3600,c="DMS"),parseInt(a[2])<0&&(n=-1*n),r=Math.abs(parseInt(a[10])),a[12]&&(r+=a[12].replace(",",".")/60),a[14]&&(r+=a[14].replace(",",".")/3600),parseInt(a[10])<0&&(r=-1*r),a[1]?(s=a[1],i=a[9]):a[8]&&(s=a[8],i=a[16]);else throw new Error("invalid coordinates format")}if(l){if(Math.abs(r)>=180)throw new Error("invalid longitude value");if(Math.abs(n)>=90)throw new Error("invalid latitude value");if(s&&!i||!s&&i)throw new Error("invalid coordinates value");if(s&&s==i)throw new Error("invalid coordinates format");n.toString().includes(",")&&(n=n.replace(",",".")),r.toString().includes(",")&&(r=r.replace(",","."));let u=/S|SOUTH/i;u.test(s)&&n>0&&(n=-1*n),u=/W|WEST/i,u.test(i)&&r>0&&(r=-1*r);const h=a[0].trim();let f,p;const g=/[,/;\u0020]/g,v=h.match(g);if(v==null){const y=Math.floor(e.length/2);f=h.substring(0,y).trim(),p=h.substring(y).trim()}else{let y;v.length%2==1?y=Math.floor(v.length/2):y=v.length/2-1;let S=0;if(y==0)S=h.indexOf(v[0]),f=h.substring(0,S).trim(),p=h.substring(S+1).trim();else{let C=0,D=0;for(;C<=y;)S=h.indexOf(v[C],D),D=S+1,C++;f=h.substring(0,S).trim(),p=h.substring(S+1).trim()}}const b=f.split(".");if(b.length==2&&b[1]==0&&b[1].length!=2)throw new Error("invalid coordinates format");const m=p.split(".");if(m.length==2&&m[1]==0&&m[1].length!=2)throw new Error("invalid coordinates format");if(/^\d+$/.test(f)||/^\d+$/.test(p))throw new Error("degree only coordinate/s provided");return n=Number(Number(n).toFixed(t)),r=Number(Number(r).toFixed(t)),Object.freeze({verbatimCoordinates:h,verbatimLatitude:f,verbatimLongitude:p,decimalLatitude:n,decimalLongitude:r,decimalCoordinates:`${n},${r}`,originalFormat:c,closeEnough:hp,toCoordinateFormat:fp})}else throw new Error("coordinates pattern match failed")}function zn(e){if(!isNaN(e[0]))return!1;const t=[...e];if(t.shift(),t.length%2>0)return!1;const n=/^[-+]?\d+([\.,]\d+)?$/,r=/[eastsouthnorthwest]+/i,s=t.length/2;for(let i=0;i<s;i++){const c=t[i],a=t[i+s],l=n.test(c)&&n.test(a),u=r.test(c)&&r.test(a),h=c==a;if(!(c==null&&a==null)){if(c==null||a==null)return!1;if(l||u||h)continue;return!1}}return!0}function Po(e,t){const n=Math.abs(e-t);return Number(n.toFixed(6))<=1e-5}function hp(e){if(!e)throw new Error("coords must be provided");if(e.includes(",")){const t=e.split(",");if(Number(t[0])==NaN||Number(t[1])==NaN)throw new Error("coords are not valid decimals");return Po(this.decimalLatitude,Number(t[0]))&&Po(this.decimalLongitude,t[1])}else throw new Error("coords being tested must be separated by a comma")}const pp=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});wi.to=pp;const mp=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:'40 7 22.8" N 74 7 22.8" W',verbatimLatitude:'40 7 22.8" N',verbatimLongitude:'74 7 22.8" W'},{verbatimCoordinates:"40 7.38 , -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"N40722.8, W74722.8",verbatimLatitude:"N40722.8",verbatimLongitude:"W74722.8"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:`407'22.8"N, 747'22.8"W`,verbatimLatitude:`407'22.8"N`,verbatimLongitude:`747'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123,-74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40723"N 74723"W',verbatimLatitude:'40723"N',verbatimLongitude:'74723"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40723"S 74723"E',verbatimLatitude:'40723"S',verbatimLongitude:'74723"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40723" -74723"',verbatimLatitude:'40723"',verbatimLongitude:'-74723"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7 23" N 74d 7 23" W',verbatimLatitude:'40d 7 23" N',verbatimLongitude:'74d 7 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],gp={decimalLatitude:40.123,decimalLongitude:-74.123},vp=[{verbatimCoordinates:`504'17.698"south, 1424'2.826"east`,verbatimLatitude:`504'17.698"south`,verbatimLongitude:`1424'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"402647N 795836W",verbatimLatitude:"402647N",verbatimLongitude:"795836W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26 47 N 79d 58 36 W",verbatimLatitude:"40d 26 47 N",verbatimLongitude:"79d 58 36 W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195 79,948862",verbatimLatitude:"40,446195",verbatimLongitude:"79,948862",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40 26.7717, -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"1824S 2245E",verbatimLatitude:"1824S",verbatimLongitude:"2245E",decimalLatitude:-18.4,decimalLongitude:22.75}],bp=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245 S / 28.2344 E",verbatimLatitude:"-23.3245 S",verbatimLongitude:"28.2344 E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40 26.7717 -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563   E22.45634 ",verbatimLatitude:"S23.43563 ",verbatimLongitude:"E22.45634 ",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372 S 23,07771 E",verbatimLatitude:"27,71372 S",verbatimLongitude:"23,07771 E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"53 16.3863,4 52.8171",verbatimLatitude:"53 16.3863",verbatimLongitude:"4 52.8171",decimalLatitude:53.273105,decimalLongitude:4.88029},{verbatimCoordinates:"50 8.2914,-5 2.4447",verbatimLatitude:"50 8.2914",verbatimLongitude:"-5 2.4447",decimalLatitude:50.13819,decimalLongitude:-5.040745},{verbatimCoordinates:"N 48 30,6410', E 18 57,4583'",verbatimLatitude:"N 48 30,6410'",verbatimLongitude:"E 18 57,4583'",decimalLatitude:48.51068,decimalLongitude:18.95764},{verbatimCoordinates:"1.23456, 18.33453",verbatimLatitude:"1.23456",verbatimLongitude:"18.33453",decimalLatitude:1.23456,decimalLongitude:18.33453}];function yp(){const e=[];return mp.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...gp})}),[...e,...vp,...bp]}const xp=yp();wi.formats=xp.map(e=>e.verbatimCoordinates);const wp=wi;function Sp({visible:e}){return o.jsx(bl,{visible:e,zIndex:1e3,overlayProps:{radius:"lg",opacity:.75,bg:"slate.8"},transitionProps:{duration:150},loaderProps:{type:"dots"}})}const Cp=d.lazy(()=>fd(()=>import("./index-CjdLtKP4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])));function Ep({opened:e,data:t,onClose:n}){const[r,s]=d.useState(650),[i,c]=ct(ut(t));return d.useEffect(()=>{c(ut(t))},[t]),o.jsxs(Vr,{opened:e,onClose:n,position:"right",trapFocus:!1,onClick:Zl,size:r,styles:{body:{height:"100%",display:"flex",flexDirection:"column"}},children:[o.jsx(Oa,{minSize:500,maxSize:1500,onResize:s}),o.jsxs(ne,{mb:"md",gap:"sm",children:[o.jsxs(Qt,{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[o.jsx(O,{left:!0,path:ba,size:"sm"}),"Geography explorer"]}),o.jsx(Ve,{}),o.jsx(ne,{align:"center",children:o.jsx(fe,{onClick:n,"aria-label":"Close geography drawer",children:o.jsx(O,{path:rt})})})]}),o.jsxs(je,{flex:1,gap:6,style:{flexShrink:1,flexBasis:0},children:[o.jsx(ae,{flex:1,children:o.jsx(d.Suspense,{fallback:o.jsx(Sp,{visible:!0}),children:o.jsx(Cp,{value:i})})}),o.jsx(bh,{style:{marginTop:"20px"},children:"Contents"}),o.jsx(ae,{flex:1,pos:"relative",children:o.jsx(Wt,{pos:"absolute",inset:0,autoFocus:!0,value:i,onChange:c,extensions:[Lt()]})})]})]})}const jt=({value:e,text:t,...n})=>{const[r,s]=Hn(),i=A(a=>{a.stopPropagation(),s.open()}),c=A(()=>{s.close()});return o.jsxs(o.Fragment,{children:[o.jsxs(ne,{...n,wrap:"nowrap",c:"surreal.5",gap:0,onClick:i,style:{cursor:"pointer"},children:[o.jsx(K,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:300},children:t}),o.jsx(O,{path:ba,right:!0})]}),o.jsx(Ep,{opened:r,data:e,onClose:c})]})},jp="_root_1hfdn_1",Lp="_table_1hfdn_6",Dp="_table-value_1hfdn_33",Mp="_source-code_1hfdn_39",Nr={root:jp,table:Lp,tableValue:Dp,sourceCode:Mp};function Rp(e){return o.jsx(K,{c:"slate",ff:"JetBrains Mono",children:e.value===null?"null":""})}function Pp(e){const t=e.value?o.jsx(O,{path:or,color:"green"}):o.jsx(O,{path:rt,color:"pink.9"});return o.jsx("div",{children:t})}function Np(e){return o.jsx(K,{title:e.value,style:{...ya,maxWidth:250},children:e.value})}function No(e){return o.jsx(K,{children:e.value.toLocaleString()})}function Ip(e){return o.jsx(K,{ff:"monospace",c:"bright",children:e.value.toString()})}function Tp(e){return o.jsx(za,{value:e.value})}function kp(e){const t=new Date(e.value),n=Kr(t).fromNow();return o.jsxs(K,{title:`${t.toISOString()} (${n})`,children:[o.jsx(O,{path:eu,left:!0,mt:-3}),t.toLocaleString()]})}function Op(e){const t=e.value,n=t.slice(0,10);return o.jsx("div",{children:o.jsxs(lt,{shadow:"xl",withArrow:!0,position:"bottom-start",children:[o.jsx(lt.Target,{children:o.jsxs(K,{span:!0,ff:"JetBrains Mono",style:{cursor:"help"},children:["Array(",e.value.length,")"]})}),o.jsx(lt.Dropdown,{children:o.jsxs(je,{gap:"sm",children:[n.map((r,s)=>o.jsxs(ne,{wrap:"nowrap",children:[o.jsxs("span",{style:{opacity:.5},children:["#",s+1]}),o.jsx("div",{style:ya,children:o.jsx(Mc,{value:r})},s)]},s)),t.length>10&&o.jsxs(K,{size:"sm",c:"bright",children:["And ",t.length-10," more..."]})]})})]})})}function Ap(e){return o.jsx("div",{children:o.jsxs(lt,{width:280,shadow:"md",withArrow:!0,position:"bottom-start",children:[o.jsx(lt.Target,{children:o.jsxs(K,{span:!0,ff:"JetBrains Mono",style:{cursor:"help"},children:["Object(",Object.keys(e.value).length,")"]})}),o.jsx(lt.Dropdown,{children:o.jsx(K,{size:"sm",ff:"JetBrains Mono",lineClamp:10,className:Nr.sourceCode,children:ut(e.value,!1,!0)})})]})})}function zp({value:e}){const[t,n]=e.point;try{const r=wp(`${n} ${t}`);return o.jsx(jt,{value:e,text:r.toCoordinateFormat("DMS")})}catch(r){return console.error(r),o.jsx(jt,{value:e,text:n===0&&t===0?"0 N, 0 E (Null Island)":`(${n}, ${t})`})}}function $p({value:e}){return o.jsx(jt,{value:e,text:"LineString"})}function _p({value:e}){return o.jsx(jt,{value:e,text:"Polygon"})}function qp({value:e}){return o.jsx(jt,{value:e,text:"MultiPoint"})}function Fp({value:e}){return o.jsx(jt,{value:e,text:"MultiLineString"})}function Hp({value:e}){return o.jsx(jt,{value:e,text:"MultiPolygon"})}function Qp({value:e}){return o.jsx(jt,{value:e,text:"GeometryCollection"})}const Mc=({value:e})=>e instanceof Date?o.jsx(kp,{value:e}):e==null?o.jsx(Rp,{value:e}):typeof e=="boolean"?o.jsx(Pp,{value:e}):e instanceof hd?o.jsx(No,{value:Number(e.toString())}):typeof e=="number"?o.jsx(No,{value:e}):e instanceof pd?o.jsx(Ip,{value:e}):e instanceof _r?o.jsx(Tp,{value:e}):e instanceof md?o.jsx(zp,{value:e}):e instanceof gd?o.jsx($p,{value:e}):e instanceof vd?o.jsx(_p,{value:e}):e instanceof bd?o.jsx(qp,{value:e}):e instanceof yd?o.jsx(Fp,{value:e}):e instanceof xd?o.jsx(Hp,{value:e}):e instanceof wd?o.jsx(Qp,{value:e}):Array.isArray(e)?o.jsx(Op,{value:e}):typeof e=="object"?o.jsx(Ap,{value:e}):o.jsx(Np,{value:e.toString()});function Io(e){return Array.isArray(e)&&e.every(t=>xa(t))}function Wp(e){const{inspect:t}=Ut(),{data:n,active:r,sorting:s,headers:i,onSortingChange:c,onRowContextMenu:a,className:l,...u}=e,h=A(m=>{if(!c)return;const[y,S]=s||[];c(y===m&&S==="asc"?[m,"desc"]:y===m&&S==="desc"?null:[m,"asc"])}),[f,p,g]=d.useMemo(()=>{const m=i||[],y=[];let S=!1;if(Io(n))for(const D of n){if(y.length>=100){S=!0;break}const x={};for(const[E,w]of Object.entries(D))m.includes(E)||m.push(E),x[E]=w;y.push(x)}return[tu(m,D=>{switch(D){case"id":return"00000000000";case"in":return"00000000001";case"out":return"00000000002";default:return D}}),y,S]},[n,i]),v=d.useMemo(()=>f.map(m=>o.jsx(ae,{component:"th",children:o.jsxs(K,{span:!0,fw:700,onClick:()=>h(m),style:{cursor:c?"pointer":void 0,userSelect:"none",WebkitUserSelect:"none"},children:[m,s?.[0]===m&&o.jsx(O,{path:s[1]==="asc"?nu:ru,pos:"absolute"})]})},m)),[f,s,c]),b=d.useMemo(()=>p.map((m,y)=>{const S=[...f].map((D,x)=>{const E=m[D];return o.jsx(ae,{component:"td",className:Nr.tableValue,h:37,children:o.jsx(Mc,{value:E})},x)}),C=r&&m.id===r;return o.jsx(ae,{component:"tr",onClick:()=>m.id&&t(m.id),onContextMenu:D=>a?.(D,m),style:{backgroundColor:`${C?"var(--mantine-color-slate-6)":void 0} !important`},children:S},y)}),[f,p,r,t,a]);return Io(n)?o.jsxs(Ht,{className:Nr.root,scrollbars:"xy",...u,children:[o.jsxs(yl,{className:Nr.table,children:[o.jsx("thead",{children:o.jsx("tr",{children:v})}),o.jsx("tbody",{children:b})]}),g&&o.jsxs(ne,{mt:"md",mb:"xl",c:"red",children:[o.jsx(O,{path:Gr}),"The rows have been truncated to 100 for performance reasons"]})]}):o.jsx(K,{c:"slate",children:"Result could not be displayed as a table."})}const Up=[{label:"10 Results per page",value:"10"},{label:"25 Results per page",value:"25"},{label:"50 Results per page",value:"50"},{label:"100 Results per page",value:"100"}];function Bp({store:e,loading:t}){const[n,r]=ct(""),s=A(i=>{if(i.type==="keydown"&&i.key!=="Enter")return;const c=Number.parseInt(n);e.setCurrentPage(c),r(e.clampPage(c).toString())});return d.useLayoutEffect(()=>{r(e.currentPage.toString())},[e.currentPage]),o.jsxs(o.Fragment,{children:[o.jsxs(ne,{gap:"xs",wrap:"nowrap",children:[o.jsx(fe,{onClick:e.previousPage,disabled:e.currentPage<=1,loading:t,"aria-label":"Previous page",children:o.jsx(O,{path:wa})}),o.jsx(ir,{value:n,spellCheck:!1,onChange:r,maw:36,size:"xs",withAsterisk:!0,onBlur:s,onKeyDown:s,disabled:t,styles:{input:{textAlign:"center",paddingInline:0}}}),o.jsxs(K,{c:"slate",children:["of ",e.pageCount," pages"]}),o.jsx(fe,{onClick:e.nextPage,disabled:e.currentPage>=e.pageCount,loading:t,"aria-label":"Next page",children:o.jsx(O,{path:Cn})})]}),o.jsx(xl,{value:e.pageSize.toString(),onChange:i=>e.setPageSize(Number.parseInt(i??"0")),data:Up,size:"xs"})]})}function Vp(){const[e,t]=d.useState(0),[n,r]=d.useState(1),[s,i]=d.useState(25),c=Math.ceil(e/s),a=A(()=>{const p=Math.max(1,n-1);r(p)}),l=A(()=>{const p=Math.min(c,n+1);r(p)}),u=A(p=>Number.isNaN(p)?1:Math.min(Math.max(1,p),c)),h=A(p=>{r(u(p))}),f=A(p=>{i(p),r(1)});return{total:e,currentPage:n,pageSize:s,pageCount:c,clampPage:u,setTotal:t,setCurrentPage:h,setPageSize:f,previousPage:a,nextPage:l}}function Gp(e){const t=d.useRef(new Ns),n=Et(r=>r.version);return d.useEffect(()=>{e?.dispatch({effects:t.current.reconfigure(n?kl(n):[])})},[e,n]),d.useMemo(()=>t.current.of([]),[])}function Rc(e,t){const n=d.useRef(null);return d.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]),A((...r)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{n.current=null,e(...r)},t)})}const Kp="_switcher_w34px_1",Yp={switcher:Kp};function ss(e,t){console.trace("SET"),e.dispatch({changes:{from:0,to:e.state.doc.length,insert:t}})}const To=500;function Xp({entry:e,editor:t,onClose:n}){const{updateCurrentConnection:r,addQueryTab:s}=Le.getState(),i=lr(),c=ar(),a=A(()=>{n(),s({type:"config",query:e.query})}),l=A(()=>{c&&(n(),ss(t,e.query))}),u=A(()=>{r({queryHistory:i.queryHistory.filter(f=>f!==e)})}),h=d.useMemo(()=>e.query.length>To?`${e.query.slice(0,To)}...`:e.query,[e.query]);return o.jsxs(ae,{children:[o.jsxs(ne,{h:28,wrap:"nowrap",children:[o.jsxs(ne,{gap:"xs",wrap:"nowrap",miw:0,children:[o.jsx(K,{c:"bright",style:{flexShrink:0},children:si(Kr(e.timestamp).fromNow())}),e.origin&&o.jsxs(K,{c:"slate",truncate:!0,miw:0,children:["from ",e.origin]})]}),o.jsx(Ve,{}),o.jsxs(_e,{position:"right-start",children:[o.jsx(_e.Target,{children:o.jsx(fe,{children:o.jsx(O,{path:su})})}),o.jsxs(_e.Dropdown,{children:[o.jsx(_e.Label,{children:"Open"}),o.jsx(_e.Item,{onClick:a,leftSection:o.jsx(O,{path:En}),children:"Open in new tab"}),o.jsx(_e.Item,{onClick:l,leftSection:o.jsx(O,{path:jn}),children:"Open in current tab"}),o.jsx(_e.Label,{mt:"sm",children:"Dangerous"}),o.jsx(_e.Item,{c:"red",onClick:u,leftSection:o.jsx(O,{path:Dn,c:"red"}),children:"Remove from history"})]})]})]}),o.jsx(Sa,{mt:"xs",value:h,language:"surrealql"}),o.jsx(sr,{mt:"md"})]})}const Jp=d.memo(Xp);function Zp({opened:e,editor:t,onClose:n}){const{updateCurrentConnection:r}=Le.getState(),s=lr(),[i,c]=ct(""),a=A(()=>{r({queryHistory:[]})}),l=d.useMemo(()=>{if(!s)return[];const u=i.toLowerCase();return s.queryHistory.filter(h=>h.query.toLowerCase().includes(u)).reverse()},[s,i]);return o.jsxs(Vr,{opened:e,onClose:n,position:"right",trapFocus:!1,children:[o.jsxs(ne,{mb:"md",gap:"sm",children:[o.jsx(Qt,{children:"Query history"}),o.jsx(Ve,{}),o.jsx(Ee,{label:"Clear history",children:o.jsx(fe,{onClick:a,title:"Clear history","aria-label":"Clear query history",color:"red",children:o.jsx(O,{path:Dn})})}),o.jsx(fe,{onClick:n,"aria-label":"Close history drawer",children:o.jsx(O,{path:rt})})]}),o.jsxs(je,{children:[o.jsx(ir,{autoFocus:!0,placeholder:"Search history...",leftSection:o.jsx(O,{path:Sn}),value:i,spellCheck:!1,onChange:c}),l.length===0&&o.jsx(K,{ta:"center",mt:"sm",c:"slate",children:"No queries to display"}),l.map((u,h)=>o.jsx(Jp,{entry:u,editor:t,onClose:n},h))]})]})}const Pc={read:e=>e.query,write:(e,t)=>{const{updateQueryTab:n}=Le.getState();n({id:e.id,query:t})}},Nc={read:async e=>{if(!(le instanceof Or))return"";try{return await le.readQueryFile(e)}catch(t){return le.warn("Query",t),kr({title:"Failed to load query",subtitle:"The query file could not be read"}),""}},write:async(e,t)=>{if(le instanceof Or)try{await le.writeQueryFile(e,t)}catch(n){return le.warn("Query",n),kr({title:"Failed to save query",subtitle:"The file could not be saved"}),""}}};function em(e){return e.type==="file"?Nc.read(e):Pc.read(e)}function tm(e,t){e.type==="file"?Nc.write(e,t):Pc.write(e,t)}const Ss={history:Ol};function nm({activeTab:e,editor:t,showVariables:n,selection:r,switchPortal:s,setShowVariables:i,lineNumbers:c,corners:a,onSaveQuery:l,onSelectionChange:u,onEditorMounted:h}){const{updateQueryTab:f,updateCurrentConnection:p}=Le.getState(),{updateQueryState:g,setQueryValid:v}=Ar.getState(),{inspect:b}=Ut(),m=lr(),y=Gp(t),S=Ar(P=>P.queryState),C=d.useRef(new Map),D=d.useMemo(()=>{const P=S[e.id];if(P)return P;const M=on.create().toJSON(Ss);return Promise.resolve(em(e)).then(L=>{g(e.id,on.create({doc:L}).toJSON(Ss))}),M},[S,e,g]),x=A((P,M)=>{const L=e.id,T=C.current.get(L);g(e.id,M),clearTimeout(T);const I=setTimeout(()=>{C.current.delete(L),tm(e,P)},500);C.current.set(L,I)}),E=A(()=>{p({queryTabList:!0})}),w=A(()=>{if(t)try{const P=t.state.doc,M=B?P.sliceString(0,r.from)+Ui(P.sliceString(r.from,r.to))+P.sliceString(r.to):Ui(P.toString());ss(t,M)}catch{kr({title:"Failed to format",subtitle:"Your query must be valid to format it"})}}),N=A(()=>{i(!n)}),z=A(()=>{if(!e)return;const P=t.state.doc,M=Bi(e.variables),L=Object.keys(M),I=iu(P.toString()).filter(Q=>!L.includes(Q)).reduce((Q,J)=>(Q[J]="",Q),{}),U={...M,...I};i(!0),f({id:e.id,variables:ut(U,!1,!0)})}),_=A(()=>Object.keys(Bi(e.variables))),k=A(P=>{v(!P.length)}),G=Rc(u,50),B=r?.empty===!1;return ot("format-query",w),ot("infer-variables",z),o.jsx(rs,{title:e.name??"Query",icon:Mr,radius:a,leftSection:!m.queryTabList&&o.jsx(_s,{label:"Reveal queries",mr:"sm",color:"slate",variant:"light",onClick:E,children:o.jsx(O,{path:Cn})}),infoSection:e.type==="file"&&o.jsx(K,{c:"slate",truncate:!0,children:Dd(e.query,"\\\\?")}),rightSection:s?o.jsx(Fa,{node:s}):o.jsxs(ne,{gap:"sm",style:{flexShrink:0},children:[D.doc.length>ou&&o.jsxs(lt,{position:"bottom",children:[o.jsx(lt.Target,{children:o.jsx(wl,{radius:"xs",variant:"light",color:"orange",children:o.jsx(O,{path:Gr})})}),o.jsx(lt.Dropdown,{maw:225,children:"This query exceeds the maximum length to be saved in the query history."})]}),o.jsx(Ee,{label:"Save query",children:o.jsx(fe,{onClick:l,variant:"light","aria-label":"Save query",children:o.jsx(O,{path:zr})})}),o.jsx(Ee,{label:`Format ${B?"selection":"query"}`,children:o.jsx(fe,{onClick:w,variant:"light","aria-label":`Format ${B?"selection":"query"}`,children:o.jsx(O,{path:jn})})}),o.jsx(Ee,{maw:175,multiline:!0,label:o.jsxs(je,{gap:4,children:[o.jsx(K,{children:"Infer variables from query"}),o.jsx(K,{c:"dimmed",size:"sm",children:"Automatically add missing variables."})]}),children:o.jsx(fe,{onClick:z,variant:"light","aria-label":"Infer variables from query",children:o.jsx(O,{path:Ts})})}),o.jsx(Ee,{label:n?"Hide variables":"Show variables",children:o.jsx(fe,{onClick:N,variant:"light","aria-label":n?"Hide variables":"Show variables",children:o.jsx(O,{path:Ea})})})]}),children:o.jsx(Wt,{state:D,onChange:x,onMount:h,lineNumbers:c,serialize:Ss,extensions:[Lt(),y,ei(k),cr(b),zd(),$d(_),kd(),Od(G),la.high(ua.of(Ca))]})})}const rm="_controls_1rbph_1",sm="_results_1rbph_8",im="_run_1rbph_13",Cs={controls:rm,results:sm,run:im};function Es({data:e,value:t,onChange:n,children:r}){const s=st();return o.jsxs(_e,{transitionProps:{transition:"scale-y"},children:[o.jsx(_e.Target,{children:r}),o.jsx(_e.Dropdown,{children:o.jsx(Ht.Autosize,{mah:250,children:e.map(({label:i,value:c,icon:a,description:l})=>o.jsxs(_e.Item,{onClick:()=>n(c),leftSection:a&&o.jsx(O,{path:a,mr:"xs"}),rightSection:t===c&&o.jsx(O,{path:or,ml:"xs"}),children:[o.jsx(K,{c:"bright",children:i}),l&&o.jsx(K,{c:s?"slate.5":"slate.3",size:"sm",children:l})]},c))})})]})}function Si(e,t){const[n,r]=jd(e)(t);return n?`"Error: ${n.message}"`:r}function om(e,{result:t,execution_time:n},r){return`

-------- Query ${e+1+(n?` (${n})`:"")} --------

`+Si(r,t)}function am({responses:e}){const[t]=oi(),{inspect:n}=Ut(),r=d.useMemo(()=>e.reduce((s,i,c)=>s+om(c,i,t),"").trim(),[e,t]);return o.jsx(Wt,{value:r,readOnly:!0,extensions:[Lt("combined-results"),cr(n)]})}function cm({responses:e,selected:t}){const[n]=oi(),{inspect:r}=Ut(),{success:s,result:i}=e[t]??{result:null},[c]=_t("appearance","editorScale"),a=Math.floor(15*(c/100)),l=d.useMemo(()=>Si(n,i),[i,n]);return s?o.jsx(Wt,{value:l,readOnly:!0,extensions:[Lt(),cr(r)]}):o.jsx(K,{pl:"md",pt:"sm",fz:a,c:"red",ff:"mono",style:{whiteSpace:"pre-wrap"},children:i})}function lm({value:e}){const t=Sl();return d.useEffect(()=>{const n=setInterval(()=>{t()},6e4);return()=>clearInterval(n)},[t]),Kr(e).fromNow()}function um(e){const[t,n]=d.useState(0);d.useEffect(()=>{const r=setInterval(()=>{n(s=>s+1)},e);return()=>clearInterval(r)},[e])}const dm={CREATE:["surreal.3",cn],UPDATE:["orange",au],DELETE:["red",Dn],CLOSE:["slate",rt]};function fm(e){return e.data!==void 0&&e.data!=="killed"}function hm(e){Qn("KILL $id",{id:e}),Cl({title:"Query killed",message:"You will no longer receive messages"})}function pm({query:e,isLive:t}){const n=ti(c=>c.liveQueryMessages[e.id]||[]),{inspect:r}=Ut(),{showContextMenu:s}=xi(),[i]=oi();return um(3e4),o.jsx(o.Fragment,{children:n.length>0?o.jsx(Ht,{pos:"absolute",top:0,left:12,right:12,bottom:12,children:o.jsx(Ct,{styles:{label:{paddingBlock:8}},children:n.map(c=>{const[a,l]=dm[c.action]||["slate",wn];return o.jsxs(Ct.Item,{value:c.id,children:[o.jsx(Ct.Control,{pl:"xs",onContextMenu:s([{key:"copy",title:"Copy live query id",icon:o.jsx(O,{path:ri}),onClick:()=>navigator.clipboard.writeText(c.queryId)},{key:"kill",title:"Kill live query",icon:o.jsx(O,{path:Dn}),onClick:()=>hm(c.queryId)}]),children:o.jsxs(ne,{children:[o.jsx(Vn,{h:28,color:a,variant:"light",leftSection:o.jsx(O,{path:l,c:a,left:!0}),children:o.jsx(K,{c:a,fw:700,children:c.action})}),o.jsxs(je,{gap:0,children:[o.jsx(lm,{value:c.timestamp}),o.jsx(K,{c:"slate",size:"xs",children:o.jsx(K,{span:!0,ff:"mono",onFocus:ni,children:c.queryId})})]})]})}),fm(c)&&o.jsx(Ct.Panel,{children:o.jsx(Wt,{value:Si(i,c.data),readOnly:!0,extensions:[Lt(),cr(r)]})})]},c.id)})})}):o.jsx(Ks,{h:"100%",c:"slate",children:o.jsxs(je,{children:[o.jsx(O,{path:t?cu:ja,mx:"auto",size:"lg"}),t?"Waiting for live query messages...":"No live queries currently active",t&&o.jsx(Vn,{color:"red",mx:"auto",children:"Listening..."})]})})})}function mm({responses:e,selected:t}){const{success:n,result:r}=e[t]??{result:null},[s]=_t("appearance","editorScale"),i=lu(r)?r:[],c=Vp(),a=Math.floor(15*(s/100)),l=(c.currentPage-1)*c.pageSize,u=i.slice(l,l+c.pageSize),h=d.useMemo(()=>i.length>0&&i.every(f=>xa(f)),[i]);return d.useLayoutEffect(()=>{c.setTotal(i.length)},[c.setTotal,i.length]),n?h?o.jsxs(je,{flex:1,gap:"xs",align:"center",children:[o.jsx(ae,{w:"100%",flex:1,pos:"relative",children:o.jsx(Wp,{data:u})}),o.jsx(sr,{w:"100%"}),o.jsx(ne,{children:o.jsx(Bp,{store:c})})]}):o.jsx(K,{pl:"md",pt:"sm",fz:a,c:"slate",children:"This response cannot be displayed as a table"}):o.jsx(K,{pl:"md",pt:"sm",fz:a,c:"red",ff:"mono",style:{whiteSpace:"pre-wrap"},children:r})}function gm(e){return e?Array.isArray(e.result)?e.result.length:e.success?1:0:0}const vm={combined:am,live:pm,single:cm,table:mm};function bm({activeTab:e,selection:t,editor:n,corners:r}){const{updateQueryTab:s}=Le.getState(),i=ti(B=>B.liveTabs),c=Et(B=>B.isQueryActive),a=Et(B=>B.queryResponses),l=Ar(B=>B.isQueryValid),u=st(),[h,f]=d.useState(1),p=e.resultMode,g=e.resultFormat,v=a[e.id]||[],b=v.length,y=!(p==="combined"||p==="live")&&v.length>0,S=i.has(e.id),C=d.useMemo(()=>v.map((B,P)=>{const M=gm(B);return{label:`Query ${P+1}`,description:`${M} ${M===1?"result":"results"} in ${B.execution_time}`,value:(P+1).toString()}}),[v]),D=A(()=>{La(e.id)}),x=A(()=>{n&&Da(n)}),E=B=>{s({id:e.id,resultMode:B})},w=B=>{s({id:e.id,resultFormat:B})};d.useLayoutEffect(()=>{f(1)},[b]);const N=ks.find(B=>B.value===p),z=Vi.find(B=>B.value===g),_=t?.empty===!1,k=p==="combined"?"Results":p==="live"?"Live Messages":y?`Result #${h}`:"Result",G=vm[p];return o.jsxs(rs,{title:k,icon:En,radius:r,rightSection:o.jsxs(ne,{align:"center",wrap:"nowrap",className:Cs.controls,children:[p==="live"?S&&o.jsx(pe,{onClick:D,color:"pink",variant:"light",size:"xs",radius:"sm",leftSection:o.jsx(O,{path:ja}),children:"Stop listening"}):p==="combined"?o.jsxs(K,{c:u?"slate.5":"slate.2",className:Cs.results,children:[b," ",b===1?"response":"responses"]}):y&&o.jsx(Es,{data:C,value:h.toString(),onChange:B=>f(Number.parseInt(B??"1")),children:o.jsx(Ee,{label:"Change result",children:o.jsxs(pe,{size:"xs",radius:"xs","aria-label":"Change result",variant:"light",color:"slate",leftSection:o.jsx(O,{path:Ma}),children:["Query ",h]})})}),o.jsx(Es,{data:ks,value:p,onChange:E,children:o.jsx(Ee,{label:"Change result mode",children:$r?o.jsx(Ee,{label:"Click to change mode",children:o.jsx(fe,{"aria-label":`Change result mode. Currently ${N}`,h:30,w:30,children:o.jsx(O,{path:N?.icon??wn})})}):o.jsx(pe,{size:"xs",radius:"xs","aria-label":"Change result mode",variant:"light",color:"slate",leftSection:N&&o.jsx(O,{path:N?.icon??wn}),children:N?.label??"Unknown"})})}),!$r&&o.jsx(Es,{data:Vi,value:g,onChange:w,children:o.jsx(Ee,{label:"Change result format",children:o.jsx(pe,{size:"xs",radius:"xs","aria-label":"Change format mode",variant:"light",color:"slate",leftSection:z?.icon&&o.jsx(O,{path:z.icon}),children:z?.label??g})})}),o.jsxs(pe,{size:"xs",radius:"xs",color:"slate",variant:l?"gradient":"light",style:{border:"none"},className:Cs.run,loading:c,onClick:x,rightSection:o.jsx(O,{path:Ra}),children:["Run ",_?"selection":"query"]})]}),children:[S&&p!=="live"&&o.jsx(ca,{bg:u?"slate.0":"slate.9",mb:"md",p:"md",onClick:()=>E("live"),style:{borderRadius:"var(--mantine-radius-lg"},children:o.jsxs(ne,{children:[o.jsx(O,{path:uu,c:"slate",size:"xl"}),o.jsx(K,{fw:500,c:"bright",children:"Click here to open Live Mode and view incoming live messages"})]})}),b===0?o.jsx(Ks,{h:"100%",mih:80,c:"slate",children:o.jsxs(je,{children:[o.jsx(O,{path:En,mx:"auto",size:"lg"}),"Execute a SurrealQL query to view the results here"]})}):o.jsx(G,{responses:v,selected:h-1,query:e,isLive:S})]})}const ym="_query-text_1tb3x_1",xm="_query-action_1tb3x_8",wm="_query_1tb3x_1",Sm="_tag_1tb3x_16",Cm="_tag-active_1tb3x_20",tn={queryText:ym,queryAction:xm,query:wm,tag:Sm,tagActive:Cm};function Em({opened:e,editor:t,onClose:n,onSaveQuery:r,onEditQuery:s}){const{addQueryTab:i,removeSavedQuery:c}=Le.getState(),{showContextMenu:a}=xi(),l=Le(x=>x.savedQueries),u=ar(),h=Pa(),[f,p]=d.useState(null),[g,v]=ct(""),b=h.length>0,m=f===null,y=d.useMemo(()=>{const x=g.toLowerCase();return l.filter(E=>(E.query.toLowerCase().includes(x)||E.name.toLowerCase().includes(x))&&(!f||E.tags.includes(f)))},[l,g,f]),S=A((x,E)=>{E?.stopPropagation(),n(),i({type:"config",query:x.query,name:x.name})}),C=A(x=>{u&&(n(),ss(t,x.query))}),D=A(x=>{c(x.id)});return d.useLayoutEffect(()=>{f&&!h.includes(f)&&p(null)},[h,f]),o.jsxs(Vr,{opened:e,onClose:n,position:"right",trapFocus:!1,children:[o.jsxs(ne,{mb:"md",children:[o.jsx(Qt,{children:"Saved queries"}),o.jsx(Ve,{}),o.jsx(Ee,{label:"Save current query",children:o.jsx(fe,{onClick:r,"aria-label":"Save current query",children:o.jsx(O,{path:cn})})}),o.jsx(fe,{onClick:n,"aria-label":"Close saved query drawer",children:o.jsx(O,{path:rt})})]}),o.jsx(ir,{autoFocus:!0,placeholder:"Search saved queries...",leftSection:o.jsx(O,{path:Sn}),value:g,spellCheck:!1,onChange:v,mb:"sm"}),b&&o.jsx(Ht,{w:"100%",scrollbars:"x",type:"scroll",children:o.jsxs(ne,{gap:6,pb:"sm",children:[o.jsx(pe,{size:"xs",color:"slate",className:be(tn.tag,m&&tn.tagActive),variant:m?"filled":"subtle",onClick:()=>p(null),children:"All queries"}),h.map((x,E)=>{const w=x===f;return o.jsx(pe,{size:"xs",color:"slate",className:be(tn.tag,w&&tn.tagActive),variant:w?"filled":"subtle",onClick:()=>p(x),children:x},E)})]})}),y.length===0&&o.jsx(K,{ta:"center",mt:"sm",c:"slate",children:"No queries to display"}),o.jsx(Ct,{styles:{content:{paddingInline:0},label:{paddingBlock:0},control:{paddingLeft:8}},children:y.map((x,E)=>o.jsxs(Ct.Item,{value:x.id,className:tn.query,onContextMenu:a([{key:"open",title:"Open in new tab",icon:o.jsx(O,{path:En}),onClick:()=>S(x)},{key:"replace",title:"Open in current tab",icon:o.jsx(O,{path:jn}),onClick:()=>C(x)},{key:"edit",title:"Edit query",icon:o.jsx(O,{path:du}),onClick:()=>s(x)},{key:"delete",title:"Delete query",color:"pink.7",icon:o.jsx(O,{path:Dn}),onClick:()=>D(x)}]),children:[o.jsx(Ct.Control,{children:o.jsxs(ne,{gap:"sm",mr:"md",h:46,children:[o.jsx(K,{c:"surreal",fw:600,children:x.name}),o.jsx(Ve,{}),o.jsx(Ee,{label:"Open in new tab",children:o.jsx(fe,{component:"div",variant:"gradient",className:tn.queryAction,onClick:w=>S(x,w),"aria-label":"Open query in new tab",children:o.jsx(O,{path:En,size:.9})})})]})}),o.jsxs(Ct.Panel,{p:0,px:4,children:[o.jsx(Sa,{value:x.query,language:"surrealql"}),x.tags.length>0&&o.jsx(ne,{mt:"sm",gap:"xs",children:x.tags.map((w,N)=>o.jsx(Vn,{size:"xs",color:"slate",radius:"sm",children:w},N))})]})]},E))})]})}const jm="_scroller_1rxfv_1",Lm="_query_1rxfv_6",Dm="_query-dragging_1rxfv_9",Mm="_query-live_1rxfv_12",Rm="_query-close_1rxfv_15",Fn={scroller:jm,query:Lm,queryDragging:Dm,queryLive:Mm,queryClose:Rm},Pm="_input_1o5iz_1",Nm="_decoration_1o5iz_13",ko={input:Pm,decoration:Nm},Im=({value:e,editable:t,activationMode:n,withDecoration:r,onChange:s,onEditableChange:i,onClick:c,onDoubleClick:a,...l})=>{const[u,h]=ct(e),[f,p]=El({defaultValue:!1,value:t,onChange:i}),g=A(m=>{m.stopPropagation(),p(!0),n==="click"?c?.(m):a?.(m)}),v=A(m=>{m.stopPropagation(),m.key==="Enter"&&(m.preventDefault(),m.target.blur())}),b=A(()=>{u!==e&&s(u),p(!1)});return d.useLayoutEffect(()=>{f&&h(e)},[f,e]),o.jsx(K,{w:"100%",ta:"start",role:f?void 0:"button",component:"div",onClick:n==="click"?g:void 0,onDoubleClick:n==="double-click"?g:void 0,...l,children:f?o.jsx(ir,{autoFocus:!0,w:"100%",variant:"unstyled",value:u,onChange:h,onKeyDownCapture:v,onBlur:b,onFocus:ni,classNames:{input:be(ko.input,r&&ko.decoration)}}):e})},Tm="_root_y7gil_1",km="_live-pulse_y7gil_1",Om={root:Tm,livePulse:km};function Am(e){const{className:t,color:n,...r}=e,s=n||"white";return o.jsx(ae,{className:be(Om.root,t),__vars:{"--ring-color":s},...r,children:o.jsx(O,{path:va,title:"Live query active",color:s,size:"xl"})})}function zm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const is=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Mn(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Ci(e){return"nodeType"in e}function Pe(e){var t,n;return e?Mn(e)?e:Ci(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Ei(e){const{Document:t}=Pe(e);return e instanceof t}function dr(e){return Mn(e)?!1:e instanceof Pe(e).HTMLElement}function Ic(e){return e instanceof Pe(e).SVGElement}function Rn(e){return e?Mn(e)?e.document:Ci(e)?Ei(e)?e:dr(e)||Ic(e)?e.ownerDocument:document:document:document}const Ge=is?d.useLayoutEffect:d.useEffect;function ji(e){const t=d.useRef(e);return Ge(()=>{t.current=e}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function $m(){const e=d.useRef(null),t=d.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=d.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Jn(e,t){t===void 0&&(t=[e]);const n=d.useRef(e);return Ge(()=>{n.current!==e&&(n.current=e)},t),n}function fr(e,t){const n=d.useRef();return d.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Qr(e){const t=ji(e),n=d.useRef(null),r=d.useCallback(s=>{s!==n.current&&t?.(s,n.current),n.current=s},[]);return[n,r]}function Hs(e){const t=d.useRef();return d.useEffect(()=>{t.current=e},[e]),t.current}let js={};function hr(e,t){return d.useMemo(()=>{if(t)return t;const n=js[e]==null?0:js[e]+1;return js[e]=n,e+"-"+n},[e,t])}function Tc(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,c)=>{const a=Object.entries(c);for(const[l,u]of a){const h=i[l];h!=null&&(i[l]=h+e*u)}return i},{...t})}}const dn=Tc(1),Zn=Tc(-1);function _m(e){return"clientX"in e&&"clientY"in e}function Li(e){if(!e)return!1;const{KeyboardEvent:t}=Pe(e.target);return t&&e instanceof t}function qm(e){if(!e)return!1;const{TouchEvent:t}=Pe(e.target);return t&&e instanceof t}function Qs(e){if(qm(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return _m(e)?{x:e.clientX,y:e.clientY}:null}const er=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[er.Translate.toString(e),er.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Oo="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Fm(e){return e.matches(Oo)?e:e.querySelector(Oo)}const Hm={display:"none"};function Qm(e){let{id:t,value:n}=e;return Re.createElement("div",{id:t,style:Hm},n)}function Wm(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Re.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Um(){const[e,t]=d.useState("");return{announce:d.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const kc=d.createContext(null);function Bm(e){const t=d.useContext(kc);d.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Vm(){const[e]=d.useState(()=>new Set),t=d.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[d.useCallback(r=>{let{type:s,event:i}=r;e.forEach(c=>{var a;return(a=c[s])==null?void 0:a.call(c,i)})},[e]),t]}const Gm={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Km={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Ym(e){let{announcements:t=Km,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=Gm}=e;const{announce:i,announcement:c}=Um(),a=hr("DndLiveRegion"),[l,u]=d.useState(!1);if(d.useEffect(()=>{u(!0)},[]),Bm(d.useMemo(()=>({onDragStart(f){let{active:p}=f;i(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:g}=f;t.onDragMove&&i(t.onDragMove({active:p,over:g}))},onDragOver(f){let{active:p,over:g}=f;i(t.onDragOver({active:p,over:g}))},onDragEnd(f){let{active:p,over:g}=f;i(t.onDragEnd({active:p,over:g}))},onDragCancel(f){let{active:p,over:g}=f;i(t.onDragCancel({active:p,over:g}))}}),[i,t])),!l)return null;const h=Re.createElement(Re.Fragment,null,Re.createElement(Qm,{id:r,value:s.draggable}),Re.createElement(Wm,{id:a,announcement:c}));return n?Nt.createPortal(h,n):h}var he;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(he||(he={}));function Wr(){}function Ao(e,t){return d.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Xm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Ke=Object.freeze({x:0,y:0});function Jm(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Zm(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function eg(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function zo(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function Oc(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}const Ac=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=zo(t),i=[];for(const c of r){const{id:a}=c,l=n.get(a);if(l){const u=zo(l),h=s.reduce((p,g,v)=>p+Jm(u[v],g),0),f=Number((h/4).toFixed(4));i.push({id:a,data:{droppableContainer:c,value:f}})}}return i.sort(Zm)};function tg(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),c=s-r,a=i-n;if(r<s&&n<i){const l=t.width*t.height,u=e.width*e.height,h=c*a,f=h/(l+u-h);return Number(f.toFixed(4))}return 0}const ng=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const i of r){const{id:c}=i,a=n.get(c);if(a){const l=tg(a,t);l>0&&s.push({id:c,data:{droppableContainer:i,value:l}})}}return s.sort(eg)};function rg(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function zc(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ke}function sg(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((c,a)=>({...c,top:c.top+e*a.y,bottom:c.bottom+e*a.y,left:c.left+e*a.x,right:c.right+e*a.x}),{...n})}}const ig=sg(1);function og(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function ag(e,t,n){const r=og(t);if(!r)return e;const{scaleX:s,scaleY:i,x:c,y:a}=r,l=e.left-c-(1-s)*parseFloat(n),u=e.top-a-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?e.width/s:e.width,f=i?e.height/i:e.height;return{width:h,height:f,top:u,right:l+h,bottom:u+f,left:l}}const cg={ignoreTransform:!1};function Pn(e,t){t===void 0&&(t=cg);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:h}=Pe(e).getComputedStyle(e);u&&(n=ag(n,u,h))}const{top:r,left:s,width:i,height:c,bottom:a,right:l}=n;return{top:r,left:s,width:i,height:c,bottom:a,right:l}}function $o(e){return Pn(e,{ignoreTransform:!0})}function lg(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function ug(e,t){return t===void 0&&(t=Pe(e).getComputedStyle(e)),t.position==="fixed"}function dg(e,t){t===void 0&&(t=Pe(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=t[s];return typeof i=="string"?n.test(i):!1})}function os(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(Ei(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!dr(s)||Ic(s)||n.includes(s))return n;const i=Pe(e).getComputedStyle(s);return s!==e&&dg(s,i)&&n.push(s),ug(s,i)?n:r(s.parentNode)}return e?r(e):n}function $c(e){const[t]=os(e,1);return t??null}function Ls(e){return!is||!e?null:Mn(e)?e:Ci(e)?Ei(e)||e===Rn(e).scrollingElement?window:dr(e)?e:null:null}function _c(e){return Mn(e)?e.scrollX:e.scrollLeft}function qc(e){return Mn(e)?e.scrollY:e.scrollTop}function Ws(e){return{x:_c(e),y:qc(e)}}var me;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(me||(me={}));function Fc(e){return!is||!e?!1:e===document.scrollingElement}function Hc(e){const t={x:0,y:0},n=Fc(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,c=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:c,isRight:a,maxScroll:r,minScroll:t}}const fg={x:.2,y:.2};function hg(e,t,n,r,s){let{top:i,left:c,right:a,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=fg);const{isTop:u,isBottom:h,isLeft:f,isRight:p}=Hc(e),g={x:0,y:0},v={x:0,y:0},b={height:t.height*s.y,width:t.width*s.x};return!u&&i<=t.top+b.height?(g.y=me.Backward,v.y=r*Math.abs((t.top+b.height-i)/b.height)):!h&&l>=t.bottom-b.height&&(g.y=me.Forward,v.y=r*Math.abs((t.bottom-b.height-l)/b.height)),!p&&a>=t.right-b.width?(g.x=me.Forward,v.x=r*Math.abs((t.right-b.width-a)/b.width)):!f&&c<=t.left+b.width&&(g.x=me.Backward,v.x=r*Math.abs((t.left+b.width-c)/b.width)),{direction:g,speed:v}}function pg(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:c}=window;return{top:0,left:0,right:i,bottom:c,width:i,height:c}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function Qc(e){return e.reduce((t,n)=>dn(t,Ws(n)),Ke)}function mg(e){return e.reduce((t,n)=>t+_c(n),0)}function gg(e){return e.reduce((t,n)=>t+qc(n),0)}function vg(e,t){if(t===void 0&&(t=Pn),!e)return;const{top:n,left:r,bottom:s,right:i}=t(e);$c(e)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const bg=[["x",["left","right"],mg],["y",["top","bottom"],gg]];class Di{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=os(n),s=Qc(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,c,a]of bg)for(const l of c)Object.defineProperty(this,l,{get:()=>{const u=a(r),h=s[i]-u;return this.rect[l]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Wn{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function yg(e){const{EventTarget:t}=Pe(e);return e instanceof t?e:Rn(e)}function Ds(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var qe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(qe||(qe={}));function _o(e){e.preventDefault()}function xg(e){e.stopPropagation()}var se;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"})(se||(se={}));const Wc={start:[se.Space,se.Enter],cancel:[se.Esc],end:[se.Space,se.Enter]},wg=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case se.Right:return{...n,x:n.x+25};case se.Left:return{...n,x:n.x-25};case se.Down:return{...n,y:n.y+25};case se.Up:return{...n,y:n.y-25}}};class Mi{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Wn(Rn(n)),this.windowListeners=new Wn(Pe(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(qe.Resize,this.handleCancel),this.windowListeners.add(qe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(qe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&vg(r),n(Ke)}handleKeyDown(t){if(Li(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=Wc,coordinateGetter:c=wg,scrollBehavior:a="smooth"}=s,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:Ke;this.referenceCoordinates||(this.referenceCoordinates=h);const f=c(t,{active:n,context:r.current,currentCoordinates:h});if(f){const p=Zn(f,h),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const m=t.code,{isTop:y,isRight:S,isLeft:C,isBottom:D,maxScroll:x,minScroll:E}=Hc(b),w=pg(b),N={x:Math.min(m===se.Right?w.right-w.width/2:w.right,Math.max(m===se.Right?w.left:w.left+w.width/2,f.x)),y:Math.min(m===se.Down?w.bottom-w.height/2:w.bottom,Math.max(m===se.Down?w.top:w.top+w.height/2,f.y))},z=m===se.Right&&!S||m===se.Left&&!C,_=m===se.Down&&!D||m===se.Up&&!y;if(z&&N.x!==f.x){const k=b.scrollLeft+p.x,G=m===se.Right&&k<=x.x||m===se.Left&&k>=E.x;if(G&&!p.y){b.scrollTo({left:k,behavior:a});return}G?g.x=b.scrollLeft-k:g.x=m===se.Right?b.scrollLeft-x.x:b.scrollLeft-E.x,g.x&&b.scrollBy({left:-g.x,behavior:a});break}else if(_&&N.y!==f.y){const k=b.scrollTop+p.y,G=m===se.Down&&k<=x.y||m===se.Up&&k>=E.y;if(G&&!p.x){b.scrollTo({top:k,behavior:a});return}G?g.y=b.scrollTop-k:g.y=m===se.Down?b.scrollTop-x.y:b.scrollTop-E.y,g.y&&b.scrollBy({top:-g.y,behavior:a});break}}this.handleMove(t,dn(Zn(f,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Mi.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Wc,onActivation:s}=t,{active:i}=n;const{code:c}=e.nativeEvent;if(r.start.includes(c)){const a=i.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),s?.({event:e.nativeEvent}),!0)}return!1}}];function qo(e){return!!(e&&"distance"in e)}function Fo(e){return!!(e&&"delay"in e)}class Ri{constructor(t,n,r){var s;r===void 0&&(r=yg(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:c}=i;this.props=t,this.events=n,this.document=Rn(c),this.documentListeners=new Wn(this.document),this.listeners=new Wn(r),this.windowListeners=new Wn(Pe(c)),this.initialCoordinates=(s=Qs(i))!=null?s:Ke,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),this.windowListeners.add(qe.Resize,this.handleCancel),this.windowListeners.add(qe.DragStart,_o),this.windowListeners.add(qe.VisibilityChange,this.handleCancel),this.windowListeners.add(qe.ContextMenu,_o),this.documentListeners.add(qe.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Fo(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(qo(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(qe.Click,xg,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(qe.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:c,options:{activationConstraint:a}}=i;if(!s)return;const l=(n=Qs(t))!=null?n:Ke,u=Zn(s,l);if(!r&&a){if(qo(a)){if(a.tolerance!=null&&Ds(u,a.tolerance))return this.handleCancel();if(Ds(u,a.distance))return this.handleStart()}return Fo(a)&&Ds(u,a.tolerance)?this.handleCancel():void 0}t.cancelable&&t.preventDefault(),c(l)}handleEnd(){const{onEnd:t}=this.props;this.detach(),t()}handleCancel(){const{onCancel:t}=this.props;this.detach(),t()}handleKeydown(t){t.code===se.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Sg={move:{name:"pointermove"},end:{name:"pointerup"}};class Pi extends Ri{constructor(t){const{event:n}=t,r=Rn(n.target);super(t,Sg,r)}}Pi.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Cg={move:{name:"mousemove"},end:{name:"mouseup"}};var Us;(function(e){e[e.RightClick=2]="RightClick"})(Us||(Us={}));class Eg extends Ri{constructor(t){super(t,Cg,Rn(t.event.target))}}Eg.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Us.RightClick?!1:(r?.({event:n}),!0)}}];const Ms={move:{name:"touchmove"},end:{name:"touchend"}};class jg extends Ri{constructor(t){super(t,Ms)}static setup(){return window.addEventListener(Ms.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ms.move.name,t)};function t(){}}}jg.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r?.({event:n}),!0)}}];var Un;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Un||(Un={}));var Ur;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ur||(Ur={}));function Lg(e){let{acceleration:t,activator:n=Un.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:c=5,order:a=Ur.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:p}=e;const g=Mg({delta:f,disabled:!i}),[v,b]=$m(),m=d.useRef({x:0,y:0}),y=d.useRef({x:0,y:0}),S=d.useMemo(()=>{switch(n){case Un.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Un.DraggableRect:return s}},[n,s,l]),C=d.useRef(null),D=d.useCallback(()=>{const E=C.current;if(!E)return;const w=m.current.x*y.current.x,N=m.current.y*y.current.y;E.scrollBy(w,N)},[]),x=d.useMemo(()=>a===Ur.TreeOrder?[...u].reverse():u,[a,u]);d.useEffect(()=>{if(!i||!u.length||!S){b();return}for(const E of x){if(r?.(E)===!1)continue;const w=u.indexOf(E),N=h[w];if(!N)continue;const{direction:z,speed:_}=hg(E,N,S,t,p);for(const k of["x","y"])g[k][z[k]]||(_[k]=0,z[k]=0);if(_.x>0||_.y>0){b(),C.current=E,v(D,c),m.current=_,y.current=z;return}}m.current={x:0,y:0},y.current={x:0,y:0},b()},[t,D,r,b,i,c,JSON.stringify(S),JSON.stringify(g),v,u,x,h,JSON.stringify(p)])}const Dg={x:{[me.Backward]:!1,[me.Forward]:!1},y:{[me.Backward]:!1,[me.Forward]:!1}};function Mg(e){let{delta:t,disabled:n}=e;const r=Hs(t);return fr(s=>{if(n||!r||!s)return Dg;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[me.Backward]:s.x[me.Backward]||i.x===-1,[me.Forward]:s.x[me.Forward]||i.x===1},y:{[me.Backward]:s.y[me.Backward]||i.y===-1,[me.Forward]:s.y[me.Forward]||i.y===1}}},[n,t,r])}function Rg(e,t){const n=t!==null?e.get(t):void 0,r=n?n.node.current:null;return fr(s=>{var i;return t===null?null:(i=r??s)!=null?i:null},[r,t])}function Pg(e,t){return d.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(c=>({eventName:c.eventName,handler:t(c.handler,r)}));return[...n,...i]},[]),[e,t])}var tr;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(tr||(tr={}));var Bs;(function(e){e.Optimized="optimized"})(Bs||(Bs={}));const Ho=new Map;function Ng(e,t){let{dragging:n,dependencies:r,config:s}=t;const[i,c]=d.useState(null),{frequency:a,measure:l,strategy:u}=s,h=d.useRef(e),f=m(),p=Jn(f),g=d.useCallback(function(y){y===void 0&&(y=[]),!p.current&&c(S=>S===null?y:S.concat(y.filter(C=>!S.includes(C))))},[p]),v=d.useRef(null),b=fr(y=>{if(f&&!n)return Ho;if(!y||y===Ho||h.current!==e||i!=null){const S=new Map;for(let C of e){if(!C)continue;if(i&&i.length>0&&!i.includes(C.id)&&C.rect.current){S.set(C.id,C.rect.current);continue}const D=C.node.current,x=D?new Di(l(D),D):null;C.rect.current=x,x&&S.set(C.id,x)}return S}return y},[e,i,n,f,l]);return d.useEffect(()=>{h.current=e},[e]),d.useEffect(()=>{f||g()},[n,f]),d.useEffect(()=>{i&&i.length>0&&c(null)},[JSON.stringify(i)]),d.useEffect(()=>{f||typeof a!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},a))},[a,f,g,...r]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:i!=null};function m(){switch(u){case tr.Always:return!1;case tr.BeforeDragging:return n;default:return!n}}}function Uc(e,t){return fr(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ig(e,t){return Uc(e,t)}function Tg(e){let{callback:t,disabled:n}=e;const r=ji(t),s=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return d.useEffect(()=>()=>s?.disconnect(),[s]),s}function as(e){let{callback:t,disabled:n}=e;const r=ji(t),s=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return d.useEffect(()=>()=>s?.disconnect(),[s]),s}function kg(e){return new Di(Pn(e),e)}function Qo(e,t,n){t===void 0&&(t=kg);const[r,s]=d.useReducer(a,null),i=Tg({callback(l){if(e)for(const u of l){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(e)){s();break}}}}),c=as({callback:s});return Ge(()=>{s(),e?(c?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),i?.disconnect())},[e]),r;function a(l){if(!e)return null;if(e.isConnected===!1){var u;return(u=l??n)!=null?u:null}const h=t(e);return JSON.stringify(l)===JSON.stringify(h)?l:h}}function Og(e){const t=Uc(e);return zc(e,t)}const Wo=[];function Ag(e){const t=d.useRef(e),n=fr(r=>e?r&&r!==Wo&&e&&t.current&&e.parentNode===t.current.parentNode?r:os(e):Wo,[e]);return d.useEffect(()=>{t.current=e},[e]),n}function zg(e){const[t,n]=d.useState(null),r=d.useRef(e),s=d.useCallback(i=>{const c=Ls(i.target);c&&n(a=>a?(a.set(c,Ws(c)),new Map(a)):null)},[]);return d.useEffect(()=>{const i=r.current;if(e!==i){c(i);const a=e.map(l=>{const u=Ls(l);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Ws(u)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=e}return()=>{c(e),c(i)};function c(a){a.forEach(l=>{const u=Ls(l);u?.removeEventListener("scroll",s)})}},[s,e]),d.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,c)=>dn(i,c),Ke):Qc(e):Ke,[e,t])}function Uo(e,t){t===void 0&&(t=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},t),d.useEffect(()=>{const r=e!==Ke;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Zn(e,n.current):Ke}function $g(e){d.useEffect(()=>{if(!is)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function _g(e,t){return d.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=c=>{i(c,t)},n},{}),[e,t])}function Bc(e){return d.useMemo(()=>e?lg(e):null,[e])}const Rs=[];function qg(e,t){t===void 0&&(t=Pn);const[n]=e,r=Bc(n?Pe(n):null),[s,i]=d.useReducer(a,Rs),c=as({callback:i});return e.length>0&&s===Rs&&i(),Ge(()=>{e.length?e.forEach(l=>c?.observe(l)):(c?.disconnect(),i())},[e]),s;function a(){return e.length?e.map(l=>Fc(l)?r:new Di(t(l),l)):Rs}}function Fg(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return dr(t)?t:e}function Hg(e){let{measure:t}=e;const[n,r]=d.useState(null),s=d.useCallback(u=>{for(const{target:h}of u)if(dr(h)){r(f=>{const p=t(h);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),i=as({callback:s}),c=d.useCallback(u=>{const h=Fg(u);i?.disconnect(),h&&i?.observe(h),r(h?t(h):null)},[t,i]),[a,l]=Qr(c);return d.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const Qg=[{sensor:Pi,options:{}},{sensor:Mi,options:{}}],Wg={current:{}},Ir={draggable:{measure:$o},droppable:{measure:$o,strategy:tr.WhileDragging,frequency:Bs.Optimized},dragOverlay:{measure:Pn}};class Bn extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Ug={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Bn,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Wr},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ir,measureDroppableContainers:Wr,windowRect:null,measuringScheduled:!1},Bg={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Wr,draggableNodes:new Map,over:null,measureDroppableContainers:Wr},cs=d.createContext(Bg),Vc=d.createContext(Ug);function Vg(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Bn}}}function Gg(e,t){switch(t.type){case he.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case he.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case he.DragEnd:case he.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case he.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Bn(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case he.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const c=new Bn(e.droppable.containers);return c.set(n,{...i,disabled:s}),{...e,droppable:{...e.droppable,containers:c}}}case he.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new Bn(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Kg(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=d.useContext(cs),i=Hs(r),c=Hs(n?.id);return d.useEffect(()=>{if(!t&&!r&&i&&c!=null){if(!Li(i)||document.activeElement===i.target)return;const a=s.get(c);if(!a)return;const{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[l.current,u.current]){if(!h)continue;const f=Fm(h);if(f){f.focus();break}}})}},[r,t,s,c,i]),null}function Yg(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,i)=>i({transform:s,...r}),n):n}function Xg(e){return d.useMemo(()=>({draggable:{...Ir.draggable,...e?.draggable},droppable:{...Ir.droppable,...e?.droppable},dragOverlay:{...Ir.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Jg(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const i=d.useRef(!1),{x:c,y:a}=typeof s=="boolean"?{x:s,y:s}:s;Ge(()=>{if(!c&&!a||!t){i.current=!1;return}if(i.current||!r)return;const u=t?.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=zc(h,r);if(c||(f.x=0),a||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=$c(u);p&&p.scrollBy({top:f.y,left:f.x})}},[t,c,a,r,n])}const Gc=d.createContext({...Ke,scaleX:1,scaleY:1});var gt;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(gt||(gt={}));const Zg=d.memo(function(t){var n,r,s,i;let{id:c,accessibility:a,autoScroll:l=!0,children:u,sensors:h=Qg,collisionDetection:f=ng,measuring:p,modifiers:g,...v}=t;const b=d.useReducer(Gg,void 0,Vg),[m,y]=b,[S,C]=Vm(),[D,x]=d.useState(gt.Uninitialized),E=D===gt.Initialized,{draggable:{active:w,nodes:N,translate:z},droppable:{containers:_}}=m,k=w?N.get(w):null,G=d.useRef({initial:null,translated:null}),B=d.useMemo(()=>{var ve;return w!=null?{id:w,data:(ve=k?.data)!=null?ve:Wg,rect:G}:null},[w,k]),P=d.useRef(null),[M,L]=d.useState(null),[T,I]=d.useState(null),U=Jn(v,Object.values(v)),Q=hr("DndDescribedBy",c),J=d.useMemo(()=>_.getEnabled(),[_]),Y=Xg(p),{droppableRects:R,measureDroppableContainers:$,measuringScheduled:W}=Ng(J,{dragging:E,dependencies:[z.x,z.y],config:Y.droppable}),H=Rg(N,w),q=d.useMemo(()=>T?Qs(T):null,[T]),X=ol(),Z=Ig(H,Y.draggable.measure);Jg({activeNode:w?N.get(w):null,config:X.layoutShiftCompensation,initialRect:Z,measure:Y.draggable.measure});const F=Qo(H,Y.draggable.measure,Z),ce=Qo(H?H.parentElement:null),oe=d.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:R,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:_,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),re=_.getNodeFor((n=oe.current.over)==null?void 0:n.id),de=Hg({measure:Y.dragOverlay.measure}),Oe=(r=de.nodeRef.current)!=null?r:H,Fe=E?(s=de.rect)!=null?s:F:null,Vt=!!(de.nodeRef.current&&de.rect),ge=Og(Vt?null:F),Gt=Bc(Oe?Pe(Oe):null),Ye=Ag(E?re??H:null),Xe=qg(Ye),Dt=Yg(g,{transform:{x:z.x-ge.x,y:z.y-ge.y,scaleX:1,scaleY:1},activatorEvent:T,active:B,activeNodeRect:F,containerNodeRect:ce,draggingNodeRect:Fe,over:oe.current.over,overlayNodeRect:de.rect,scrollableAncestors:Ye,scrollableAncestorRects:Xe,windowRect:Gt}),mr=q?dn(q,z):null,Ti=zg(Ye),Zc=Uo(Ti),el=Uo(Ti,[F]),Kt=dn(Dt,Zc),Yt=Fe?ig(Fe,Dt):null,Nn=B&&Yt?f({active:B,collisionRect:Yt,droppableRects:R,droppableContainers:J,pointerCoordinates:mr}):null,ki=Oc(Nn,"id"),[dt,Oi]=d.useState(null),tl=Vt?Dt:dn(Dt,el),nl=rg(tl,(i=dt?.rect)!=null?i:null,F),Ai=d.useCallback((ve,Ne)=>{let{sensor:Ie,options:ft}=Ne;if(P.current==null)return;const Ae=N.get(P.current);if(!Ae)return;const He=ve.nativeEvent,Je=new Ie({active:P.current,activeNode:Ae,event:He,options:ft,context:oe,onStart(Qe){const In=P.current;if(In==null)return;const Tn=N.get(In);if(!Tn)return;const{onDragStart:gr}=U.current,vr={active:{id:In,data:Tn.data,rect:G}};Nt.unstable_batchedUpdates(()=>{gr?.(vr),x(gt.Initializing),y({type:he.DragStart,initialCoordinates:Qe,active:In}),S({type:"onDragStart",event:vr})})},onMove(Qe){y({type:he.DragMove,coordinates:Qe})},onEnd:Xt(he.DragEnd),onCancel:Xt(he.DragCancel)});Nt.unstable_batchedUpdates(()=>{L(Je),I(ve.nativeEvent)});function Xt(Qe){return async function(){const{active:Tn,collisions:gr,over:vr,scrollAdjustedTranslate:$i}=oe.current;let kn=null;if(Tn&&$i){const{cancelDrop:On}=U.current;kn={activatorEvent:He,active:Tn,collisions:gr,delta:$i,over:vr},Qe===he.DragEnd&&typeof On=="function"&&await Promise.resolve(On(kn))&&(Qe=he.DragCancel)}P.current=null,Nt.unstable_batchedUpdates(()=>{y({type:Qe}),x(gt.Uninitialized),Oi(null),L(null),I(null);const On=Qe===he.DragEnd?"onDragEnd":"onDragCancel";if(kn){const ls=U.current[On];ls?.(kn),S({type:On,event:kn})}})}}},[N]),rl=d.useCallback((ve,Ne)=>(Ie,ft)=>{const Ae=Ie.nativeEvent,He=N.get(ft);if(P.current!==null||!He||Ae.dndKit||Ae.defaultPrevented)return;const Je={active:He};ve(Ie,Ne.options,Je)===!0&&(Ae.dndKit={capturedBy:Ne.sensor},P.current=ft,Ai(Ie,Ne))},[N,Ai]),zi=Pg(h,rl);$g(h),Ge(()=>{F&&D===gt.Initializing&&x(gt.Initialized)},[F,D]),d.useEffect(()=>{const{onDragMove:ve}=U.current,{active:Ne,activatorEvent:Ie,collisions:ft,over:Ae}=oe.current;if(!Ne||!Ie)return;const He={active:Ne,activatorEvent:Ie,collisions:ft,delta:{x:Kt.x,y:Kt.y},over:Ae};Nt.unstable_batchedUpdates(()=>{ve?.(He),S({type:"onDragMove",event:He})})},[Kt.x,Kt.y]),d.useEffect(()=>{const{active:ve,activatorEvent:Ne,collisions:Ie,droppableContainers:ft,scrollAdjustedTranslate:Ae}=oe.current;if(!ve||P.current==null||!Ne||!Ae)return;const{onDragOver:He}=U.current,Je=ft.get(ki),Xt=Je&&Je.rect.current?{id:Je.id,rect:Je.rect.current,data:Je.data,disabled:Je.disabled}:null,Qe={active:ve,activatorEvent:Ne,collisions:Ie,delta:{x:Ae.x,y:Ae.y},over:Xt};Nt.unstable_batchedUpdates(()=>{Oi(Xt),He?.(Qe),S({type:"onDragOver",event:Qe})})},[ki]),Ge(()=>{oe.current={activatorEvent:T,active:B,activeNode:H,collisionRect:Yt,collisions:Nn,droppableRects:R,draggableNodes:N,draggingNode:Oe,draggingNodeRect:Fe,droppableContainers:_,over:dt,scrollableAncestors:Ye,scrollAdjustedTranslate:Kt},G.current={initial:Fe,translated:Yt}},[B,H,Nn,Yt,N,Oe,Fe,R,_,dt,Ye,Kt]),Lg({...X,delta:z,draggingRect:Yt,pointerCoordinates:mr,scrollableAncestors:Ye,scrollableAncestorRects:Xe});const sl=d.useMemo(()=>({active:B,activeNode:H,activeNodeRect:F,activatorEvent:T,collisions:Nn,containerNodeRect:ce,dragOverlay:de,draggableNodes:N,droppableContainers:_,droppableRects:R,over:dt,measureDroppableContainers:$,scrollableAncestors:Ye,scrollableAncestorRects:Xe,measuringConfiguration:Y,measuringScheduled:W,windowRect:Gt}),[B,H,F,T,Nn,ce,de,N,_,R,dt,$,Ye,Xe,Y,W,Gt]),il=d.useMemo(()=>({activatorEvent:T,activators:zi,active:B,activeNodeRect:F,ariaDescribedById:{draggable:Q},dispatch:y,draggableNodes:N,over:dt,measureDroppableContainers:$}),[T,zi,B,F,y,Q,N,dt,$]);return Re.createElement(kc.Provider,{value:C},Re.createElement(cs.Provider,{value:il},Re.createElement(Vc.Provider,{value:sl},Re.createElement(Gc.Provider,{value:nl},u)),Re.createElement(Kg,{disabled:a?.restoreFocus===!1})),Re.createElement(Ym,{...a,hiddenTextDescribedById:Q}));function ol(){const ve=M?.autoScrollEnabled===!1,Ne=typeof l=="object"?l.enabled===!1:l===!1,Ie=E&&!ve&&!Ne;return typeof l=="object"?{...l,enabled:Ie}:{enabled:Ie}}}),ev=d.createContext(null),Bo="button",tv="Droppable";function nv(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const i=hr(tv),{activators:c,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:p}=d.useContext(cs),{role:g=Bo,roleDescription:v="draggable",tabIndex:b=0}=s??{},m=l?.id===t,y=d.useContext(m?Gc:ev),[S,C]=Qr(),[D,x]=Qr(),E=_g(c,t),w=Jn(n);Ge(()=>(f.set(t,{id:t,key:i,node:S,activatorNode:D,data:w}),()=>{const z=f.get(t);z&&z.key===i&&f.delete(t)}),[f,t]);const N=d.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":r,"aria-pressed":m&&g===Bo?!0:void 0,"aria-roledescription":v,"aria-describedby":h.draggable}),[r,g,b,m,v,h.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:N,isDragging:m,listeners:r?void 0:E,node:S,over:p,setNodeRef:C,setActivatorNodeRef:x,transform:y}}function rv(){return d.useContext(Vc)}const sv="Droppable",iv={timeout:25};function ov(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const i=hr(sv),{active:c,dispatch:a,over:l,measureDroppableContainers:u}=d.useContext(cs),h=d.useRef({disabled:n}),f=d.useRef(!1),p=d.useRef(null),g=d.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:m}={...iv,...s},y=Jn(b??r),S=d.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(y.current)?y.current:[y.current]),g.current=null},m)},[m]),C=as({callback:S,disabled:v||!c}),D=d.useCallback((N,z)=>{C&&(z&&(C.unobserve(z),f.current=!1),N&&C.observe(N))},[C]),[x,E]=Qr(D),w=Jn(t);return d.useEffect(()=>{!C||!x.current||(C.disconnect(),f.current=!1,C.observe(x.current))},[x,C]),Ge(()=>(a({type:he.RegisterDroppable,element:{id:r,key:i,disabled:n,node:x,rect:p,data:w}}),()=>a({type:he.UnregisterDroppable,key:i,id:r})),[r]),d.useEffect(()=>{n!==h.current.disabled&&(a({type:he.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,a]),{active:c,rect:p,isOver:l?.id===r,node:x,over:l,setNodeRef:E}}function Ni(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function av(e,t){return e.reduce((n,r,s)=>{const i=t.get(r);return i&&(n[s]=i),n},Array(e.length))}function jr(e){return e!==null&&e>=0}function cv(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function lv(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Lr={scaleX:1,scaleY:1},uv=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:s,overIndex:i,index:c}=e;const a=(t=n[s])!=null?t:r;if(!a)return null;const l=dv(n,c,s);if(c===s){const u=n[i];return u?{x:s<i?u.left+u.width-(a.left+a.width):u.left-a.left,y:0,...Lr}:null}return c>s&&c<=i?{x:-a.width-l,y:0,...Lr}:c<s&&c>=i?{x:a.width+l,y:0,...Lr}:{x:0,y:0,...Lr}};function dv(e,t,n){const r=e[t],s=e[t-1],i=e[t+1];return!r||!s&&!i?0:n<t?s?r.left-(s.left+s.width):i.left-(r.left+r.width):i?i.left-(r.left+r.width):r.left-(s.left+s.width)}const Ii=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const i=Ni(t,r,n),c=t[s],a=i[s];return!a||!c?null:{x:a.left-c.left,y:a.top-c.top,scaleX:a.width/c.width,scaleY:a.height/c.height}},Dr={scaleX:1,scaleY:1},fv=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:c}=e;const a=(t=i[n])!=null?t:r;if(!a)return null;if(s===n){const u=i[c];return u?{x:0,y:n<c?u.top+u.height-(a.top+a.height):u.top-a.top,...Dr}:null}const l=hv(i,s,n);return s>n&&s<=c?{x:0,y:-a.height-l,...Dr}:s<n&&s>=c?{x:0,y:a.height+l,...Dr}:{x:0,y:0,...Dr}};function hv(e,t,n){const r=e[t],s=e[t-1],i=e[t+1];return r?n<t?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Kc="Sortable",Yc=Re.createContext({activeIndex:-1,containerId:Kc,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ii,disabled:{draggable:!1,droppable:!1}});function pv(e){let{children:t,id:n,items:r,strategy:s=Ii,disabled:i=!1}=e;const{active:c,dragOverlay:a,droppableRects:l,over:u,measureDroppableContainers:h}=rv(),f=hr(Kc,n),p=a.rect!==null,g=d.useMemo(()=>r.map(E=>typeof E=="object"&&"id"in E?E.id:E),[r]),v=c!=null,b=c?g.indexOf(c.id):-1,m=u?g.indexOf(u.id):-1,y=d.useRef(g),S=!cv(g,y.current),C=m!==-1&&b===-1||S,D=lv(i);Ge(()=>{S&&v&&h(g)},[S,g,v,h]),d.useEffect(()=>{y.current=g},[g]);const x=d.useMemo(()=>({activeIndex:b,containerId:f,disabled:D,disableTransforms:C,items:g,overIndex:m,useDragOverlay:p,sortedRects:av(g,l),strategy:s}),[b,f,D.draggable,D.droppable,C,g,m,l,p,s]);return Re.createElement(Yc.Provider,{value:x},t)}const mv=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return Ni(n,r,s).indexOf(t)},gv=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:i,newIndex:c,previousItems:a,previousContainerId:l,transition:u}=e;return!u||!r||a!==i&&s===c?!1:n?!0:c!==s&&t===l},vv={duration:200,easing:"ease"},Xc="transform",bv=er.Transition.toString({property:Xc,duration:0,easing:"linear"}),yv={roleDescription:"sortable"};function xv(e){let{disabled:t,index:n,node:r,rect:s}=e;const[i,c]=d.useState(null),a=d.useRef(n);return Ge(()=>{if(!t&&n!==a.current&&r.current){const l=s.current;if(l){const u=Pn(r.current,{ignoreTransform:!0}),h={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(h.x||h.y)&&c(h)}}n!==a.current&&(a.current=n)},[t,n,r,s]),d.useEffect(()=>{i&&c(null)},[i]),i}function wv(e){let{animateLayoutChanges:t=gv,attributes:n,disabled:r,data:s,getNewIndex:i=mv,id:c,strategy:a,resizeObserverConfig:l,transition:u=vv}=e;const{items:h,containerId:f,activeIndex:p,disabled:g,disableTransforms:v,sortedRects:b,overIndex:m,useDragOverlay:y,strategy:S}=d.useContext(Yc),C=Sv(r,g),D=h.indexOf(c),x=d.useMemo(()=>({sortable:{containerId:f,index:D,items:h},...s}),[f,s,D,h]),E=d.useMemo(()=>h.slice(h.indexOf(c)),[h,c]),{rect:w,node:N,isOver:z,setNodeRef:_}=ov({id:c,data:x,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...l}}),{active:k,activatorEvent:G,activeNodeRect:B,attributes:P,setNodeRef:M,listeners:L,isDragging:T,over:I,setActivatorNodeRef:U,transform:Q}=nv({id:c,data:x,attributes:{...yv,...n},disabled:C.draggable}),J=zm(_,M),Y=!!k,R=Y&&!v&&jr(p)&&jr(m),$=!y&&T,W=$&&R?Q:null,q=R?W??(a??S)({rects:b,activeNodeRect:B,activeIndex:p,overIndex:m,index:D}):null,X=jr(p)&&jr(m)?i({id:c,items:h,activeIndex:p,overIndex:m}):D,Z=k?.id,F=d.useRef({activeId:Z,items:h,newIndex:X,containerId:f}),ce=h!==F.current.items,oe=t({active:k,containerId:f,isDragging:T,isSorting:Y,id:c,index:D,items:h,newIndex:F.current.newIndex,previousItems:F.current.items,previousContainerId:F.current.containerId,transition:u,wasDragging:F.current.activeId!=null}),re=xv({disabled:!oe,index:D,node:N,rect:w});return d.useEffect(()=>{Y&&F.current.newIndex!==X&&(F.current.newIndex=X),f!==F.current.containerId&&(F.current.containerId=f),h!==F.current.items&&(F.current.items=h)},[Y,X,f,h]),d.useEffect(()=>{if(Z===F.current.activeId)return;if(Z&&!F.current.activeId){F.current.activeId=Z;return}const Oe=setTimeout(()=>{F.current.activeId=Z},50);return()=>clearTimeout(Oe)},[Z]),{active:k,activeIndex:p,attributes:P,data:x,rect:w,index:D,newIndex:X,items:h,isOver:z,isSorting:Y,isDragging:T,listeners:L,node:N,overIndex:m,over:I,setNodeRef:J,setActivatorNodeRef:U,setDroppableNodeRef:_,setDraggableNodeRef:M,transform:re??q,transition:de()};function de(){if(re||ce&&F.current.newIndex===D)return bv;if(!($&&!Li(G)||!u)&&(Y||oe))return er.Transition.toString({...u,property:Xc})}}function Sv(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}function Br(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Cv=[se.Down,se.Right,se.Up,se.Left],Ev=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:i,over:c,scrollableAncestors:a}}=t;if(Cv.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=s.get(f.id);if(p)switch(e.code){case se.Down:r.top<p.top&&l.push(f);break;case se.Up:r.top>p.top&&l.push(f);break;case se.Left:r.left>p.left&&l.push(f);break;case se.Right:r.left<p.left&&l.push(f);break}});const u=Ac({collisionRect:r,droppableRects:s,droppableContainers:l});let h=Oc(u,"id");if(h===c?.id&&u.length>1&&(h=u[1].id),h!=null){const f=i.get(n.id),p=i.get(h),g=p?s.get(p.id):null,v=p?.node.current;if(v&&g&&f&&p){const m=os(v).some((E,w)=>a[w]!==E),y=Jc(f,p),S=jv(f,p),C=m||!y?{x:0,y:0}:{x:S?r.width-g.width:0,y:S?r.height-g.height:0},D={x:g.left,y:g.top};return C.x&&C.y?D:Zn(D,C)}}}};function Jc(e,t){return!Br(e)||!Br(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function jv(e,t){return!Br(e)||!Br(t)||!Jc(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Lv=e=>{let{transform:t}=e;return{...t,y:0}};function Dv(e,t,n){const r={...e};return t.top+e.y<=n.top?r.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(r.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?r.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(r.x=n.left+n.width-t.right),r}const Mv=e=>{let{transform:t}=e;return{...t,x:0}},Rv=e=>{let{transform:t,draggingNodeRect:n,windowRect:r}=e;return!n||!r?t:Dv(t,n,r)};function Pv({item:e,children:t,disabled:n,options:r}){const{index:s,isDragging:i,attributes:c,listeners:a,setNodeRef:l,transform:u,transition:h}=wv({id:e.id,disabled:n,...r}),f={cursor:"grab"},p={transform:er.Translate.toString(u),transition:h,zIndex:i?9999:0},g={item:e,index:s,isDragging:i,handleProps:{...c,...a,style:f}};return o.jsx("div",{ref:l,style:p,children:t(g)})}const Nv={vertical:[fv,Mv],horizontal:[uv,Lv],grid:[Ii,null]};function Iv(e){return Xm(Ao(Pi,{activationConstraint:e}),Ao(Mi,{coordinateGetter:Ev}))}function Tv(e){return Nv[e||"vertical"]}function kv(e){const[t,n]=Tv(e.direction),r=Iv(e.constraint),s=A(i=>{const{active:c,over:a}=i;if(!a||c.id===a.id)return;const l=e.items.findIndex(f=>f.id===c.id),u=e.items.findIndex(f=>f.id===a.id),h=Ni(e.items,l,u);e.onSorted(h)});return o.jsx(Zg,{sensors:r,collisionDetection:Ac,onDragStart:e.onSorting,onDragEnd:s,modifiers:[Rv,...n?[n]:[]],children:o.jsx(pv,{items:e.items,strategy:t,children:e.items.map(i=>o.jsx(Pv,{item:i,disabled:e.disabled??!1,children:e.children},i.id))})})}const Ov={config:En,file:Na};function Av({query:e,queries:t,isActive:n,isLive:r,isDragging:s,onActivate:i,onRemoveQuery:c,...a}){const{addQueryTab:l,updateQueryTab:u}=Le.getState(),{showContextMenu:h}=xi(),[f,p]=d.useState(!1),[g]=_t("behavior","queryQuickClose"),v=st(),b=le.platform==="darwin"?"Finder":"Explorer",m=A(()=>{i(e.id)}),y=A((x,E)=>{const w=t.findIndex(N=>N.id===x);for(const[N,z]of t.entries())z.id!==x&&(E===0||E===-1&&N<w||E===1&&N>w)&&c(z.id)}),S=A((x,E)=>{const w=t.filter(z=>z.id!==x).map(z=>z.name??""),N=fu(E||"New query",w);u({id:x,name:N})}),C=A(x=>{x.stopPropagation(),c(e.id)}),D=h([{key:"open",title:"Open",icon:o.jsx(O,{path:da}),onClick:m},{key:"duplicate",title:"Duplicate",icon:o.jsx(O,{path:ri}),onClick:()=>{l({type:"config",name:e.name?.replace(/ \d+$/,""),query:e.query,variables:e.variables})}},{key:"rename",title:"Rename",icon:o.jsx(O,{path:jn}),onClick:()=>p(!0)},{hidden:e.type!=="file",key:"open-in-explorer",title:`Reveal in ${b}`,icon:o.jsx(O,{path:Sn}),onClick:()=>{le instanceof Or&&le.openInExplorer(e)}},{key:"close-div"},{key:"close",title:"Close",disabled:t.length===1,onClick:()=>c(e.id)},{key:"close-others",title:"Close Others",disabled:t.length===1,onClick:()=>y(e.id,0)},{key:"close-before",title:"Close queries Before",disabled:t.length===1||t.findIndex(x=>x.id===e.id)===0,onClick:()=>y(e.id,-1)},{key:"close-after",title:"Close queries After",disabled:t.length===1||t.findIndex(x=>x.id===e.id)>=t.length-1,onClick:()=>y(e.id,1)}]);return o.jsx(qs,{isActive:n,onClick:m,className:be(Fn.query,s&&Fn.queryDragging),onContextMenu:D,leftSection:o.jsx(O,{path:Ov[e.type]}),rightSection:o.jsxs(o.Fragment,{children:[r&&o.jsx(Am,{className:Fn.queryLive,color:n?"white":"red",mr:-4}),t.length>1&&g&&o.jsx(fe,{size:"sm",component:"div",variant:"transparent",className:Fn.queryClose,onClick:C,color:n&&v?"white":void 0,"aria-label":"Close query tab",children:o.jsx(O,{path:rt,size:"sm"})})]}),...a,children:o.jsx(Im,{value:e.name||"",onChange:x=>S(e.id,x),activationMode:"double-click",editable:f,onEditableChange:p,withDecoration:!0,style:{outline:"none",textOverflow:"ellipsis",overflow:"hidden"}})},e.id)}function zv(e){const{removeQueryState:t}=Ar.getState(),{updateCurrentConnection:n,addQueryTab:r,removeQueryTab:s,setActiveQueryTab:i}=Le.getState(),{queries:c,activeQuery:a}=lr(),l=ti(v=>v.liveTabs),u=st(),h=A(()=>{r({type:"config"})}),f=A(v=>{s(v),La(v),t(v),le instanceof Or&&le.pruneQueryFiles()}),p=A(v=>{n({queries:v})}),g=A(()=>{n({queryTabList:!1})});return ot("new-query",h),ot("close-query",()=>{a&&f(a)}),o.jsx(rs,{icon:Ma,title:"Queries",style:{flexShrink:0},infoSection:o.jsx(Vn,{color:u?"slate.0":"slate.9",radius:"sm",c:"inherit",children:c.length}),rightSection:o.jsxs(o.Fragment,{children:[o.jsx(_s,{label:"Hide queries",onClick:g,children:o.jsx(O,{path:wa})}),o.jsx(_s,{label:"New query",onClick:h,children:o.jsx(O,{path:cn})})]}),children:o.jsxs(je,{pos:"absolute",top:0,left:12,right:12,bottom:12,gap:0,children:[o.jsx(Ht,{flex:1,classNames:{viewport:Fn.scroller},children:o.jsx(je,{gap:"xs",pb:"md",children:o.jsx(kv,{items:c,direction:"vertical",constraint:{distance:10},onSorted:p,children:({item:v,handleProps:b,isDragging:m})=>{const y=v.id===a,S=l.has(v.id);return o.jsx(Av,{query:v,queries:c,isActive:y,isLive:S,isDragging:m,onActivate:i,onRemoveQuery:f,...b},v.id)}})})}),o.jsx(sr,{my:"xs"}),o.jsx(qs,{leftSection:o.jsx(O,{path:zr}),rightSection:o.jsx(O,{path:Cn}),onClick:e.openSaved,children:"Saved queries"}),o.jsx(qs,{leftSection:o.jsx(O,{path:Ia}),rightSection:o.jsx(O,{path:Cn}),onClick:e.openHistory,children:"Query history"})]})})}function $v({isValid:e,switchPortal:t,corners:n,lineNumbers:r,editor:s,setIsValid:i,closeVariables:c}){const{updateQueryTab:a}=Le.getState(),l=ar(),[u,h]=d.useState(null),f=Rc(p=>{if(l)try{const g=p||"",v=Sd(Cd.from_string(g).to_cbor().buffer);if(typeof v!="object"||Array.isArray(v))throw new TypeError("Must be object");a({id:l.id,variables:g}),i(!0)}catch{i(!1)}},50);return d.useEffect(()=>{u&&s&&hu(u,s)},[u,s]),o.jsx(rs,{title:"Variables",icon:Ea,radius:n,rightSection:t?o.jsx(Fa,{node:t}):o.jsxs(ne,{gap:"xs",children:[!e&&o.jsx(Vn,{color:"red",variant:"light",children:"Invalid syntax"}),o.jsx(fe,{color:"slate",onClick:c,"aria-label":"Close variables panel",children:o.jsx(O,{path:rt})})]}),children:o.jsx(Wt,{value:l?.variables||"",onChange:f,onMount:h,lineNumbers:r,extensions:[Lt(),ei(),pu,la.high(ua.of(Ca))]})})}const Ps=xf(),Vo=d.memo(nm),Go=d.memo($v),_v=d.memo(bm);function vb(){const{saveQuery:e,updateQueryTab:t}=Le.getState(),{queryTabList:n}=lr(),r=mu(),[s]=_t("appearance","queryOrientation"),[i,c]=d.useState(new sn),[a,l]=d.useState(!0),[u,h]=Hn(),[f,p]=Hn(),[g,v]=d.useState(),b=Pa(),m=ar(),[y,S]=Hn(),[C,D]=d.useState(""),[x,E]=ct(""),[w,N]=ct(""),[z,_]=ct([]),k=le instanceof hs?le.appearance:"normal",G=le instanceof hs?le.corners:void 0,B=A(async()=>{m&&(D(""),_([]),E(m.name),N(m.query),S.open())}),P=A(async q=>{m&&(D(q.id),_(q.tags),E(q.name),N(q.query),S.open())}),M=A(async()=>{!m||!x||(e({id:C||gu(),name:x,query:w,tags:z}),S.close(),Xs.capture("query_save"))}),L=!!m?.showVariables,T=A(q=>{m&&t({id:m?.id,showVariables:q})}),I=A(()=>{T(!1)}),U=s==="horizontal"?"vertical":"horizontal",[Q]=_t("appearance","queryLineNumbers"),J=le instanceof hs?le.nonumbers:!Q;ot("open-saved-queries",p.open),ot("open-query-history",h.open),ot("save-query",B),ot("toggle-variables",()=>T(!L)),ot("run-query",()=>{i&&Da(i)}),pa(vu,q=>{i&&ss(i,q)});const[Y,R]=Co(275),[$,W]=Co(48,"height"),H=m&&o.jsx(ae,{flex:1,h:"100%",ref:W,children:o.jsxs(Rr,{direction:s,children:[o.jsx(Pt,{minSize:15,children:$r?L?o.jsx(Go,{isValid:a,switchPortal:Ps,setIsValid:l,closeVariables:I,editor:i,corners:G,lineNumbers:!J}):o.jsx(Vo,{corners:G,editor:i,activeTab:m,switchPortal:Ps,selection:g,showVariables:L,lineNumbers:!J,onSaveQuery:B,setShowVariables:T,onSelectionChange:v,onEditorMounted:c}):o.jsxs(Rr,{direction:U,children:[o.jsx(Pt,{id:"query",order:0,minSize:35,children:o.jsx(Vo,{activeTab:m,editor:i,showVariables:L,selection:g,lineNumbers:!J,onSaveQuery:B,setShowVariables:T,onSelectionChange:v,onEditorMounted:c})}),L&&o.jsxs(o.Fragment,{children:[o.jsx(ws,{}),o.jsx(Pt,{id:"variables",order:1,defaultSize:40,minSize:35,children:o.jsx(Go,{isValid:a,setIsValid:l,closeVariables:I,lineNumbers:!J,editor:i})})]})]})}),o.jsx(ws,{}),o.jsx(Pt,{minSize:s==="horizontal"?35:$,defaultSize:50,children:o.jsx(_v,{activeTab:m,selection:g,editor:i,corners:G})})]})});return o.jsxs(je,{gap:"md",h:"100%",children:[o.jsx(yf,{node:Ps,children:o.jsx(jl,{data:["Query","Variables"],value:L?"Variables":"Query",onChange:()=>T(!L),className:Yp.switcher,radius:"xs"})}),$r?o.jsxs(o.Fragment,{children:[k==="normal"&&o.jsxs(ne,{children:[o.jsx(Wf,{href:"https://surrealdb.com/surrealist",children:o.jsxs(ne,{children:[o.jsx(Fi,{h:16,src:wh}),o.jsx(Fi,{src:r,style:{pointerEvents:"none"},height:20,width:20})]})}),o.jsx(Ve,{})]}),o.jsx(ae,{flex:1,children:H})]}):o.jsx(ae,{flex:1,ref:R,style:{opacity:Y===0?0:1},children:o.jsxs(Rr,{direction:"horizontal",children:[n&&o.jsxs(o.Fragment,{children:[o.jsx(Pt,{defaultSize:Y,minSize:Y,maxSize:35,id:"tabs",order:1,children:o.jsx(zv,{openHistory:h.open,openSaved:p.open})}),o.jsx(ws,{})]}),o.jsx(Pt,{id:"content",order:2,children:H})]})}),o.jsx(Zp,{opened:u,editor:i,onClose:h.close}),o.jsx(Em,{opened:f,editor:i,onClose:p.close,onSaveQuery:B,onEditQuery:P}),o.jsx(Gs,{zIndex:201,opened:y,onClose:S.close,trapFocus:!1,title:o.jsx(Qt,{children:C?"Edit saved query":"Save query"}),children:o.jsx(sf,{onSubmit:M,children:o.jsxs(je,{children:[o.jsx(ir,{label:"Name",autoFocus:!0,value:x,spellCheck:!1,onChange:E,onFocus:ni}),o.jsx(Ll,{data:b,value:z,onChange:_,label:o.jsxs(ne,{gap:4,children:["Labels",o.jsx(K,{span:!0,size:"xs",c:"slate",children:"(optional)"})]})}),C&&o.jsx(fa,{label:"Query",value:w,onChange:N,multiline:!0,placeholder:"SELECT * FROM something...",extensions:[Lt()]}),o.jsxs(ne,{children:[o.jsx(pe,{onClick:S.close,variant:"light",color:"slate",children:"Close"}),o.jsx(Ve,{}),o.jsx(pe,{type:"submit",disabled:!x,variant:"gradient",rightSection:o.jsx(O,{path:or}),children:"Save"})]})]})})})]})}class pt{constructor(t){this.options=t}}class Ko{constructor(t){this.options=t}}class Yo{constructor(t){this.options=t}}class ze{constructor(t){this.options=t}}function qv(){const{themes:e,syntax_themes:t,cloud_endpoints:n}=Os.store,r=[];return Rt&&r.push({name:"Window",preferences:[{name:"Always on top",description:"Keep the window above all other windows",controller:new pt({reader:s=>s.settings.behavior.windowPinned,writer:(s,i)=>{s.settings.behavior.windowPinned=i}})},{name:"Window scale",description:"The zoom level of the window",controller:new ze({options:Gi,reader:s=>s.settings.appearance.windowScale.toString(),writer:(s,i)=>{s.settings.appearance.windowScale=Number.parseFloat(i)}})}]}),r.push({name:"Appearance",preferences:[...Ze(e&&{name:"Theme",description:"The color scheme of the application",controller:new ze({options:bu,reader:s=>s.settings.appearance.colorScheme,writer:(s,i)=>{s.settings.appearance.colorScheme=i}})}),...Ze(t&&{name:"Syntax theme",description:"The color scheme of highlighted code",controller:new ze({options:yu,reader:s=>s.settings.appearance.syntaxTheme,writer:(s,i)=>{s.settings.appearance.syntaxTheme=i}})}),{name:"Sidebar",description:"Control the appearance of the sidebar",controller:new ze({options:xu,reader:s=>s.settings.appearance.sidebarMode,writer:(s,i)=>{s.settings.appearance.sidebarMode=i}})},{name:"Editor scale",description:"The zoom level of all code editors",controller:new ze({options:Gi,reader:s=>s.settings.appearance.editorScale.toString(),writer:(s,i)=>{s.settings.appearance.editorScale=Number.parseFloat(i)}})}]},{name:"Connection",preferences:[{name:"Version check timeout",description:"The maximum time to wait for a version check",controller:new Ko({reader:s=>s.settings.behavior.versionCheckTimeout,writer:(s,i)=>{s.settings.behavior.versionCheckTimeout=i}})},{name:"Reconnect interval",description:"The time to wait before reconnecting",controller:new Ko({reader:s=>s.settings.behavior.reconnectInterval,writer:(s,i)=>{s.settings.behavior.reconnectInterval=i}})}]},{name:"Editors",preferences:[{name:"Suggest table names",description:"Automatically suggest table names",controller:new pt({reader:s=>s.settings.behavior.tableSuggest,writer:(s,i)=>{s.settings.behavior.tableSuggest=i}})},{name:"Suggest param names",description:"Automatically suggest variable names",controller:new pt({reader:s=>s.settings.behavior.variableSuggest,writer:(s,i)=>{s.settings.behavior.variableSuggest=i}})}]},{name:"Line numbers",preferences:[{name:"Query editor",description:"Show line numbers in the query view editor",controller:new pt({reader:s=>s.settings.appearance.queryLineNumbers,writer:(s,i)=>{s.settings.appearance.queryLineNumbers=i}})},{name:"Record inspector",description:"Show line numbers in the record inspector",controller:new pt({reader:s=>s.settings.appearance.inspectorLineNumbers,writer:(s,i)=>{s.settings.appearance.inspectorLineNumbers=i}})},{name:"Function editor",description:"Show line numbers in the functions view editor",controller:new pt({reader:s=>s.settings.appearance.functionLineNumbers,writer:(s,i)=>{s.settings.appearance.functionLineNumbers=i}})}]},{name:"Query view",preferences:[{name:"Default result mode",description:"The default result view mode for new queries",controller:new ze({options:ks,reader:s=>s.settings.appearance.defaultResultMode,writer:(s,i)=>{s.settings.appearance.defaultResultMode=i}})},{name:"Query validation",description:"Validate queries for potential issues",controller:new pt({reader:s=>s.settings.behavior.queryErrorChecker,writer:(s,i)=>{s.settings.behavior.queryErrorChecker=i}})},{name:"Orientation",description:"The orientation of the query and result panels",controller:new ze({options:wu,reader:s=>s.settings.appearance.queryOrientation,writer:(s,i)=>{s.settings.appearance.queryOrientation=i}})},{name:"Quick query closing",description:"Display query close buttons on hover",controller:new pt({reader:s=>s.settings.behavior.queryQuickClose,writer:(s,i)=>{s.settings.behavior.queryQuickClose=i}})}]},{name:"Designer view",preferences:[{name:"Default line style",description:"The default appearance of relations",controller:new ze({options:$n(Su),reader:s=>s.settings.appearance.defaultDiagramLineStyle,writer:(s,i)=>{s.settings.appearance.defaultDiagramLineStyle=i}})},{name:"Default algorithm",description:"The default layout algorithm",controller:new ze({options:$n(Cu),reader:s=>s.settings.appearance.defaultDiagramAlgorithm,writer:(s,i)=>{s.settings.appearance.defaultDiagramAlgorithm=i}})},{name:"Default table appearance",description:"The default appearance of tables",controller:new ze({options:$n(Eu),reader:s=>s.settings.appearance.defaultDiagramMode,writer:(s,i)=>{s.settings.appearance.defaultDiagramMode=i}})},{name:"Default layout direction",description:"The default diagram direction",controller:new ze({options:$n(ju),reader:s=>s.settings.appearance.defaultDiagramDirection,writer:(s,i)=>{s.settings.appearance.defaultDiagramDirection=i}})},{name:"Default record link visibility",description:"The default visibility of record links",controller:new ze({options:$n(Lu),reader:s=>s.settings.appearance.defaultDiagramLinkMode,writer:(s,i)=>{s.settings.appearance.defaultDiagramLinkMode=i}})}]}),n&&r.push({name:"Cloud endpoints",preferences:[{name:"Auth base",description:"The base URL for cloud authentication",controller:new Yo({placeholder:"https://...",reader:s=>s.settings.cloud.urlAuthBase,writer:(s,i)=>{s.settings.cloud.urlAuthBase=i}})},{name:"API base",description:"The base URL for the cloud API",controller:new Yo({placeholder:"https://...",reader:s=>s.settings.cloud.urlApiBase,writer:(s,i)=>{s.settings.cloud.urlApiBase=i,s.settings.cloud.urlApiMgmtBase=i}})}]}),r}function $n(e){return e.filter(({value:t})=>t!=="default")}const we=e=>({type:"launch",handler:e}),Fv=e=>({type:"insert",content:e}),Hv=e=>({type:"preference",controller:e}),V=(e,t)=>({type:"intent",intent:e,payload:t});function Qv(){const{setActiveConnection:e,resetOnboardings:t}=Le.getState(),n=Du(),r=Le(m=>m.commandHistory),s=Et(m=>m.isServing),i=Et(m=>m.currentState),c=Et(m=>m.connectionSchema),[a,l]=Sh(),[u,h]=Ya(),[,f]=ur(),p=Mu(),g=p?.id===Ki,v=i!=="disconnected"&&!g,b=d.useMemo(()=>qv().flatMap(({name:m,preferences:y})=>y.map(S=>({...S,name:`${m} > ${S.name}`}))),[]);return d.useMemo(()=>{const m=[],y=u?.id==="query",S=u?.id==="graphql";if(m.push({name:"History",visibility:"unsearched",commands:r.map((C,D)=>({id:`history-${D}`,name:C,icon:Sn,action:Fv(C)}))},{name:"Connections",commands:[{id:"connect-sandbox",name:"Open the Sandbox",icon:Ru,binding:!0,action:we(()=>{e(Ki)})},...n.map(C=>({id:`connect-${C.id}`,name:`Connect to ${C.name}`,icon:Mr,binding:!0,action:we(()=>{e(C.id)})})),{id:"new-connection",name:"Create new connection",icon:cn,binding:!0,action:V("new-connection")},{id:"reconnect",name:"Reconnect to database",icon:Is,binding:!0,action:we(Pu)},...Ze(v&&{id:"disconnect",name:"Disconnect from database",icon:rt,binding:!0,action:we(Nu)})]}),p){const C=c.database.tables||[],D=[...c.root.accesses,...c.namespace.accesses,...c.database.accesses].filter(x=>x.kind.kind==="RECORD");m.push({name:"Views",commands:Object.values(ma).flatMap(x=>Ze(!x.disabled?.(Os.store)&&{id:`open-view-${x.id}`,name:`Open ${x.name} View`,icon:x.icon,binding:!0,action:we(()=>{h(x.id)})}))},{name:"Tables",commands:[...C.map(x=>({id:`explore-table-${x.schema.name}`,name:`Explore table ${x.schema.name}`,icon:Cn,action:V("explore-table",{table:x.schema.name})})),...C.map(x=>({id:`design-table-${x.schema.name}`,name:`Design table ${x.schema.name}`,icon:Cn,action:V("design-table",{table:x.schema.name})})),{id:"new-table",name:"Create new table",icon:cn,binding:["mod","n"],action:V("new-table")}]},{name:"Query",commands:[{id:"run-query",name:"Run query",icon:xr,binding:["mod","enter"],action:V("run-query"),disabled:!y},{id:"save-query",name:"Save query",icon:Iu,binding:!0,action:V("save-query"),disabled:!y},{id:"format-query",name:"Format query",icon:jn,binding:!0,action:V("format-query"),disabled:!y},{id:"toggle-variables",name:"Toggle variables panel",icon:Yi,binding:!0,action:V("toggle-variables"),disabled:!y},{id:"infer-variables",name:"Infer variables from query",icon:Ts,binding:!0,action:V("infer-variables"),disabled:!y},{id:"query-saves",name:"View saved queries",icon:zr,binding:!0,action:V("open-saved-queries")},{id:"query-history",name:"View query history",icon:Ia,binding:!0,action:V("open-query-history")},{id:"new-query",name:"Create new query",icon:cn,binding:["mod","t"],action:V("new-query")},{id:"close-query",name:"Close current query",icon:rt,binding:["mod","w"],action:V("close-query"),disabled:!y},...Ze(Rt&&{id:"open-query-file",name:"Open query file...",icon:Na,binding:["mod","o"],action:we(()=>{le.openQueryFile()})})]},{name:"GraphQL",commands:[{id:"run-gql-query",name:"Run query",icon:xr,binding:["mod","enter"],action:V("run-graphql-query"),disabled:!S},{id:"format-gql-query",name:"Format query",icon:jn,binding:!0,action:V("format-graphql-query"),disabled:!S},{id:"toggle-gql-variables",name:"Toggle variables panel",icon:Yi,binding:!0,action:V("toggle-graphql-variables"),disabled:!S},{id:"infer-gql-variables",name:"Infer variables from query",icon:Ts,binding:!0,action:V("infer-graphql-variables"),disabled:!S}]},{name:"Authentication",commands:[{id:"new-kv-user",name:"Create root user",icon:Tu,binding:!0,action:V("create-user",{level:"ROOT"})},{id:"new-ns-user",name:"Create namespace user",icon:ku,binding:!0,action:V("create-user",{level:"NAMESPACE"})},{id:"new-db-user",name:"Create database user",icon:Ou,binding:!0,action:V("create-user",{level:"DATABASE"})},{id:"new-access",name:"Create access",icon:Au,binding:!0,action:V("create-access")},...D.map(x=>({id:`register-user-${x.name}`,name:`Register user with access method ${x.name}`,icon:zu,action:V("register-user",{access:x.name})}))]},{name:"API Docs",commands:$u.map(x=>({id:`docs-lang-${x.id}`,name:`Preview snippets in ${x.id}`,icon:_u,action:V("docs-switch-language",{lang:x.id})}))},{name:"Database",commands:[{id:"import-database",name:"Import database",icon:qu,binding:!0,action:V("import-database")},{id:"export-database",name:"Export database",icon:ps,binding:!0,action:V("export-database")}]},{name:"Sandbox",commands:[{id:"reset-sandbox",name:"Reset sandbox environment",unlisted:!g,icon:Xi,binding:!0,action:we(()=>{g&&Fu()})},...a.map(({label:x,value:E})=>({id:`apply-dataset-${E}`,name:`Apply dataset ${x}`,unlisted:!g,icon:Hu,binding:!0,action:we(()=>{g&&l(E)})}))]})}return Rt&&m.push({name:"Serving",commands:[{id:"toggle-serving",name:`${s?"Stop":"Start"} database serving`,icon:s?Qu:xr,binding:!0,action:V("toggle-serving")},{id:"open-serving-console",name:"Open serving console",icon:Wu,binding:!0,action:V("open-serving-console")}]}),m.push({name:"Settings",commands:[...Ze(Rt&&[{id:"inc-win-scale",name:"Increase interface zoom",icon:Uu,binding:["mod","equal"],action:V("increase-window-scale")},{id:"dec-win-scale",name:"Decrease interface zoom",icon:Bu,binding:["mod","minus"],action:V("decrease-window-scale")},{id:"toggle-win-pinned",name:"Toggle window always on top",icon:Vu,binding:["F10"],action:V("toggle-pinned")}]),{id:"inc-edit-scale",name:"Increase editor zoom",icon:Gu,binding:["mod","shift","equal"],action:V("increase-editor-scale")},{id:"dec-edit-scale",name:"Decrease editor zoom",icon:Ku,binding:["mod","shift","minus"],action:V("decrease-editor-scale")},{id:"open-preferences",name:"Manage Preferences",icon:Yu,action:V("open-settings",{tab:"preferences"})},{id:"open-keybindings",name:"Configure Keybindings",icon:Xu,action:V("open-settings",{tab:"keybindings"})},{id:"open-templates",name:"Manage Templates",icon:Mr,action:V("open-settings",{tab:"templates"})},...Ze(Rt&&{id:"open-serving",name:"Manage Database Serving",icon:xr,action:V("open-settings",{tab:"serving"})}),{id:"open-manage-data",name:"Manage Data",icon:ha,action:V("open-settings",{tab:"manage-data"})},{id:"open-feature-flags",name:"Manage Feature Flags",icon:Ju,action:V("open-settings",{tab:"feature-flags"})},{id:"open-licenses",name:"View OSS Licenses",icon:Zu,action:V("open-settings",{tab:"licenses"}),aliases:["Manage OSS Licenses"]},{id:"open-about",name:"View About",icon:wn,action:V("open-settings",{tab:"about"})}]},{name:"Preferences",visibility:"searched",commands:b.map(C=>({id:`pref-${Ld(C.name.toLowerCase())}`,name:C.name,icon:wr,action:Hv(C.controller)}))},{name:"Navigation",commands:[{id:"open-start-screen",name:"Open start screen",icon:ed,action:we(()=>f("/start"))},{id:"open-search",name:"Open Surrealist Search",icon:Sn,binding:["mod","k"],unlisted:!0,action:V("open-command-palette")},{id:"open-connections",name:"Open connection list",aliases:["connections"],icon:Mr,binding:["mod","l"],action:V("open-connections")},{id:"open-settings",name:"Open Settings",icon:td,binding:["mod",","],action:V("open-settings")},{id:"open-help",name:"Open Help & Support",icon:wn,action:V("open-help")},{id:"open-news",name:"Open latest news",icon:nd,action:V("open-news")},{id:"open-embedder",name:"Open mini generator",icon:wr,aliases:["mini"],binding:!0,action:V("open-embedder")},{id:"open-docs",name:"Search SurrealDB documentation",aliases:["Docs"],icon:rd,binding:["mod","j"],action:V("open-documentation")},{id:"open-changelog",name:"View release changelogs",icon:zr,action:V("open-changelog")},{id:"open-desktop-download",name:"Download Desktop App",icon:ps,action:V("open-desktop-download")},{id:"open-node-status",name:"Open node status",icon:sd,action:we(Ch)},...Ze(Rt&&{id:"check-updates",name:"Check for updates",icon:ps,action:we(()=>{le.checkForUpdates(!0)})})]},{name:"Developer",commands:[{id:"reload-win",name:"Reload window",icon:Is,action:we(()=>{location.reload()})},{id:"reset-tours",name:"Reset tours",icon:id,action:we(t)},{id:"sync-schema",name:"Sync database schema",icon:Xi,binding:!0,action:we(ga)},...Ze(Rt&&{id:"toggle-dev-tools",name:"Toggle developer tools",icon:wr,action:we(()=>{le.toggleDevTools()})}),...Ze(Os.store.highlight_tool&&{id:"highlight-tool",name:"Highlight Tool",icon:wr,action:V("highlight-tool")})]}),m},[p,u,n,c,a,r,v,g,s,b,e,t])}const pr=d.createContext(null);function bb(){return d.useContext(pr)?.categories??[]}function yb(){return d.useContext(pr)?.registry??new Map}function xb(){return d.useContext(pr)?.keybinds??new Map}function wb(){return d.useContext(pr)?.dispatchCommand??Dl}function Wv({children:e}){const t=Qv(),n=Le(c=>c.keybindings),r=d.useMemo(()=>{const c=new Map;for(const a of t)for(const l of a.commands){if(c.has(l.id))throw new Error(`Duplicate command name: "${l.id}"`);c.set(l.id,l)}return c},[t]),s=d.useMemo(()=>{const c=new Map;for(const[a,{binding:l,disabled:u}]of r.entries())Array.isArray(l)&&u!==!0&&c.set(a,l);for(const[a,l]of Object.entries(n))r.has(a)&&c.set(a,l);return c},[r,n]),i=A(c=>{const a=r.get(c);if(!a){le.warn("Commands",`Attempted to dispatch unknown command "${c}"`);return}switch(Xs.capture("execute_command",{command:a.name}),a.action.type){case"href":{le.openUrl(a.action.href);break}case"intent":{od(a.action.intent,a.action.payload);break}case"launch":{a.action.handler();break}default:throw new Error(`Unsupported command action type "${a.action.type}" for dispatch`)}});return o.jsx(pr.Provider,{value:{categories:t,registry:r,keybinds:s,dispatchCommand:i},children:e})}function Uv(){const[e]=ad(),t=Ml({timeout:1e3});return[A(async()=>{const r={...le.dumpDebug(),Version:"3.1.7",Flags:Object.entries(e).map(([i,c])=>`${i}: ${c}`).join(", ")},s=Object.entries(r).reduce((i,[c,a])=>`${i}${c}: ${a}
`,"");t.copy(s)}),t]}function Bv({error:e,resetErrorBoundary:t}){const[n,r]=Uv(),s=st(),i=e instanceof Error?e.message:e;return o.jsx(Ht,{h:"100%",bg:s?"slate.0":"slate.9",children:o.jsx(Ft,{p:"xl",maw:800,mx:"auto",my:75,children:o.jsxs(je,{gap:"lg",children:[o.jsxs(ne,{c:"bright",children:[o.jsx(O,{path:Gr,size:"lg"}),o.jsx(yr,{children:"Surrealist encountered an error"})]}),o.jsx(K,{children:"You can find a detailed error message below. If you believe this is a bug, please report it on our GitHub repository."}),o.jsxs(ne,{children:[o.jsx(pe,{leftSection:o.jsx(O,{path:Ra}),onClick:t,variant:"light",color:"slate",radius:"xs",size:"xs",children:"Reload Surrealist"}),o.jsx(pe,{leftSection:o.jsx(O,{path:cd}),onClick:()=>le.openUrl("https://github.com/surrealdb/surrealist/issues"),variant:"light",color:"slate",radius:"xs",size:"xs",children:"File an issue"}),o.jsx(pe,{leftSection:o.jsx(O,{path:r.copied?or:ri}),onClick:n,variant:"light",color:"slate",radius:"xs",size:"xs",children:r.copied?"Copied!":"Copy version information"})]}),o.jsx(sr,{}),i&&o.jsxs(ae,{children:[o.jsx(yr,{order:3,children:"Message"}),o.jsx(K,{mt:"xs",ff:"mono",c:"slate",children:i})]}),e.cause&&o.jsxs(ae,{children:[o.jsx(yr,{order:3,children:"Cause"}),o.jsx(ae,{mt:"xs",ff:"mono",c:"slate",style:{whiteSpace:"pre",overflowX:"auto",maxWidth:"90vw",WebkitUserSelect:"initial",userSelect:"initial"},children:e.cause})]}),e.stack&&o.jsxs(ae,{children:[o.jsx(yr,{order:3,children:"Stack trace"}),o.jsx(ae,{mt:"xs",ff:"mono",c:"slate",style:{whiteSpace:"pre",overflowX:"auto",maxWidth:"90vw",WebkitUserSelect:"initial",userSelect:"initial"},children:e.stack})]})]})})})}const Vv=new gh;function Sb({children:e}){const t=st(),n=ld();return o.jsx(ud,{children:o.jsx(vh,{client:Vv,children:o.jsxs(Rl,{withCssVariables:!0,theme:dd,forceColorScheme:n,children:[o.jsx(Pl,{}),o.jsx(Bf,{FallbackComponent:Bv,onReset:()=>location.reload(),children:o.jsx(Id,{children:o.jsx(cp,{borderRadius:"md",shadow:t?"xs":"0 6px 12px 2px rgba(0, 0, 0, 0.25)",submenuDelay:250,children:o.jsx(rf,{children:o.jsx(Wv,{children:e})})})})})]})})})}export{Co as $,_s as A,Gf as B,Ya as C,Oa as D,Bf as E,sf as F,fb as G,ur as H,qs as I,xf as J,cb as K,Wf as L,lb as M,yf as N,Fa as O,wh as P,vb as Q,ab as R,Sb as S,Sh as T,Ch as U,rs as V,db as W,Rr as X,Pt as Y,ws as Z,xi as _,Xd as a,nb as a0,uf as a1,Wt as a2,pb as a3,Vp as a4,za as a5,Wp as a6,Sp as a7,Bp as a8,Gp as a9,$d as aa,kd as ab,zd as ac,Rc as ad,xb as ae,wb as af,ub as ag,pt as ah,Ko as ai,Yo as aj,ze as ak,bb as al,sb as am,Im as an,Uv as ao,yb as ap,qv as aq,ib as ar,Hd as b,ob as c,Kr as d,ot as e,Xr as f,Jf as g,io as h,hb as i,Jr as j,Yf as k,Za as l,lh as m,We as n,eh as o,ih as p,Ce as q,rb as r,Ed as s,Xf as t,Zd as u,Gn as v,hh as w,gb as x,si as y,bh as z};
