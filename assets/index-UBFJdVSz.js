import{j as e,S as T,T as C,B as o,G as I,g as k,h as p,C as v,D as A,i as O}from"./mantime-DzxuLKfp.js";import{r as u}from"./react-DmHxDqaV.js";import{s as m}from"./codemirror-C1Jmd34s.js";import{f as y,p as M,D as R,d as L,I as U,e as B,S as F,C as x,O as N,T as z,g as H}from"./index-BKfNB2Nq.js";function P(a){var i=u.useState(function(){return y(typeof a=="function"?a():a,!0)}),n=i[1];return[i[0],u.useCallback(function(r){n(typeof r=="function"?M(r):y(r))},[])]}const G={dataset:"none",setup:"",query:"",theme:"dark",variables:"{}",orientation:"vertical",transparent:!1,nonumbers:!1},_=[{label:"None",value:"none"},...Object.entries(R).map(([a,{name:i}])=>({label:i,value:a}))];function l({children:a,help:i,extra:n}){return e.jsxs(I,{mb:"sm",gap:"xs",children:[e.jsx(C,{fw:600,fz:"lg",c:"bright",children:a}),i&&e.jsx(k,{label:i,children:e.jsx(o,{children:e.jsx(U,{path:B,size:"sm"})})}),n&&e.jsxs(e.Fragment,{children:[e.jsx(F,{}),n]})]})}function Q({value:a,onChangeURL:i}){const[n,r]=P({...G,...a}),[d,E]=u.useState("Embed");u.useEffect(()=>{a&&r(a)},[a]);const c=u.useMemo(()=>{const t=new URLSearchParams,{dataset:s,setup:f,query:j,variables:g,orientation:b,theme:S,transparent:w,nonumbers:D}=n;f.length>0&&t.append("setup",f),j.length>0&&t.append("query",j),g!=="{}"&&t.append("variables",g),s!=="none"&&t.append("dataset",s),b!=="vertical"&&t.append("orientation",b),S!=="dark"&&t.append("theme",S),w&&t.append("transparent","true"),D&&t.append("nonumbers","true");const h=new URL(location.toString());return h.protocol="https:",h.hostname="surrealist.app",h.port="",h.pathname="mini",h.search=t.toString(),h.toString()},[n]),q=u.useMemo(()=>L(`
			<iframe
				width="750"
				height="500"
				src="${c}"
				title="Surrealist Mini"
				frameborder="0"
				allowTransparency="true"
				referrerpolicy="strict-origin-when-cross-origin">
			</iframe>
		`),[c]);return u.useLayoutEffect(()=>{i?.(c)},[c,i]),e.jsxs(T,{gap:"lg",children:[e.jsx(C,{children:"This form allows you to build a sharable mini version of Surrealist pre-loaded with configured values, such as queries, variables, and other settings. You can use these embedded mini's in your blog posts, documentation, or other places where you want to share interactive SurrealDB queries."}),e.jsxs(o,{children:[e.jsx(l,{help:"The query placed into the query editor",children:"Editor query"}),e.jsx(x,{multiline:!0,autoFocus:!0,value:n.query,placeholder:"SELECT * FROM something...",onChange:t=>{r(s=>{s.query=t})},extensions:[m()]})]}),e.jsxs(o,{children:[e.jsx(l,{help:"The variables placed into the query editor",children:"Editor variables"}),e.jsx(x,{multiline:!0,value:n.variables,onChange:t=>{r(s=>{s.variables=t})},extensions:[m()]})]}),e.jsxs(o,{children:[e.jsx(l,{help:"The query executed when loading the mini. Useful for inserting pre-existing records",children:"Setup query"}),e.jsx(x,{multiline:!0,value:n.setup,placeholder:"CREATE something...",onChange:t=>{r(s=>{s.setup=t})},extensions:[m()]})]}),e.jsxs(o,{children:[e.jsx(l,{help:"An official SurrealDB dataset to load into the mini on load",children:"Dataset"}),e.jsx(p,{data:_,value:n.dataset,onChange:t=>{r(s=>{s.dataset=t||""})}})]}),e.jsxs(o,{children:[e.jsx(l,{help:"The visual orientation of the mini",children:"Orientation"}),e.jsx(p,{data:N,value:n.orientation,onChange:t=>{r(s=>{s.orientation=t})}})]}),e.jsxs(o,{children:[e.jsx(l,{help:"The color scheme used by the mini",children:"Color scheme"}),e.jsx(p,{data:z,value:n.theme,onChange:t=>{r(s=>{s.theme=t})}})]}),e.jsxs(o,{children:[e.jsx(l,{help:"Miscellaneous options for the mini",children:"Options"}),e.jsxs(T,{children:[e.jsx(v,{label:"Transparent",checked:n.transparent,onChange:t=>{r(s=>{s.transparent=t.target.checked})}}),e.jsx(v,{label:"Hide line numbers",checked:n.nonumbers,onChange:t=>{r(s=>{s.nonumbers=t.target.checked})}})]})]}),e.jsx(A,{}),e.jsxs(o,{children:[e.jsxs(l,{extra:e.jsx(O,{data:["Iframe","URL"],value:d,onChange:E,radius:"xs"}),children:["Mini ",d==="Iframe"?"snippet":"url"]}),e.jsx(H,{value:d==="Iframe"?q:c,withCopy:!0,language:d==="Iframe"?"html":void 0})]})]})}export{G as D,Q as E,P as i};
